#!/bin/sh
for i in $*
do
  case $i in
  --prefix=*) prefix=`echo $i|sed 's/--prefix=//'` ;;
  --libdir=*) libdir=`echo $i|sed 's/--libdir=//'` ;;
  --includedir=*) includedir=`echo $i|sed 's/--includedir=//'` ;;
  esac
done

if test -r ../config.cache; then 
  . ../config.cache
fi

if test set${ac_cv_singuname} = set; then
  :
else
  ac_cv_singuname="unknown"
  if test -r "../singuname.sh"; then
    if (/bin/sh ../singuname.sh >/dev/null 2>&1) then
      ac_cv_singuname=`/bin/sh ../singuname.sh`
    fi
  fi
fi

if test x$CC = x
then
  CC=gcc
fi

if test x$CXX = x
then
  CC=g++
fi

echo "#!/bin/sh" >config.status
echo "cd src" >>config.status
echo ./configure CC=$CC CXX=$CXX LIBDIR=$libdir INCLUDEDIR=$includedir PREFIX=$prefix NTL_GMP_LIP=on GMP_PREFIX=$prefix/${ac_cv_singuname} CFLAGS=\"-O3 -fomit-frame-pointer\" CXXFLAGS=\"-O3 -fomit-frame-pointer -fno-rtti -fno-exceptions\" >>config.status
echo "cd .." >>config.status

cd src

./configure CC=$CC CXX=$CXX LIBDIR=$libdir INCLUDEDIR=$includedir PREFIX=$prefix NTL_GMP_LIP=on GMP_PREFIX=$prefix/${ac_cv_singuname}

cd ..

