#/*
# * This was automatically generated by modgen
# * version 0.2
# * module python
# * Don't edit this file
# */
#
#
CC	= gcc
CXX	= gcc
PYTHON_VERSION=2.3
SINGULAR_BASE=../..
SING_ARCH=ix86
CFLAGS	= -DNDEBUG -DBUILD_MODULE -I. -I${SINGULAR_BASE}/kernel -I${SINGULAR_BASE}/Singular -I/home/michael/sing/${SING_ARCH}-Linux/include  -I/usr/include/python${PYTHON_VERSION}
DCFLAGS	= -DBUILD_MODULE -I. -I/home/michael/sing/kernel -I${SINGULAR_BASE}/Singular -I/home/michael/sing/${SING_ARCH}-Linux/include -I/usr/include/python${PYTHON_VERSION}
LDFLAGS= -lboost_python -lpython${PYTHON_VERSION} -lpython${PYTHON_VERSION}
#LD	=
MKINSTALLDIRS=mkdir -p
instdir          = /home/michael/sing/ix86-Linux
INSTALL		= /home/michael/sing/Singular/install-sh -c
INSTALL_PROGRAM	= ${INSTALL}
INSTALL_DATA	= ${INSTALL} -m 644
SRCS	= python.cc wrapper.cc
OBJS	= python.o wrapper.o
DOBJS	= python.og wrapper.o

all:	python_module.so python_module_g.so 

%.o: %.cc Makefile wrapper.h
	${CC} ${CFLAGS} -c -fPIC -DPIC $< -o $*.o

%.og: %.cc Makefile
	${CC} ${DCFLAGS} -c -fPIC -DPIC $< -o $*.og

python_module.so: ${OBJS}
	${CC} ${CFLAGS} ${LDFLAGS} -shared -Wl,-soname -Wl,python_module.so.1 \
		-o python_module.so.1.2.0 ${OBJS}
	rm -f python_module.so
	ln -s python_module.so.1.2.0 python_module.so

python_module_g.so: ${DOBJS}
	${CC} ${DCFLAGS} ${LDFLAGS} -shared -Wl,-soname -Wl,python_module_g.so.1 \
		-o python_module_g.so.1.2.0 ${DOBJS}
	rm -f python_module_g.so
	ln -s python_module_g.so.1.2.0 python_module_g.so

clean:
	rm -f *.o *.og *.lo *.so* *.sl *.la *~ core

distclean: clean
	rm -f python.cc python.h Makefile *.bin *.pl

install:
	${MKINSTALLDIRS} ${instdir}
	${MKINSTALLDIRS} ${instdir}/MOD
	${INSTALL_PROGRAM} python_module.so ${instdir}/MOD/python_module.so
	${INSTALL_PROGRAM} python_module.bin ${instdir}/MOD/python_module.bin


