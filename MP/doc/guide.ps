%!PS-Adobe-2.0
%%Creator: dvips 5.519 Copyright 1986, 1993 Radical Eye Software
%%Title: olaf.dvi
%%CreationDate: Sun May 25 08:25:50 1997
%%Pages: 64
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold Times-Italic Courier
%%EndComments
%DVIPSCommandLine: dvips olaf.dvi -o guide.ps
%DVIPSSource:  TeX output 1997.05.25:0824
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR matrix currentmatrix dup dup 4 get round 4 exch put dup dup 5 get
round 5 exch put setmatrix}N /@landscape{/isls true N}B /@manualfeed{
statusdict /manualfeed true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0
0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn
begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N string /base X
array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N end dup{/foo
setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{/sf 1 N /fntrx
FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]N df-tail}B /E{
pop nn dup definefont setfont}B /ch-width{ch-data dup length 5 sub get}
B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128 ch-data dup
length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127 sub}B
/ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp
0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2
index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff
ch-yoff ch-height sub ch-xoff ch-width add ch-yoff setcachedevice
ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff .1 add]{
ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}if nn
/base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup length 1
sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{cc 1 add D
}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin 0 0
moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale rulex ruley
false RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex ruley
scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave
transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta
0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}
B /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{
3 M}B /k{4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p
-1 w}B /q{p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{
3 2 roll p a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale false def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300
(/amd/tiger/usr/export/home/tiger/sgray/TEX/mp-1.0/guide/olaf.dvi)
@start /Fa 140[15 13[17 101[{}2 37.500000 /Times-Italic
rf /Fb 2 117 df<3E0006000C000C000C000C00180019E01E3018303830303030303030
6060606460C460C4C0C8C0700E147E9313>104 D<02000600060006000C00FF800C000C
001800180018001800300031003100320032001C0009127F910D>116
D E /Fc 1 59 df<60F0F06004047D830B>58 D E /Fd 1 21 df<00000600001E000078
0001E0000780001E0000780001E0000780001E0000780000E000007800001E0000078000
01E000007800001E000007800001E000007800001E000006000000000000000000000000
0000000000007FFFFCFFFFFE171F7D971E>20 D E /Fe 69[17 8[19
1[21 21 3[17 47[17 19 19 27 19 19 10 15 12 19 19 19 19
29 10 19 1[10 19 19 12 17 19 17 19 17 6[23 1[27 35 27
27 23 21 25 1[21 27 27 33 23 27 1[12 27 27 21 23 27 25
25 27 6[10 19 19 19 19 19 19 19 19 19 19 10 9 12 9 2[12
12 12 3[19 35[{}72 37.500000 /Times-Roman rf /Ff 81[28
52[25 25 36 25 28 17 19 22 1[28 25 28 41 14 28 1[14 1[25
1[22 28 22 28 25 13[28 6[33 4[39 5[36 9[25 25 25 25 25
25 25 1[14 12 17 12 4[17 39[{}38 50.000000 /Times-Bold
rf /Fg 4 40 df<7FE0000000000000000000FFFFC00000000000000000FFFFFC000000
00000000007FFFFFC000000000000000003FFFF80000000000000000007FFF0000000000
0000000007FFC00000000000000000007FF80000000000000000000FFE00000000000000
000001FF800000000000000000007FE00000000000000000000FF0000000000000000000
03FC00000000000000000000FE000000000000000000003F800000000000000000001FC0
00000000000000000007F000000000000000000003F800000000000000000000FC000000
000000000000007F000000000000000000001F800000000000000000000FC00000000000
0000000007E000000000000000000001F000000000000000000000F80000000000000000
00007C000000000000000000003E000000000000000000001F000000000000000000000F
8000000000000000000007C000000000000000000003E000000000000000000001F00000
0000000000000000F000000000000000000000F8000000000000000000007C0000000000
00000000003E000000000000000000001E000000000000000000001F0000000000000000
00000F80000000000000000000078000000000000000000007C000000000000000000003
E000000000000000000001E000000000000000000001F000000000000000000000F80000
000000000000000078000000000000000000007C000000000000000000003C0000000000
00000000003E000000000000000000001E000000000000000000001F0000000000000000
00000F000000000000000000000F000000000000000000000F8000000000000000000007
8000000000000000000007C000000000000000000003C000000000000000000003C00000
0000000000000003E000000000000000000001E000000000000000000001E00000000000
0000000001F000000000000000000000F000000000000000000000F00000000000000000
0000F000000000000000000000F800000000000000000000780000000000000000000078
0000000000000000000078000000000000000000007C000000000000000000003C000000
000000000000003C000000000000000000003C000000000000000000003C000000000000
000000003C000000000000000000003C000000000000000000003E000000000000000000
001E000000000000000000001E000000000000000000001E000000000000000000001E00
0000000000000000001E000000000000000000001E000000000000000000001E00000000
0000000000001E000000000000000000001E000000000000000000000C5757D383A6>36
D<000000000000000000000C000000000000000000001E000000000000000000001E0000
00000000000000001E000000000000000000001E000000000000000000001E0000000000
00000000001E000000000000000000001E000000000000000000001E0000000000000000
00001E000000000000000000003E000000000000000000003C000000000000000000003C
000000000000000000003C000000000000000000003C000000000000000000003C000000
000000000000003C000000000000000000007C0000000000000000000078000000000000
0000000078000000000000000000007800000000000000000000F8000000000000000000
00F000000000000000000000F000000000000000000000F000000000000000000001F000
000000000000000001E000000000000000000001E000000000000000000003E000000000
000000000003C000000000000000000003C000000000000000000007C000000000000000
000007800000000000000000000F800000000000000000000F000000000000000000000F
000000000000000000001F000000000000000000001E000000000000000000003E000000
000000000000003C000000000000000000007C0000000000000000000078000000000000
00000000F800000000000000000001F000000000000000000001E0000000000000000000
03E000000000000000000007C000000000000000000007800000000000000000000F8000
00000000000000001F000000000000000000001E000000000000000000003E0000000000
00000000007C00000000000000000000F800000000000000000000F00000000000000000
0001F000000000000000000003E000000000000000000007C00000000000000000000F80
0000000000000000001F000000000000000000003E000000000000000000007C00000000
000000000000F800000000000000000001F000000000000000000007E000000000000000
00000FC00000000000000000001F800000000000000000007F00000000000000000000FC
00000000000000000003F800000000000000000007F00000000000000000001FC0000000
0000000000003F80000000000000000000FE00000000000000000003FC00000000000000
00000FF00000000000000000007FE0000000000000000001FF8000000000000000000FFE
0000000000000000007FF8000000000000000007FFC000000000000000007FFF00000000
000000003FFFF8000000000000007FFFFFC000000000000000FFFFFC0000000000000000
FFFFC000000000000000007FE00000000000000000005757D3D6A6>I<60000000000000
00000000F000000000000000000000F000000000000000000000F0000000000000000000
00F000000000000000000000F000000000000000000000F000000000000000000000F000
000000000000000000F000000000000000000000F000000000000000000000F800000000
000000000000780000000000000000000078000000000000000000007800000000000000
000000780000000000000000000078000000000000000000007800000000000000000000
7C000000000000000000003C000000000000000000003C000000000000000000003C0000
00000000000000003E000000000000000000001E000000000000000000001E0000000000
00000000001E000000000000000000001F000000000000000000000F0000000000000000
00000F000000000000000000000F80000000000000000000078000000000000000000007
8000000000000000000007C000000000000000000003C000000000000000000003E00000
0000000000000001E000000000000000000001E000000000000000000001F00000000000
0000000000F000000000000000000000F800000000000000000000780000000000000000
00007C000000000000000000003C000000000000000000003E000000000000000000001F
000000000000000000000F000000000000000000000F8000000000000000000007C00000
0000000000000003C000000000000000000003E000000000000000000001F00000000000
0000000000F000000000000000000000F8000000000000000000007C0000000000000000
00003E000000000000000000001E000000000000000000001F000000000000000000000F
8000000000000000000007C000000000000000000003E000000000000000000001F00000
0000000000000000F8000000000000000000007C000000000000000000003E0000000000
00000000001F000000000000000000000FC000000000000000000007E000000000000000
000003F000000000000000000001FC000000000000000000007E00000000000000000000
3F800000000000000000001FC000000000000000000007F000000000000000000003F800
000000000000000000FE000000000000000000007F800000000000000000001FE0000000
0000000000000FFC00000000000000000003FF00000000000000000000FFE00000000000
000000003FFC00000000000000000007FFC0000000000000000001FFFC00000000000000
00003FFFF8000000000000000007FFFFFC00000000000000007FFFFE0000000000000000
07FFFE0000000000000000000FFC575780D6A6>I<0000000000000000000FFC00000000
0000000007FFFE00000000000000007FFFFE0000000000000007FFFFFC00000000000000
3FFFF80000000000000001FFFC000000000000000007FFC000000000000000003FFC0000
00000000000000FFE0000000000000000003FF0000000000000000000FFC000000000000
0000001FE00000000000000000007F80000000000000000000FE00000000000000000003
F800000000000000000007F00000000000000000001FC00000000000000000003F800000
000000000000007E00000000000000000001FC00000000000000000003F0000000000000
00000007E00000000000000000000FC00000000000000000001F00000000000000000000
3E000000000000000000007C00000000000000000000F800000000000000000001F00000
0000000000000003E000000000000000000007C00000000000000000000F800000000000
000000001F000000000000000000001E000000000000000000003E000000000000000000
007C00000000000000000000F800000000000000000000F000000000000000000001F000
000000000000000003E000000000000000000003C000000000000000000007C000000000
00000000000F800000000000000000000F000000000000000000001F0000000000000000
00003E000000000000000000003C000000000000000000007C0000000000000000000078
00000000000000000000F800000000000000000000F000000000000000000001F0000000
00000000000001E000000000000000000001E000000000000000000003E0000000000000
00000003C000000000000000000007C00000000000000000000780000000000000000000
07800000000000000000000F800000000000000000000F000000000000000000000F0000
00000000000000001F000000000000000000001E000000000000000000001E0000000000
00000000001E000000000000000000003E000000000000000000003C0000000000000000
00003C000000000000000000003C000000000000000000007C0000000000000000000078
000000000000000000007800000000000000000000780000000000000000000078000000
0000000000000078000000000000000000007800000000000000000000F8000000000000
00000000F000000000000000000000F000000000000000000000F0000000000000000000
00F000000000000000000000F000000000000000000000F000000000000000000000F000
000000000000000000F000000000000000000000F0000000000000000000006000000000
00000000000057578083A6>I E /Fh 133[20 1[20 1[20 1[20
20 20 1[20 20 20 1[20 2[20 1[20 20 20 20 20 1[20 12[20
3[20 2[20 7[20 20 20 1[20 3[20 4[20 14[20 20 40[{}28
33.333332 /Courier rf /Fi 81[18 52[17 17 24 17 17 9 13
11 1[17 17 17 26 9 17 1[9 17 17 11 15 17 15 17 15 10[24
1[20 18 2[18 1[24 30 20 2[11 24 1[18 20 24 22 22 24 10[17
1[17 1[17 17 2[8 11 8 2[11 11 40[{}48 33.333332 /Times-Roman
rf /Fj 205[12 12 49[{}2 25.000000 /Times-Roman rf /Fk
60[22 69[22 1[22 22 22 22 22 22 22 22 22 22 22 22 22
22 22 22 22 1[22 22 22 22 22 22 22 22 22 1[22 8[22 22
22 22 22 1[22 22 22 22 22 2[22 22 22 22 22 22 22 22 22
5[22 2[22 1[22 22 22 22 22 22 22 22 22 22 22 1[22 22
22 1[22 3[22 34[{}66 37.500000 /Courier rf /Fl 134[21
1[30 21 21 12 16 14 1[21 21 21 32 12 21 1[12 1[21 14
18 21 18 21 18 97[{.167 SlantFont}21 41.666668 /Times-Roman
rf /Fm 133[26 29 29 42 29 32 19 23 26 1[32 29 32 48 16
32 1[16 32 29 19 26 32 26 32 29 10[42 1[39 32 42 1[36
45 1[55 39 2[23 45 1[36 39 42 42 39 42 6[19 29 29 29
29 29 29 29 29 29 2[15 19 45[{}52 58.333336 /Times-Bold
rf /Fn 139[28 1[37 1[46 7[46 2[37 3[42 29[60 14[42 42
42 42 49[{}11 83.333336 /Times-Bold rf /Fo 4 94 df<00060000000600000006
000000060000000600000006000000060000000600000006000000060000000600000006
000000060000FFFFFFE0FFFFFFE000060000000600000006000000060000000600000006
0000000600000006000000060000000600000006000000060000000600001B1C7E9720>
43 D<7FFFFFC0FFFFFFE000000000000000000000000000000000000000000000000000
00000000000000FFFFFFE07FFFFFC01B0C7E8F20>61 D<FEFEC0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0FEFE07297C9E0C>91
D<FEFE060606060606060606060606060606060606060606060606060606060606060606
06060606FEFE0729809E0C>93 D E /Fp 201[15 1[15 1[15 15
49[{}4 29.166668 /Times-Roman rf /Fq 10 122 df<60F0F06004047C830C>58
D<60F0F0701010101020204080040C7C830C>I<0000038000000F0000003C000000F000
0003C000000F0000003C000000F0000003C000000F0000003C000000F0000000F0000000
3C0000000F00000003C0000000F00000003C0000000F00000003C0000000F00000003C00
00000F000000038019187D9520>I<00010003000600060006000C000C000C0018001800
180030003000300060006000C000C000C0018001800180030003000300060006000C000C
000C00180018001800300030003000600060006000C000C00010297E9E15>I<E0000000
780000001E0000000780000001E0000000780000001E0000000780000001E00000007800
00001E00000007800000078000001E00000078000001E00000078000001E000000780000
01E00000078000001E00000078000000E000000019187D9520>I<00000C0000000C0000
001C0000001C0000003C0000007C0000005C0000009C0000008E0000010E0000010E0000
020E0000040E0000040E0000080E0000080E0000100E0000200E00003FFE000040070000
4007000080070001000700010007000200070002000700060007001E000700FF807FF01C
1D7F9C1F>65 D<01C003C003C001800000000000000000000000001C0027004700470087
0087000E000E001C001C001C003800388038807080710032001C000A1C7E9B0E>105
D<381F004E61804681C04701C08F01C08E01C00E01C00E01C01C03801C03801C03801C07
00380710380710380E10380E2070064030038014127E9119>110
D<07878008C84010F0C020F1E020E3C040E18000E00000E00001C00001C00001C00001C0
00638080F38080F38100E5810084C60078780013127E9118>120
D<1C00C02701C04701C04701C08703808703800E03800E03801C07001C07001C07001C07
00180E00180E00180E001C1E000C3C0007DC00001C00001800603800F03000F06000E0C0
004180003E0000121A7E9114>I E /Fr 134[52 52 1[52 58 35
40 46 1[58 52 58 1[29 58 1[29 58 52 35 46 58 46 58 52
12[69 58 75 1[63 2[98 69 2[40 2[63 1[75 75 69 75 26[86
38[{}34 104.166664 /Times-Bold rf /Fs 60[25 69[25 1[25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 1[25
25 25 25 25 25 25 25 25 25 25 1[25 25 25 25 1[25 25 25
25 25 25 25 1[25 25 25 25 25 25 1[25 25 25 25 25 25 25
25 25 25 1[25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 1[25 25 25 33[{}86
41.666668 /Courier rf /Ft 7 121 df<FFFFFF80FFFFFF8019027D8A20>0
D<400020C000606000C03001801803000C0600060C0003180001B00000E00000E00001B0
00031800060C000C06001803003001806000C0C0006040002013147A9320>2
D<01800180018001804182F18F399C0FF003C003C00FF0399CF18F418201800180018001
8010127E9215>I<03C00FF01FF83FFC7FFE7FFEFFFFFFFFFFFFFFFF7FFE7FFE3FFC1FF8
0FF003C010107E9115>15 D<003C00E001C0018003800380038003800380038003800380
03800380038003800380030007001C00F0001C0007000300038003800380038003800380
0380038003800380038003800380018001C000E0003C0E297D9E15>102
D<F0001C0007000300038003800380038003800380038003800380038003800380038001
8001C000E0003C00E001C001800380038003800380038003800380038003800380038003
800380030007001C00F0000E297D9E15>I<1F00308070406060E0E0E0E0E040E0006000
7000300018001C003300718061C0E0C0E0E0E0E0E0E060E070C031C01980070003000180
01C000C000E040E0E0E0E0E0C0C041C021801F000B257D9C12>120
D E /Fu 78[21 1[21 21 52[18 18 28 18 21 12 16 16 21 21
21 21 30 12 18 12 12 21 21 12 18 21 18 21 21 11[30 23
21 25 1[25 30 28 1[23 1[18 14 1[30 1[25 30 28 25 25 6[14
21 1[21 21 1[21 1[21 3[10 14 10 2[14 14 14 32 38[{}57
41.666668 /Times-Italic rf /Fv 55[14 13[18 8[21 1[23
23 3[18 47[18 21 21 30 21 21 12 16 14 21 21 21 21 32
12 21 12 12 21 21 14 18 21 18 21 18 3[14 1[14 25 30 30
39 30 30 25 23 28 1[23 30 30 37 25 30 16 14 30 30 23
25 30 28 28 30 5[12 12 21 21 21 21 21 21 21 21 21 21
12 10 14 10 1[21 14 14 14 4[17 14 33[{}81 41.666668 /Times-Roman
rf /Fw 78[21 1[23 53[21 2[21 23 14 16 18 1[23 21 23 35
1[23 1[12 1[21 14 18 23 18 23 21 11[30 28 23 30 1[25
2[39 3[16 4[30 30 1[30 8[21 3[21 21 21 21 21 9[35 38[{}38
41.666668 /Times-Bold rf /Fx 134[19 3[19 10 15 12 3[19
29 1[19 3[19 1[17 19 17 1[17 32[34 17[9 46[{.167 SlantFont}15
37.500000 /Times-Roman rf /Fy 134[25 2[25 25 14 19 17
1[25 25 25 39 3[14 25 1[17 22 25 22 1[22 11[36 1[28 3[36
1[44 1[36 2[36 36 2[36 33 1[36 7[25 1[25 1[25 25 1[25
25 25 2[17 12 44[{}36 50.000000 /Times-Roman rf /Fz 136[51
1[35 20 27 23 2[35 35 55 3[20 35 35 1[31 35 2[31 10[51
5[39 2[63 5[51 5[51 14[35 35 2[18 46[{}22 70.833336 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 0 1
0 0 bop 484 933 a Fz(A)18 b(Guide)g(to)f(Programming)j(with)d(MP)788
1024 y(V)-8 b(ersion)19 b(1.1.2)848 1207 y Fy(Simon)11
b(Gray)464 1298 y(Department)g(of)h(Mathematics)h(and)g(Computer)e
(Science)759 1356 y(Kent)h(State)h(University)689 1414
y(Kent,)g(OH)f(44242-4001,)g(USA)819 1478 y Fx(sgray@mcs.kent.edu)836
1596 y Fy(May)h(25,)f(1997)p eop
%%Page: 0 2
0 1 bop 898 789 a Fw(Abstract)75 880 y Fv(This)11 b(report)e(describes)
j(a)f(C)f(implementation)f(of)i(version)f(1.1.2)g(of)h(the)f(Multi)f
(Protocol)g(\(MP\))i([7)o(])g([8)o(])g(and)g(is)f(intended)75
930 y(as)15 b(a)f(guide)g(for)f(programmers)h(wishing)f(to)g(use)i(MP)f
(in)f(their)g(own)h(applications.)25 b(MP)14 b(is)g(designed)g(for)f
(integrating)75 980 y(symbolic,)h(numeric,)h(graphical,)f(document)g
(processing,)g(and)g(other)f(software)g(tools)g(for)g(scienti\256c)g
(computation)g(in)75 1029 y(dif)o(ferent)e(computing)g(paradigms)h
(\(point)f(to)g(point,)h(distributed,)e(parallel,)j(software)f(bus\).)
20 b(The)13 b(protocol)d(speci\256es)k(a)75 1079 y(set)9
b(of)f(basic)h(types,)g(a)g(mechanism)g(\(annotated)f(parse)h(trees\))g
(for)f(sending)g(structured)f(data)i(\(such)f(as)h(expression)f(trees)h
(or)75 1129 y(arrays,)h(lists,)e(etc.\),)h(annotations)e(to)h(provide)f
(supplemental)h(information,)f(and)h(various)g(optimization)e
(techniques.)15 b(In)8 b(a)75 1179 y(layer)g(above)h(the)f(data)g
(exchange)h(portion)d(of)i(the)g(protocol,)g(MP)g(supports)f
(collections)g(of)h(de\256nitions)f(for)g(mathematical)75
1229 y(symbols)k(\(operators)g(and)h(symbolic)f(constants\))h(and)f
(annotations)g(in)g Fu(dictionaries)p Fv(.)18 b(The)12
b(C)g(implementation)e(de\256nes)75 1278 y(a)17 b(mapping)e(of)h(MP)h
(data)f(types)g(to)g(C)g(data)g(types)g(and)g(a)h(set)g(of)f(routines)f
(for)g(transmitting)f(data)j(and)f(performing)75 1328
y(some)c(standard)f(type)f(conversions.)17 b(MP)11 b(is)g(independent)f
(of)h(the)g(mechanism)h(used)f(to)g(deliver)f(the)h(data.)18
b(The)11 b(current)75 1378 y(implementation)6 b(works)h(with)f
(\256les,)j(sockets,)f(T)m(oolBus,)g(and)f(PVM.)h(Examples)g
(illustrating)t(how)f(a)h(sender)g(and)f(receiver)75
1428 y(can)k(be)g(connected)f(and)h(exchange)g(annotated)e(parse)i
(trees)g(are)g(included.)p eop
%%Page: 1 3
1 2 bop 697 121 a Fv(MP)10 b(version)g(1.1.2:)15 b(Multi)8
b(Protocol)705 171 y(Kent)i(State)h(University)m(,)e(Kent,)i(OH)668
221 y(Authors:)i(S.)e(Gray)m(,)g(N.)g(Kajler)n(,)g(P)-5
b(.)11 b(W)m(ang)520 271 y(\(C\))e(1993,)h(1994,)g(1995,)g(1996,)f
(1997)h(All)f(Rights)g(Reserved)899 370 y(NOTICE)75 462
y(Permission)14 b(is)g(hereby)h(granted)f(to)g(use,)i(copy)m(,)g
(modify)m(,)g(and)e(distribute)f(this)g(software)i(and)f(its)g
(documentation)g(for)75 512 y(non-commercial)c(purposes)g(and)h
(without)d(fee)j(provided)e(that)h(the)g(above)g(copyright)f(notice)h
(appears)h(in)f(all)g(copies)g(and)75 561 y(that)g(both)f(the)h
(copyright)e(notice)i(and)h(this)e(permission)h(notice)f(appear)i(in)f
(supporting)e(documentation.)75 635 y(Neither)h(Kent)h(State)g
(University)e(nor)h(the)h(Authors)f(make)i(any)f(representations)f
(about)g(the)h(suitability)d(of)i(this)g(software)75
685 y(for)i(any)g(purpose.)17 b(The)12 b(MP)f(Library)g(is)g
(distributed)e(in)i(the)g(hope)g(that)f(it)h(will)e(be)j(useful,)f(but)
g(is)g(provided)e(\252as)k(is\272)e(and)75 734 y(without)f(any)i
(warranty)f(of)h(any)g(kind)f(and)h(without)e(even)i(the)g(implied)f
(warranty)g(of)h(merchantability)e(or)i(\256tness)g(for)g(a)75
784 y(particular)d(purpose.)75 952 y(Independent)h(packages)h(used)g
(by)e(MP)i(have)g(their)e(own)h(copyright:)137 1035 y
Ft(\017)21 b Fv(GNU)9 b(MP:)f(multiple)f(precision)h(integer)g(and)h
(real)g(arithmetic)g(in)f(MP)h(is)f(provided)g(by)g(the)h(GNU)f(Multi)f
(Precision)179 1085 y(library)13 b(under)i(the)f(GNU)h(General)g
(Public)f(License.)30 b(GMP)15 b(is)f(available)h(from)g
Fs(prep.ai.mit.edu)e Fv(and)179 1135 y(many)d(other)g(ftp)g(servers)h
(as)f(gmp-2.0.2.tar)n(.gz)h(or)f(the)g(latest)g(version.)137
1218 y Ft(\017)21 b Fv(XDR:)9 b(eXternal)i(Data)f(Representation)g
(software,)g(Copyright)e(\(C\))i(1984,)g(Sun)g(Microsystems,)g(Inc.)75
1301 y(MP)d(is)g(available)g(via)g(anonymous)f(ftp)g(from)g
Fs(ftp.mcs.ke)o(nt.edu:/dis)o(t/MP/)p Fv(.)11 b(The)c(latest)g
(information)g(on)f(MP)75 1351 y(is)11 b(always)h(available)g(from)f
Fs(http://SymbolicNet.mcs.kent.edu/are)o(as/protocol)o(s/mp.html)p
Fv(.)75 1400 y(If)g(you)g(obtain)g(MP)-5 b(,)12 b(please)h(send)f(a)g
(short)f(note)g(containing)f(your)h(full)f(name)j(and)f(address)g(to)f
Fs(mp@mcs.kent.edu)p Fv(.)75 1450 y(This)c(allows)f(us)h(to)f(keep)i
(track)f(of)f(MP')n(s)h(users)g(and)g(to)f(notify)f(you)i(of)f(new)h
(versions,)h(bug)e(\256xes,)i(updated)f(documentation,)75
1500 y(etc.)16 b(Please)11 b(send)g(any)f(comments)h(or)f(bug)g
(reports)f(to)h Fs(mp@mcs.kent.edu)p Fv(.)75 1585 y(If)h(you)f(use)i
(MP)f(as)h(part)f(of)g(a)h(project)e(and/or)g(publish)g(a)i(result)e
(that)h(was)g(partly)g(obtained)f(using)g(MP)-5 b(,)12
b(please)g(cite)f(MP)-5 b(.)75 1635 y(W)m(e)11 b(would)e(also)h
(greatly)g(appreciate)h(it)e(if)h(you)g(would)f(inform)g(us)h(about)g
(such)g(a)h(project/paper)n(.)75 1720 y(MP)f(has)h(received)g(support)e
(from)h(a)h(number)f(of)g(sources,)h(including)d(ARO,)j(NSF)m(,)f(and)h
(ICM/Kent.)965 2754 y(1)p eop
%%Page: 3 4
3 3 bop 75 453 a Fr(Contents)137 669 y Fv(List)10 b(of)g(T)m(ables)i
Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)78 b Fv(5)137
719 y(List)10 b(of)g(Figures)26 b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)78
b Fv(7)75 810 y Fw(1)41 b(Intr)o(oduction)1492 b(8)137
860 y Fv(1.1)44 b(Motivation)8 b(and)i(Overview)37 b
Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
78 b Fv(8)137 910 y(1.2)44 b(Communication)9 b(Between)h(Applications)j
Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)78 b Fv(9)137
960 y(1.3)44 b(The)11 b(Structure)e(of)h(libMP)k Fq(:)21
b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
78 b Fv(9)137 1010 y(1.4)44 b(Conventions)28 b Fq(:)20
b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)57 b Fv(10)137 1059 y(1.5)44 b(Reporting)8
b(Results)38 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(11)75 1151 y Fw(2)41
b(Making)10 b(a)g(Connection)1313 b(12)137 1201 y Fv(2.1)44
b(The)11 b(MP)f(Environment)38 b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(12)137
1250 y(2.2)44 b(MP)10 b(Links)43 b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(13)137 1300 y(2.3)44 b(Example:)15 b(link)9 b(communication)g(via)
i(the)f(FILE)h(and)f(TCP)h(devices)28 b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(15)75
1392 y Fw(3)41 b(Sending)11 b(&)f(Receiving)g(Data)g(in)g(MP)1109
b(18)137 1441 y Fv(3.1)44 b(MP)10 b(-)g(C)g(Data)h(T)m(ypes)18
b Fq(:)i(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)57 b Fv(18)137 1491 y(3.2)44 b(Packets)17
b Fq(:)j(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(18)233
1541 y(3.2.1)50 b(node)10 b(packet)37 b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(18)233 1591 y(3.2.2)50 b(data)10 b(limbs)32 b Fq(:)20
b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)57 b Fv(20)233 1641 y(3.2.3)50 b(annotation)8
b(packet)40 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)57 b Fv(20)137 1690 y(3.3)44 b(MP)10 b(Dictionaries)30
b Fq(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)57 b Fv(21)137 1740 y(3.4)44 b(MP)10
b(T)o(rees)15 b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(22)137 1790 y(3.5)44 b(Sending)9 b(and)i(Receiving)e(Messages)40
b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(22)137 1840 y(3.6)44 b(Sending)9 b(Data)i(with)e(MP)22
b Fq(:)f(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)57 b Fv(23)233 1890 y(3.6.1)50 b(sending)9 b(numeric)i(data)f
Fq(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(24)233 1940 y(3.6.2)50 b(sending)9 b(strings)g(and)i(raw)f(data)22
b Fq(:)f(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b
Fv(24)233 1989 y(3.6.3)50 b(sending)9 b(meta)i(types)f(and)g(meta)i
(operators)f Fq(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(24)233
2039 y(3.6.4)50 b(sending)9 b(operators,)h(constants,)h(and)f
(identi\256ers)26 b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(25)233
2089 y(3.6.5)50 b(sending)9 b(expressions)32 b Fq(:)20
b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(26)137 2139 y(3.7)44 b(Receiving)9 b(Data)i(with)e(MP)23
b Fq(:)d(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)57 b Fv(28)233 2189 y(3.7.1)50 b(receiving)9 b(numeric)i(data)17
b Fq(:)k(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(28)233 2238 y(3.7.2)50 b(receiving)9 b(strings)h(and)g(raw)g(data)
30 b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(29)233 2288 y(3.7.3)50 b(receiving)9 b(meta)i(types)22
b Fq(:)e(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(30)233 2338 y(3.7.4)50 b(receiving)9 b(operators,)i(constants,)f
(and)g(identi\256ers)33 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(30)233
2388 y(3.7.5)50 b(receiving)9 b(expressions)39 b Fq(:)21
b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(31)137 2438 y(3.8)44 b(Sending)9 b(and)i(Receiving)e(Annotations)
27 b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(33)137 2487 y(3.9)44 b(Sending)9 b(and)i(Receiving)e(V)-5
b(ectors)11 b(of)f(numeric)g(data)31 b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(35)965 2754 y(3)p eop
%%Page: 4 5
4 4 bop 75 121 a Fw(4)41 b(Advanced)11 b(T)l(opics)1394
b(40)137 171 y Fv(4.1)44 b(Customizing)8 b(an)j(MP)f(Environment)35
b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(40)233 221 y(4.1.1)50 b(Getting)8 b(and)j(setting)e(environment)g
(options)18 b Fq(:)i(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(40)233 271
y(4.1.2)50 b(Adding)8 b(user)o(-supplied)i(transport)f(devices)i(to)e
(an)i(environment)k Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)57 b Fv(41)233 321 y(4.1.3)50 b(Adding)8 b(user)o(-supplied)
i(arbitrary)f(precision)h(integer)f(and)i(real)f(packages)i(to)d(an)i
(environment)49 b(42)137 370 y(4.2)44 b(Setting)9 b(Link)h(Options)19
b Fq(:)h(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)57 b Fv(43)233 420 y(4.2.1)50 b(Setting)9
b(a)h(link')n(s)f(send/receive)i(modes)38 b Fq(:)21 b(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)57 b Fv(43)233 470 y(4.2.2)50 b(Logging)9 b(a)h(session)34
b Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
57 b Fv(44)137 520 y(4.3)44 b(Prototypes)29 b Fq(:)20
b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(45)233 570 y(4.3.1)50
b(prototypes)8 b(and)j(meta)g(types)27 b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(46)233 619 y(4.3.2)50
b(prototypes)8 b(and)j(common)f(operators)25 b Fq(:)20
b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(47)233 669 y(4.3.3)50
b(prototypes)8 b(and)j(meta)g(operators)25 b Fq(:)20
b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(51)137
719 y(4.4)44 b(Buf)o(fer)10 b(Level)h(Routines)29 b Fq(:)21
b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
57 b Fv(57)137 769 y(4.5)44 b(Memory)10 b(Management)32
b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)57 b Fv(57)137 819 y(4.6)44 b(Error)10 b(Handling)18
b Fq(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(58)965 2754 y(4)p eop
%%Page: 5 6
5 5 bop 75 453 a Fr(List)26 b(of)f(T)-10 b(ables)137
669 y Fv(2.1)44 b(MP)10 b(environment)f(routines)41 b
Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
57 b Fv(12)137 719 y(2.2)44 b(MP)10 b(link)f(routines)24
b Fq(:)d(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)57 b Fv(14)137 769 y(2.3)44 b(Ar)o(guments)10
b(to)g Fs(MP)p 522 769 13 2 v 14 w(OpenLink\(\))i Fq(:)20
b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(14)137 860 y(3.1)44 b(MP)10 b(-)g(C)g(data)h(types)37
b Fq(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)57 b Fv(19)137 910 y(3.2)44 b(MP)10 b(annotation)f
(\257ag)h(values)32 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)57 b Fv(21)137 960 y(3.3)44 b(Dictionary)9
b(tags)17 b Fq(:)j(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(21)137 1010 y(3.4)44
b(Existing)9 b(Preliminary)g(MP)h(dictionaries)40 b Fq(:)20
b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(21)137
1059 y(3.5)44 b(Completing)8 b(the)i(message)28 b Fq(:)20
b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(23)137 1109 y(3.6)44 b(Routines)9 b(for)h(preparing)f(to)h
(receive)h(a)g(message)29 b Fq(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(23)137 1159 y(3.7)44 b(Numeric)10 b(put)g(routines)15
b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)57 b Fv(25)137 1209 y(3.8)44 b(Byte-based)10
b(put)f(routines)39 b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(25)137 1259 y(3.9)44
b(Meta)10 b(type/operator)f(put)h(routines)37 b Fq(:)20
b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(26)137 1309 y(3.10)23 b(Operator)n(,)10 b(constant,)g(and)h
(identi\256er)e(put)h(routines)34 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(26)137 1358 y(3.11)23 b(Node)10 b(header)h(put)e(routine)31
b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)57 b Fv(27)137 1408 y(3.12)23 b(Macros)11 b(for)e(setting)g(node)i
(packet)f(\256elds)j Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
57 b Fv(28)137 1458 y(3.13)23 b(Numeric)10 b(get)g(routines)18
b Fq(:)i(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)57 b Fv(29)137 1508 y(3.14)23 b(Byte-based)10
b(get)g(routines)41 b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(29)137 1558 y(3.15)23
b(Meta)10 b(type)g(get)g(routines)28 b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(30)137
1607 y(3.16)23 b(Operator)n(,)10 b(constant,)g(and)h(identi\256er)e
(get)h(routines)37 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(30)137 1657 y(3.17)23 b(Node)10 b(header)h(get)f(routines)17
b Fq(:)j(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)57 b Fv(31)137 1707 y(3.18)23 b(Macros)11 b(for)e(getting)g(node)h
(packet)h(\256elds)41 b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
57 b Fv(33)137 1757 y(3.19)23 b(Annotation)8 b(put)h(and)i(get)f
(routines)36 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)57 b Fv(33)137 1807 y(3.20)23 b(Macros)11 b(for)e(setting/clearing)g
(annotation)f(\257ags)33 b Fq(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(34)137 1856 y(3.21)23 b(Macros)11 b(for)e(determining)g
(annotation)g(\257ag)i(settings)30 b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(34)137 1906 y(3.22)23 b(Macros)11 b(for)e(setting/getting)e
(annotation)i(packet)i(\256elds)17 b Fq(:)k(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(35)137 1956 y(3.23)23 b(V)-5 b(ector)10 b(routines)19
b Fq(:)h(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(38)137 2006 y(3.24)23
b(V)-5 b(ector)10 b(element)h(types)21 b Fq(:)f(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b
Fv(39)137 2097 y(4.1)44 b(MP)10 b(environment)f(option)g(routines)21
b Fq(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(40)137 2147 y(4.2)44 b(MP)10 b(environment)f(options)20
b Fq(:)g(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)57 b Fv(41)137 2197 y(4.3)44 b(MP)10 b(environment)f(transport)g
(routines)j Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(41)137 2247 y(4.4)44 b(MP)10 b(environment)f(routine)g(to)h(add)g
(an)h(arbitrary)e(precision)h(integer)f(and)i(real)f(package)38
b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(42)137 2297
y(4.5)44 b(MP)10 b(link)f(option)g(routines)37 b Fq(:)20
b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(43)137 2346 y(4.6)44 b(MP)10 b(link)f(options)35
b Fq(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)g(:)h(:)f(:)g(:)57 b Fv(44)137 2396 y(4.7)44 b(Annotation)8
b(\257ags)j(in)e(log)h(entries)27 b Fq(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(46)137 2446 y(4.8)44
b(MP-de\256ned)10 b(meta)h(types)16 b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(49)137
2496 y(4.9)44 b(Buf)o(fer)10 b(level)g(routines)25 b
Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)57 b Fv(57)137 2546 y(4.10)23 b(Memory)10
b(routines)16 b Fq(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(58)137 2595
y(4.11)23 b(Error)10 b(handling)e(routines)13 b Fq(:)21
b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
57 b Fv(58)965 2754 y(5)p eop
%%Page: 6 7
6 6 bop 137 121 a Fv(4.12)23 b(MP)10 b(error)g(codes)17
b Fq(:)j(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(59)965 2754 y(6)p eop
%%Page: 7 8
7 7 bop 75 453 a Fr(List)26 b(of)f(Figur)n(es)137 674
y Fv(1.1)44 b(Sample)11 b(expression)24 b Fq(:)c(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)78
b Fv(9)137 723 y(1.2)44 b(MP)10 b(implementation)f(layers)26
b Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
57 b Fv(10)137 815 y(2.1)44 b(Link)10 b(connection)f(or)o(ganization)41
b Fq(:)21 b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(13)137 906 y(3.1)44 b(MP)10 b(T)o(ree)31 b Fq(:)21
b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(22)137 956 y(3.2)44
b(Synchronizing)8 b(sending)i(and)g(receiving)g(messages)39
b Fq(:)20 b(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(37)137 1047 y(4.1)44
b(Sample)11 b(logging)d(output)21 b Fq(:)g(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(45)137
1097 y(4.2)44 b(MP)10 b(T)o(ree)h(for)f(an)g(array)h(of)f(1000)f(MP)p
792 1097 13 2 v 15 w(Real32)h(numbers)43 b Fq(:)20 b(:)g(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(46)137 1147 y(4.3)44 b(Prototyped)8 b(MP)j(T)o(ree)g(for)e(an)i
(array)g(of)f(1000)f(IMP)p 999 1147 V 15 w(Real32)h(numbers)29
b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(47)137 1197 y(4.4)44 b(Code)10 b(fragment)g(for)g(putting)e(a)j
(prototyped)d(array)i(of)g(IMP)p 1113 1197 V 15 w(Real32')n(s)40
b Fq(:)21 b(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(48)137 1246 y(4.5)44 b(Prototyped)8 b(MP)j(T)o(ree)g(for)e(a)i
(sparse)g(matrix)34 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(50)137 1296 y(4.6)44 b(Prototyped)8 b(MP)j(T)o(ree)g(for)e(an)i
(array)g(of)f(integers)f(using)h(the)g(union)f(operator)32
b Fq(:)20 b(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(50)137 1346 y(4.7)44 b(Prototyped)8 b(and)j(unprototyped)c(MP)k
(trees)f(for)g(a)h(matrix)f(as)h(an)f(array)h(of)f(even-length)f
(arrays)32 b Fq(:)21 b(:)f(:)g(:)57 b Fv(52)137 1396
y(4.8)44 b(Prototyped)8 b(and)j(unprototyped)c(MP)k(T)o(rees)g(for)f
(an)g(array)h(of)f(uneven-length)f(arrays)41 b Fq(:)21
b(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(52)137 1446 y(4.9)44
b(Prototyped)8 b(MP)j(tree)f(for)g(an)h(array)f(of)g(structures)g
(containing)f(pointers)35 b Fq(:)20 b(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)g(:)h(:)f(:)g(:)57 b Fv(53)137 1495 y(4.10)23 b(Prototyped)8
b(MP)j(T)o(ree)g(for)e(a)i(recursive)g(structure)h Fq(:)21
b(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(54)137 1545 y(4.11)23
b(Protoyped)9 b(MP)h(T)o(ree)h(for)f(a)h(sparse)g(recursive)f
(polynomial)27 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57 b Fv(55)137 1595 y(4.12)23
b(Sending)9 b(the)h(polynomial)f(3)p Fq(x)685 1580 y
Fp(4)701 1595 y Fq(y)i Fo(+)e Fq(x)797 1580 y Fp(2)824
1595 y Fv(using)g(the)i(MP)f(API)28 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)57
b Fv(56)137 1645 y(4.13)23 b(Prototyped)8 b(MP)j(T)o(ree)g(for)e(an)i
(ideal)26 b Fq(:)20 b(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)g(:)h(:)f(:)g(:)
57 b Fv(57)965 2754 y(7)p eop
%%Page: 8 9
8 8 bop 75 433 a Fn(Chapter)20 b(1)75 640 y Fr(Intr)n(oduction)75
856 y Fv(This)12 b(document)f(describes)h(libMP)-5 b(,)11
b(a)i(library)d(of)h(C)h(routines)e(implementing)h(an)h(Application)d
(Programmer)k(Interface)75 906 y(\(API\))8 b(for)g(the)h(Multi)e
(Protocol)g(\(MP\))h(speci\256cation.)15 b(This)9 b(chapter)f(gives)h
(an)g(overview)f(of)g(MP)-5 b(.)10 b(The)f(basics)g(of)f(creating)75
956 y(a)i(connection)f(between)i(independent)d(packages)j(are)g
(covered)f(in)g(chapter)g(2)f(and)h(the)g(basics)g(of)g(sending)f(and)h
(receiving)75 1006 y(data)h(as)f(MP)h(T)o(rees)g(are)g(presented)f(in)g
(chapter)h(3.)k(Advanced)10 b(topics)g(are)h(discussed)g(in)e(chapter)i
(4.)75 1145 y Fm(1.1)58 b(Motivation)16 b(and)f(Overview)75
1238 y Fv(There)d(is)e(a)h(growing)e(body)h(of)g(mathematical)i
(software)e(tools)g(to)g(aid)g(scientists)g(and)h(engineers)g(in)f
(\256nding)f(solution\(s\))75 1288 y(to)i(problems.)21
b(These)13 b(tools)e(may)i(be)f(general)g(purpose)g(such)g(as)h(Maple)f
(and)h(Mathematica)f(for)g(computer)g(algebra)g(or)75
1338 y(specialized)c(such)g(as)h(Camal)f(for)g(general)g(relativity)e
(and)i(Singular)e(for)i(commutative)f(algebra)i(and)e(albegraic)i
(geometry)m(.)75 1387 y(For)g(the)h(most)f(part,)h(these)g(tools)f(are)
h(standalone)f(and)h(of)o(fer)g(little)d(support)i(for)g(interaction)f
(with)h(other)g(tools.)k(Problem-)75 1437 y(solving,)7
b(however)n(,)h(frequently)e(requires)h(the)g(services)h(of)f(tools)f
(with)h(dif)o(ferent)f(areas)j(of)e(expertise.)14 b(The)8
b(Multi)d(Protocol)75 1487 y(\(MP\))11 b(is)h(intended)e(to)h(support)f
(the)i(ef)o(\256cient)g(exchange)g(of)f(\252scienti\256c\272)i(data)f
(in)f(a)h(system)g(that)f(provides)f(interactions)75
1537 y(among)g(a)h(collection)e(of)h(scienti\256c)g(tools)f(whose)i
(data)f(needs)h(are)g(diverse:)j(symbolic,)c(numeric,)h(and)f
(character)o(-based.)122 1587 y(The)i(Multi)d(Project)i(at)g(Kent)g
(State)g(is)g(part)f(of)h(an)g(ongoing)e(research)k(ef)o(fort)d(into)g
(the)h(integration)e(of)h(software)h(tools)75 1636 y(for)h
(scienti\256c)g(computing.)21 b(Three)13 b(dimensions)f(of)g(the)g
(problem)g(of)g(tool)g(integration)e(are)j(readily)f(identi\256able:)18
b(data)75 1686 y(integration,)7 b(control)f(integration,)h(and)h(user)g
(interface)g(integration)e([10)o(,)i(11].)14 b(Data)8
b(integration)e(involves)h(the)g(exchange)75 1736 y(of)13
b(data)h(between)g(separate)g(tools,)g(including)d(the)i(de\256nition)f
(of)h(a)h(mechanism)h(allowing)c(the)j(tools)e(to)h(agree)h(on)f(the)75
1786 y(format)g(and)g(meaning)g(of)g(the)g(transmitted)f(data.)23
b(Control)11 b(integration)g(concerns)j(the)f(establishment,)h
(management,)75 1836 y(and)g(coordination)d(of)i(inter)o(-tool)f
(communications.)24 b(Finally)m(,)14 b(the)g(aim)f(of)h(user)f
(interface)h(integration)e(is)h(to)g(provide)75 1885
y(the)g(user)g(with)g(a)g(logical)f(and)i(consistent)e(style)h(of)g
(interaction)e(with)h(the)h(entire)g(system.)25 b(A)13
b(key)g(philosophy)e(of)i(our)75 1935 y(project)f(has)g(been)h(to)f
(view)g(the)g(dimensions)g(of)g(tool)f(integration)f(as)j
Fu(individual)d Fv(problems)i(to)f(be)i(solved)f Fu(separately)p
Fv(,)75 1985 y(recognizing)c(that)h(each)h(of)f(these)g(problems)g(may)
h(have)g(several)f(solutions.)k(The)d(focus)f(of)g(our)g(\256rst)f(ef)o
(forts)h(has)h(been)f(on)75 2035 y(data)i(integration)e(and)h(has)i
(produced)e(the)h(Multi)e(Protocol,)h(a)h(speci\256cation)g(for)f
(encoding)g(mathematical)h(expressions)75 2085 y(for)h(ef)o(\256cient)g
(communication)g(among)g(scienti\256c)g(computing)f(systems.)22
b(A)12 b(library)f(of)h(C)f(routines)g(based)i(on)f(the)g(MP)75
2135 y(speci\256cation)e(has)h(been)g(implemented)f(and)g(is)g
(described)h(here.)122 2184 y(The)f(major)e(design)g(and)h
(implementation)f(decisions)g(made)i(in)e(MP)h(are)g(given)f(in)g([6])g
(and)h([8])f(\(respectively)h(versions)75 2234 y(0.5)g(and)h(1.0\).)15
b(MP)9 b(de\256nes)h(a)g(set)g(of)f(basic)h(types)f(and)g(a)h
(mechanism)h(for)e(constructing)e(structured)i(data.)15
b(Numeric)10 b(data)75 2284 y(\(\256xed)i(and)g(arbitrary)f(precision)g
(\257oats)h(and)g(integers\))f(are)i(transmitted)d(in)i(a)g(binary)f
(format)h(\(2')n(s)f(complement,)i(IEEE)75 2334 y(\257oat,)d(etc.\).)15
b(Expressions)9 b(are)h(represented)f(as)h(linearized,)g(annotated)e
(parse)i(trees)g(\(MP)f(T)o(rees\))g(and)h(are)f(transmitted)f(as)75
2384 y(a)k(sequence)h(of)e Fu(node)g Fv(and)g Fu(annotation)e(packets)p
Fv(,)k(where)f(each)g(node)f(packet)h(transmits)f(a)h(node)f(from)h
(the)f(expression')n(s)75 2433 y(parse)d(tree.)15 b(The)8
b(node)f(packet)h(has)g(\256elds)g(giving)e(the)h Fu(type)h
Fv(of)f(the)g(data)h(carried)g(in)f(the)g(packet,)i(the)e(number)h(of)f
(ar)o(guments)75 2483 y(\(for)12 b(operators\))f(that)h(follow)m(,)f
(the)h(number)h(of)e(annotations,)h(some)h(semantic)g(information,)e
(and)h(the)g(data.)21 b(Operators)75 2533 y(and)14 b(constants)f(which)
h(occur)g(frequently)f(have)h(an)g(optimized)f(encoding)h(and)g(are)g
(known)f(as)i(\252common\272.)27 b(V)-5 b(arious)75 2583
y(optimizations)10 b(are)j(supported)e(to)h(minimize)g(the)g(overhead)g
(incurred)g(by)g(the)g(node)g(packets,)h(allowing)e(the)h(sender)h(to)
965 2754 y(8)p eop
%%Page: 9 10
9 9 bop 75 121 a Fv(transmit)14 b(blocks)g(containing)f(\252raw\272)j
(\(untyped\))d(data.)28 b(A)15 b(datum)g(sent)f(without)f(any)h(type)h
(information)d(attached)j(is)75 171 y(called)c(a)f Fl(data)h(limb)p
Fv(.)122 221 y(Annotations)16 b(ef)o(\256ciently)h(carry)h(additional)d
(information)h(which)h(is)g(either)g(supplementary)g(and)h(can)g(be)g
(safely)75 271 y(ignored)8 b(by)i(the)f(receiver)n(,)i(or)f(contains)f
(information)e(essential)j(to)f(the)g(proper)g(decoding)g(of)g(the)h
(data.)15 b(Each)c(annotation)75 321 y(carries)g(a)g(set)f(of)g
(\257ags)h(which)f(tell)f(the)h(receiver)h(whether)g(it)e(can)i(safely)
g(ignore)e(the)h(annotation')n(s)e(content)i(or)g(not.)122
370 y(In)15 b(a)h(layer)g(above)f(the)g(data)h(exchange)g(portion)d(of)
i(the)h(protocol,)f(MP)g(supports)g(collections)f(of)h(de\256nitions)f
(for)75 420 y(annotations)i(and)i(mathematical)h(symbols)e(\(operators)
g(and)h(symbolic)f(constants\))g(in)h Fl(dictionaries)p
Fv(.)36 b(Dictionaries)75 470 y(address)13 b(the)f(problem)g(of)g
(application)f(heterogeneity)g(by)h(supplying)e(a)j(standardized)f
(representation)g(and)g(semantics)75 520 y(for)i(mathematical)h
(objects.)27 b(They)15 b(are)g(identi\256ed)e(within)g(packets)i
(through)e(a)h(dictionary)f(tag)h(\256eld.)28 b(Applications)75
570 y(that)11 b(communicate)h(according)f(to)g(de\256nitions)f
(provided)h(in)f(dictionaries)h(do)g(not)g(need)h(to)e(have)i(direct)g
(knowledge)e(of)75 619 y(each)15 b(other)n(,)h(promoting)c(a)j
(\252plug-and-play\272)e(style)h(of)g(interoperation)e(at)j(the)f
Fu(application)d Fv(level.)27 b(A)15 b(dictionary)e(for)75
669 y(polynomials)c(has)h(been)h(built)d(on)i(top)f(of)h(MP)g(in)g
(this)f(manner)i([1].)k(Another)n(,)10 b(more)g(general,)h(library)e
(for)h(manipulating)75 719 y(MP)g(T)o(rees)h(is)g(also)f(available)g
([2].)122 769 y(Figure)e(1.1)g(illustrates)e(the)i(correspondence)g
(between)h(an)f(expression)f(to)h(be)g(communicated)g(and)g(its)f
(abstract)i(syntax)75 819 y(tree)i(\(subscripted)e(material)h
(represents)h(an)g(annotation\).)237 1396 y @beginspecial
64 @llx 416 @lly 497 @urx 568 @ury 3543 @rwi @setspecial
%%BeginDocument: expr.id

/arrowHeight 10 def
/arrowWidth 5 def

/IdrawDict 53 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def
/Helvetica-Oblique reencodeISO def
/Times-Roman reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l b translate w h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def




Begin
[ 0.799087 0 0 0.799087 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 379 588 ] concat
[
(a)
] Text
End

Begin %I Pict
[ 1 0 0 1 -61 24 ] concat

Begin %I Text
0 0 0 SetCFg
Helvetica-Oblique 14 SetF
[ 1 0 0 1 162 683 ] concat
[
(a\(x2 - x1\))
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Oblique 14 SetF
[ 1 0 0 1 167 664 ] concat
[
(x2 - x1)
] Text
End

Begin %I Text
0 0 0 SetCFg
Times-Roman 12 SetF
[ 1 0 0 1 240 658 ] concat
[
(\(comment   gradient\))
] Text
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 -17 230 ] concat
175 438 244 438 Line
End

Begin %I Pict
[ 1 0 0 1 0 2 ] concat

Begin %I Text
0 0 0 SetCFg
Times-Roman 24 SetF
[ 1 0 0 1 143 676 ] concat
[
(\()
] Text
End

Begin %I Text
0 0 0 SetCFg
Times-Roman 24 SetF
[ 1 0 0 1 235 676 ] concat
[
(\))
] Text
End

End %I eop

End %I eop

Begin %I Text
0 0 0 SetCFg
Helvetica 18 SetF
[ 1 0 0 1 499 707 ] concat
[
(/)
] Text
End

Begin %I Pict
[ 1 0 0 1 -24 -30 ] concat

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 487 619 ] concat
[
(-)
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 524 565 ] concat
[
(x1)
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 440 566 ] concat
[
(x2)
] Text
End

Begin %I Pict
[ 1 0 0 1 -22 -77 ] concat

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 0 -0 -1 -25 1092 ] concat
546 406 577 444 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 -74 242 ] concat
546 406 577 444 Line
End

End %I eop

End %I eop

Begin %I Pict
[ 1 0 0 1 83 21 ] concat

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 487 619 ] concat
[
(-)
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 524 565 ] concat
[
(x1)
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 440 566 ] concat
[
(x2)
] Text
End

Begin %I Pict
[ 1 0 0 1 -22 -77 ] concat

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 0 -0 -1 -25 1092 ] concat
546 406 577 444 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 -74 242 ] concat
546 406 577 444 Line
End

End %I eop

End %I eop

Begin %I Pict
[ 1 0 0 1 -25 -7 ] concat

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 451 645 ] concat
[
(*)
] Text
End

Begin %I Pict
[ 1 0 0 1 -60 -49 ] concat

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 0 -0 -1 -25 1092 ] concat
546 406 577 444 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 -74 242 ] concat
546 406 577 444 Line
End

End %I eop

End %I eop

Begin %I Pict
[ 1 0 0 1 322 160 ] concat

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 -17 231 ] concat
125 253 186 297 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 0 -0 -1 61 781 ] concat
125 253 186 297 Line
End

End %I eop

Begin %I Text
0 0 0 SetCFg
Times-Roman 12 SetF
[ 1 0 0 1 509 697 ] concat
[
(\(comment   gradient\))
] Text
End

End %I eop

showpage


end
%%EndDocument
 @endspecial 720 1487 a(Figure)f(1.1:)k(Sample)d(expression)75
1677 y Fm(1.2)58 b(Communication)17 b(Between)d(Applications)75
1769 y Fv(It)c(is)h(not)f(possible)g(to)g(anticipate)h(all)f(the)h
(scenarios)h(in)e(which)g(someone)i(might)e(want)g(to)h(transmit)f
(mathematical)h(data,)75 1819 y(so)e(the)f(implementation)f(of)i(MP)f
(is)h(independent)e(of)i(the)f(underlying)f(communication)h(mechanism)h
(\(referred)g(to)f(here)h(as)75 1869 y(a)i(\252device\272\))i(used)e
(to)f(transmit)g(data)h(between)h(applications.)k(Instead,)11
b(MP)g(data)g(is)g(written)f(to)g(and)h(read)g(from)g(buf)o(fers)75
1919 y(attached)h(to)e(a)i Fl(link)p Fv(.)17 b(A)11 b(link)f(is)i
(created)g(within)d(an)j Fl(environment)e Fv(that)h(de\256nes)h(and)f
(provides)f(the)h(resources)i(to)d(a)i(link,)75 1969
y(including)h(interfaces)i(to)f(the)g(supported)f(transport)h(devices.)
28 b(Data)15 b(is)g(moved)f(between)h(MP)g(buf)o(fer)o(-space)h(and)e
(the)75 2018 y(transport)d(device)j(through)d(routines)g(provided)h(by)
g(an)h(abstract)g(device)g(interface.)23 b(This)13 b(approach)g
(provides)f(a)h(great)75 2068 y(deal)f(of)g(\257exibility)m(,)f
(allowing)f(researchers)k(to)e(provide)f(the)g(kind)g(of)h
(communication)g(most)f(appropriate)h(for)f(the)h(task)75
2118 y(at)e(hand)g(and)g(also)g(allowing)e(new)i(communication)g
(packages)h(to)e(be)h(adopted)g(with)f(minimum)g(ef)o(fort.)15
b(Currently)8 b(there)75 2168 y(is)i(support)e(for)i(communication)f
(using)h(\256les,)g(TCP)h(sockets,)f(T)m(oolBus)g([4)o(])g(\(a)g
(software)h(bus)e(package\),)j(and)e(PVM)g([12)o(])75
2218 y(\(a)g(package)h(for)e(parallel)h(distributed)d(computation\).)14
b(Users)c(can)g(write)g(their)e(own)i(device)g(interfaces)g(to)f
(support)g(other)75 2267 y(transports)g(which)h(can)g(be)h(added)f(to)g
(an)g(environment)f(and)h(then)g(used)g(to)g(open)g(a)g(link.)k(It)c
(is)g(also)g(possible)f(to)h(send)g(and)75 2317 y(receive)h(MP)g
(encoded)f(expressions)g(using)g(MIME)g([5].)75 2457
y Fm(1.3)58 b(The)14 b(Structur)o(e)i(of)e(libMP)75 2550
y Fv(The)9 b(MP)g(library)m(,)g(libMP)-5 b(,)8 b(is)h(implemented)f(in)
h(a)g(layered)g(fashion)f(as)h(shown)g(in)f(\256gure)h(1.2.)14
b(The)c(highest)d(level)i(provides)75 2599 y(routines)f(for)h(sending)f
(and)i(receiving)e(data)i(in)f Fu(packets)p Fv(.)15 b(The)10
b(level)f(below)g(that)g(provides)f(routines)g(for)h(communicating)965
2754 y(9)p eop
%%Page: 10 11
10 10 bop 75 121 a Fu(data)13 b(limbs)p Fv(,)i(i.e.)28
b(data)15 b(that)e(has)i(no)f(extra)h(overhead)f(and)h(which)f(can)h
(be)f(used)h(to)f(construct)f(and)i(send)f(\(or)g(receive)75
171 y(and)d(deconstruct\))e(objects)i(in)e(a)j(piecemeal)f(fashion)f
(\(that)g(is,)h(the)f(packet)h(header)g(and)g(packet)g(body)e(can)j(be)
e(processed)75 221 y(separately\).)17 b(This)10 b(is)h(especially)f
(useful)g(on)h(the)f(receiving)g(side)h(when)g(the)f(type)g(of)h(the)f
(incoming)g(packet)h(may)g(not)f(be)75 271 y(known)i(in)h(advance)h
(and)f(it)f(is)h(necessary)h(to)f(retrieve)g(the)g(packet)g(header)h
(independently)d(of)i(the)g(packet)g(body)m(.)23 b(The)75
321 y(buf)o(fering)12 b(level)g(knows)g(nothing)f(about)h(packets)i(or)
e(annotated)g(trees.)23 b(It)13 b(simply)f(provides)f(a)j(buf)o(fer)e
(where)i(packets)75 370 y(can)d(be)g(written)e(\(sending)h(side\))g
(and)g(read)h(\(receiving)f(side\),)h(routines)e(to)h(put/get)f(basic)h
(data)h(elements,)h(and)e(access)j(to)75 420 y(an)e(underlying)d
(device)j(for)e(transmitting)f(the)i(data)h(\(the)f(device)h(level\).)p
343 522 1265 2 v 342 572 2 50 v 371 557 a(Packet)g(level)p
600 572 V 294 w Fs(MP)p 919 557 13 2 v 15 w(Put)p Fq(<)p
Fl(type)p Fq(>)p Fs(Packet\(\))p 1606 572 2 50 v 342
622 V 600 622 V 867 607 a(MP)p 919 607 13 2 v 15 w(Get)p
Fq(<)p Fl(type)p Fq(>)p Fs(Packet\(\))p 1606 622 2 50
v 343 623 1265 2 v 342 673 2 50 v 387 658 a Fv(Data)g(level)p
600 673 V 383 w Fs(IMP)p 1017 658 13 2 v 15 w(Put)p Fq(<)p
Fl(type)p Fq(>)p Fv(\(\))p 1606 673 2 50 v 342 723 V
600 723 V 940 708 a Fs(IMP)p 1017 708 13 2 v 15 w(Get)p
Fq(<)p Fl(type)p Fq(>)p Fv(\(\))p 1606 723 2 50 v 343
725 1265 2 v 342 775 2 50 v 387 760 a(Byte)f(level)p
600 775 V 205 w Fs(IMP)p 839 760 13 2 v 15 w(PutLong\(\))30
b(IMP)p 1184 760 V 15 w(PutBytes\(\))p 1606 775 2 50
v 342 824 V 600 824 V 762 809 a(IMP)p 839 809 13 2 v
15 w(GetLong\(\))g(IMP)p 1184 809 V 15 w(GetBytes\(\))p
1606 824 2 50 v 343 826 1265 2 v 342 876 2 50 v 373 861
a Fv(Buf)o(fer)10 b(level)p 600 876 V 319 w(Abstract)g(Device)h
(Interface)p 1606 876 V 342 926 V 600 926 V 686 911 a(-)f(-)g(-)g(-)h
(-)f(-)g(-)g(-)h(-)f(-)g(-)g(-)g(-)h(-)f(-)g(-)g(-)g(-)h(-)f(-)g(-)g(-)
g(-)h(-)f(-)g(-)g(-)g(-)h(-)f(-)g(-)g(-)g(-)h(-)f(-)p
1606 926 V 342 975 V 368 961 a(Device)h(level)p 600 975
V 49 w(data)g(delivery)e(mechanism)i(\(\256le,)g(socket,)g(T)m(oolBus,)
f(PVM,)g(...\))p 1606 975 V 343 977 1265 2 v 656 1051
a(Figure)g(1.2:)k(MP)d(implementation)e(layers)75 1282
y Fm(1.4)58 b(Conventions)75 1375 y Fv(W)n(ithin)9 b(this)g(document)h
(the)h Fs(typewriter)e Fv(font)g(is)h(used)h(for)f(code,)h(data)f
(types,)h(and)f(routines.)122 1424 y(W)n(ithin)f(the)h(code)h(the)f
(following)e(conventions)h(are)i(used:)137 1507 y Ft(\017)21
b Fv(all)10 b(MP-related)g(data)g(types)g(and)h(constants)f(begin)f
(with)g Fs(MP)p 1079 1507 13 2 v 137 1590 a Ft(\017)21
b Fv(subwords)9 b(are)i(distinguished)d(by)i(capitalizing)f(the)h
(\256rst)g(letter)g(of)g(the)g(subword)179 1640 y(Example:)36
b Fs(MP)p 426 1640 V 14 w(PutAnnotationPacket\(\))179
1690 y Fv(Example:)g Fs(MP)p 426 1690 V 14 w(Uint32Type)137
1773 y Ft(\017)21 b Fv(typedefs)10 b(for)g(static)g(types)g(end)g(in)p
700 1773 V 25 w Fs(t)179 1823 y Fv(Example:)36 b Fs(MP)p
426 1823 V 14 w(Link)p 540 1823 V 15 w(t)137 1906 y Ft(\017)21
b Fv(typedefs)10 b(for)g(pointer)f(types)h(end)g(in)p
730 1906 V 24 w Fs(pt)179 1956 y Fv(Example:)36 b Fs(MP)p
426 1956 V 14 w(Link)p 540 1956 V 15 w(pt)137 2039 y
Ft(\017)21 b Fv(top-level)9 b(MP)h(routines)f(and)i(node)f(packets)g
(for)g(an)h(MP)f(type)g(begin)g(with)f Fs(MP)p 1347 2039
V 179 2089 a Fv(Example:)36 b Fs(MP)p 426 2089 V 14 w
(PutSint32Packet\(\))179 2138 y Fv(Example:)g Fs(MP)p
426 2138 V 14 w(Sint32)137 2221 y Ft(\017)21 b Fv(middle-level)9
b(MP)h(routines)f(and)i(data)f(limbs)g(for)g(an)g(MP)h(typebegin)e
(with)g Fs(IMP)p 1380 2221 V 179 2271 a Fv(Example:)36
b Fs(IMP)p 451 2271 V 14 w(PutSint32\(\))179 2321 y Fv(Example:)g
Fs(IMP)p 451 2321 V 14 w(Sint32)137 2404 y Ft(\017)21
b Fv(several)11 b(of)f(the)g(MP)g(types)g(have)h(abbreviated)f(names:)
229 2463 y Fw(\261)20 b Fs(Cmt)10 b Fv(\261)g(Common)g(Meta)h(T)m(ype)
229 2526 y Fw(\261)20 b Fs(Cop)10 b Fv(\261)g(Common)g(Operator)229
2590 y Fw(\261)20 b Fs(Mop)10 b Fv(\261)g(Meta)h(Operator)954
2754 y(10)p eop
%%Page: 11 12
11 11 bop 229 121 a Fw(\261)20 b Fs(Cmop)10 b Fv(\261)g(Common)g(Meta)h
(Operator)137 254 y Ft(\017)21 b Fv(A)12 b(C)f(de\256ne)h(that)f
(identi\256es)g(the)h(de\256nition)e(of)h(symbolic)g(constants,)h
(operators,)g(annotations,)f(meta)i(types)e(and)179 304
y(meta)d(operators)e(given)h(in)f(a)i(dictionary)d(use)i(the)g
(following)e(convention:)11 b(MP)p 1328 304 13 2 v 15
w Fq(<)p Fv(type)p Fq(><)p Fv(dictionary)p Fq(><)p Fv(value)p
Fq(>)p Fv(.)179 354 y(For)e(example,)i Fs(MP_CmtProtoIMP_Sint32)d
Fv(speci\256es)j(the)e(Common)h(Meta)g(T)m(ype)g(\(Cmt\))f
(de\256nition)f(given)179 404 y(in)h(the)i(prototype)d(dictionary)h
(\(Proto\))g(for)h(a)g(signed)g(32-bit)f(integer)g(data)i(limb)e(\(IMP)
p 1456 404 V 15 w(Sint32\).)137 487 y Ft(\017)21 b Fv(The)13
b(values)f(for)g Fs(MP_Success)f Fv(and)i Fs(MP_Failure)e
Fv(are)i(consistent)f(with)f(C')n(s)h(encoding)f(of)h(true)g(and)g
(false,)179 536 y(allowing)c(the)j(programmer)f(to)g(test)g(for)g
(success/failure)g(in)g(the)g(usual)g(manner)n(.)16 b(For)10
b(example,)179 604 y Fs(if)24 b(\(!MP_PutSint32Packet\(link,)f(n,)i
(0\)\))229 654 y(MP_PrintError\(link\);)122 737 y Fv(Portions)9
b(of)g(the)h(MP)g(API)g(are)h(actually)f(macros)h(containing)d(calls)i
(to)g(functions.)j(These)f(macros)f(are)g(de\256ned)f(in)f(the)75
787 y(relevant)h(header)h(\256les.)75 926 y Fm(1.5)58
b(Reporting)15 b(Results)75 1019 y Fv(As)7 b(the)g(library)g(and)g(the)
g(proto)o(col)g(are)g(stil)o(l)g(experimental)o(,)e(we)i(would)g
(greatly)g(appreciate)g(learning)g(of)g(your)g(exp)o(eriences:)75
1069 y(how)k(you)f(used)h(the)g(library)m(,)f(what)h(you)f(found)g
(worthwhile,)g(what)g(you)h(had)g(to)f(change,)i(any)f(bugs)g(you)f
(found.)16 b(Please)75 1119 y(send)10 b(bug)g(reports,)g(inquiries,)f
(and)i(experiences)g(to)e Fs(mp@mcs.kent.edu)p Fv(.)122
1168 y(When)h(reporting)d(bugs,)j(please)g(supply)e(as)i(much)g
(information)e(as)i(possible,)f(including)e(the)i(architecture,)h
(operating)75 1218 y(system,)j(and)f(compiler)f(used,)i(output)c(from)j
(the)g(MP)f(log)g(\256le,)i(and)e(any)h(other)f(useful)h(information)d
(you)i(can)i(think)d(of.)75 1268 y(In)g(cases)i(like)e(this,)f(more)i
(detail)f(is)g(better)g(than)f(less.)122 1318 y(If)k(you)f(use)h(MP)g
(as)h(part)e(of)h(a)g(signi\256cant)f(project)g(and/or)g(publish)f(a)j
(result)e(that)g(was)i(partly)d(obtained)h(using)g(MP)-5
b(,)75 1368 y(please)8 b(cite)g(MP)-5 b(.)8 b(W)m(e)g(would)f(greatly)g
(appreciate)h(it)f(if)g(you)g(could)f(inform)h(us)h(about)e(such)i(a)g
(project)f(or)g(paper)n(.)15 b(Updates)7 b(on)75 1418
y(MP)j(are)h(available)g(from)f Fs(http://SymbolicNet.mcs.kent.edu/are)
o(as/protocol)o(s/mp.html)p Fv(.)954 2754 y(11)p eop
%%Page: 12 13
12 12 bop 75 433 a Fn(Chapter)20 b(2)75 640 y Fr(Making)25
b(a)h(Connection)75 861 y Fv(A)12 b Fu(link)e Fv(is)i(simply)e(an)i
(endpoint)e(for)h(communication.)18 b(It)11 b(may)h(be)f(connected)h
(to)f(a)h(\256le)g(\(unidirectional)d(data)i(transfer\))75
911 y(or)f(to)f(links)g(in)h(other)g(applications)e(\(bidirectional)g
(data)j(transfer\).)k(The)c(steps)f(to)f(send/receive)i(MP)f(data)h
(via)f(a)g(link)f(are)127 983 y(1.)21 b(Initialize)9
b(an)h(MP)h(environment)e(\()p Fs(MP)p 743 983 13 2 v
14 w(InitializeEnv\(\))p Fv(\))127 1061 y(2.)21 b(Open)10
b(a)h(link)e(for)h(sending/receiving)e(data)j(\()p Fs(MP)p
893 1061 V 14 w(OpenLink\(\))p Fv(\))127 1138 y(3.)21
b(Process)11 b(data)g(\(e.g.,)g(make)g(requests/receive)g(results)f
(\(sender/client\))f(\261)h(handle)g(requests)h(\(receiver/server\))f
(\))127 1216 y(4.)21 b(Close)10 b(the)g(link)f(\()p Fs(MP)p
486 1216 V 14 w(CloseLink\(\))p Fv(\))127 1293 y(5.)21
b(Release)11 b(the)f(environment)g(\()p Fs(MP)p 666 1293
V 14 w(ReleaseEnv\(\))p Fv(\))75 1431 y Fm(2.1)58 b(The)14
b(MP)g(Envir)o(onment)75 1523 y Fv(The)h(MP)g(environment)e(maintains)i
(a)g(set)f(of)h(resources)g(to)f(be)h(shared)g(by)f(a)h(collection)f
(of)g(links)f(created)j(within)d(an)75 1573 y(application.)g(T)m
(ypically)8 b(an)h(application)e(will)g(need)i(only)f(a)h(single)f
(environment.)13 b(Multiple)7 b(environments)h(would)f(only)75
1623 y(be)13 b(necessary)h(if)e(an)g(application)f(needs)i(to)f
(support)f(links)h(that)f(have)i(dif)o(ferent)f(buf)o(fering)f
(requirements)i(or)f(dif)o(ferent)75 1673 y(arbitrary)d(precision)h
(number)g(formats)g(\(see)h(chapter)g(4)f(on)g(advanced)h(topics\).)p
75 1740 1793 2 v 75 1961 2 221 v 102 1808 a Fk(MP_Env_pt)26
b(MP_Allocat)q(eE)q(nv)g(\(void\))102 1863 y(MP_Env_pt)g(MP_Initial)q
(iz)q(eE)q(nv)g(\(MP_Env_p)q(t)f(env\))102 1918 y(void)136
b(MP_Release)q(En)q(v)26 b(\(MP_Env_pt)g(env\))p 1866
1961 V 75 1963 1793 2 v 673 2046 a Fv(T)m(able)11 b(2.1:)j(MP)c
(environment)g(routines)122 2132 y(An)g(environment)f(may)h(be)g
(allocated)g(in)f(two)g(ways.)15 b(First,)10 b(through)e(a)i(call)g(to)
f Fs(MP_AllocateEnv\(\))p Fv(.)14 b(If)9 b(the)h(call)75
2181 y(fails,)15 b(NULL)h(is)e(returned,)h(otherwise)f(a)h(pointer)e
(to)h(a)h(partially)e(initialized)g(environment)g(structure)h(\()p
Fs(MP)p 1709 2181 13 2 v 15 w(Env)p 1799 2181 V 14 w(pt)p
Fv(\))75 2231 y(is)k(returned.)40 b(Environment)18 b(options)f(may)i
(be)g(reset)h(at)e(this)g(point)f(\(see)j(section)e(4.1)h(for)f(more)h
(details\).)40 b(This)75 2281 y(must)16 b(be)g(followed)f(by)h(a)g
(call)g(to)g Fs(MP_InitializeEnv\(\))e Fv(to)i(complete)g(the)g
(initialization.)29 b(If)16 b(the)g(ar)o(gument)75 2331
y(to)8 b Fs(MP_InitializeEnv\(\))e Fv(is)i(NULL,)i(an)e(environment)g
(will)f(be)h(allocated)g Fu(and)g Fv(completely)g(initialized.)13
b(Alterna-)75 2381 y(tively)m(,)c(if)f(the)h(ar)o(gument)g(is)f(not)g
(NULL,)j(it)d(is)g(assumed)i(that)f(the)f(ar)o(gument)h(was)h
(previously)d(allocated)i(through)e(a)j(call)f(to)75
2431 y Fs(MP_AllocateEnv\(\))p Fv(.)16 b(In)10 b(either)h(case,)i(the)e
(routine)e(returns)i(a)g(pointer)f(to)g(a)i(completely)e(initialized)f
(environment)75 2480 y(structure)h(on)h(success,)i(and)e(NULL)h(on)f
(failure.)17 b(If)10 b(enabled,)i(a)g(log)e(\256le)h(will)f(be)h
(opened)g(as)h(part)f(of)f(the)h(creation)g(of)g(an)75
2530 y(environment.)19 b(Initially)m(,)10 b(the)i(log)f(will)g(contain)
g(information)f(about)h(the)h(environment')n(s)e(characteristics)j
(\(see)f(section)75 2580 y(4.2.2)k(for)e(more)i(information)e(on)h
(logging\).)28 b(An)15 b(environment)g(is)g(released)i(with)d
Fs(MP_ReleaseEnv\(\))p Fv(.)29 b(There)75 2630 y(should)9
b(be)i(no)f(further)f(activity)g(on)h(any)g(links)f(associated)i(with)e
(an)i(environment)e(that)h(has)g(been)h(released.)954
2754 y(12)p eop
%%Page: 13 14
13 13 bop 178 910 a @beginspecial 5 @llx 293 @lly 589
@urx 597 @ury 3826 @rwi @setspecial
%%BeginDocument: link-org.id

/arrowHeight 10 def
/arrowWidth 5 def

/IdrawDict 54 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def
/Helvetica-Oblique reencodeISO def
/Times-Roman reencodeISO def
/Helvetica-Bold reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l b translate w h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def




Begin
[ 0.799087 0 0 0.799087 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I Rect
2 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 0.984321 0 0 1.41414 -375.337 126.909 ] concat
393 216 710 313 Rect
End

Begin %I Pict
[ 1 0 0 1 -377 2 ] concat

Begin %I Pict
[ 1 0 0 1 17 -5 ] concat

Begin %I Rect
0 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 258.5 232.5 ] concat
143 275 256 302 Rect
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 423 526 ] concat
[
(send buffer)
] Text
End

End %I eop

Begin %I Pict
[ 1 0 0 1 0 -5 ] concat

Begin %I Rect
0 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 420 232.5 ] concat
143 275 256 302 Rect
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 586 526 ] concat
[
(recv buffer)
] Text
End

End %I eop

End %I eop

Begin %I Line
1 0 1 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 -0 -1 -382.25 976.25 ] concat
551 412 551 330 Line
End

Begin %I Line
1 0 1 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 -367 229 ] concat
460 439 460 304 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 -382 236 ] concat
551 328 616 328 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 -380 236 ] concat
615 328 615 296 Line
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Oblique 14 SetF
[ 1 0 0 1 228 484 ] concat
[
(transport layer)
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Oblique 14 SetF
[ 1 0 0 1 248 562 ] concat
[
(buffer layer)
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Oblique 14 SetF
[ 1 0 0 1 18.0001 739 ] concat
[
(application layer)
] Text
End

Begin %I Line
2 0 0 [4 4 4 4] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 0 0 1 -45 228 ] concat
57 263 368 263 Line
End

Begin %I Line
1 1 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 0 0 1 -227 378 ] concat
372 94 372 127 Line
End

Begin %I Line
1 1 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ -1 0 0 -1 573 597 ] concat
372 94 372 127 Line
End

Begin %I Rect
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1.00639 0 0 0.956491 -47.3514 245.668 ] concat
58 339 368 521 Rect
End

Begin %I Rect
2 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 0.984321 0 0 1.41414 34.6628 126.909 ] concat
393 216 710 313 Rect
End

Begin %I Pict
[ 1 0 0 1 32.9998 2 ] concat

Begin %I Pict
[ 1 0 0 1 17 -5 ] concat

Begin %I Rect
0 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 258.5 232.5 ] concat
143 275 256 302 Rect
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 423 526 ] concat
[
(send buffer)
] Text
End

End %I eop

Begin %I Pict
[ 1 0 0 1 0 -5 ] concat

Begin %I Rect
0 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 420 232.5 ] concat
143 275 256 302 Rect
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 586 526 ] concat
[
(recv buffer)
] Text
End

End %I eop

End %I eop

Begin %I Line
1 0 1 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 -0 -1 27.7498 976.25 ] concat
551 412 551 330 Line
End

Begin %I Line
1 0 1 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 42.9998 229 ] concat
460 439 460 304 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 27.9998 236 ] concat
551 328 616 328 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 29.9998 236 ] concat
615 328 615 296 Line
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Oblique 14 SetF
[ 1 0 0 1 638 482 ] concat
[
(transport layer)
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Oblique 14 SetF
[ 1 0 0 1 657 562 ] concat
[
(buffer layer)
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Oblique 14 SetF
[ 1 0 0 1 428 739 ] concat
[
(application layer)
] Text
End

Begin %I Line
2 0 0 [4 4 4 4] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 0 0 1 365 228 ] concat
57 263 368 263 Line
End

Begin %I Line
1 1 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 0 0 1 183 378 ] concat
372 94 372 127 Line
End

Begin %I Line
1 1 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ -1 0 0 -1 983 597 ] concat
372 94 372 127 Line
End

Begin %I Pict

Begin %I Rect
0 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 396.5 193 ] concat
138 248 226 278 Rect
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 550 463 ] concat
[
(transport)
] Text
End

End %I eop

Begin %I Pict

Begin %I Rect
0 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 -11.4998 192 ] concat
138 248 226 278 Rect
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 142 462 ] concat
[
(transport)
] Text
End

End %I eop

Begin %I Pict

Begin %I Line
3 1 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 -6 224 ] concat
172 206 172 165 Line
End

Begin %I Line
4 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 -25 230 ] concat
191 161 267 161 Line
End

End %I eop

Begin %I Pict
[ 1 0 0 1 -1 0.999999 ] concat

Begin %I Line
3 1 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 404 223 ] concat
172 206 172 165 Line
End

Begin %I Line
4 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 310 229 ] concat
191 161 267 161 Line
End

End %I eop

Begin %I Rect
2 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 -23 231 ] concat
265 140 522 181 Rect
End

Begin %I Text
0 0 0 SetCFg
Helvetica 14 SetF
[ 1 0 0 1 302 398 ] concat
[
(transport mechanism)
] Text
End

Begin %I Text
0 0 0 SetCFg
Times-Roman 18 SetF
[ 1 0 0 1 18 565 ] concat
[
(Link)
] Text
End

Begin %I Text
0 0 0 SetCFg
Times-Roman 18 SetF
[ 1 0 0 1 429 565 ] concat
[
(Link)
] Text
End

Begin %I Rect
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1.00639 0 0 0.956491 362.648 245.668 ] concat
58 339 368 521 Rect
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Bold 14 SetF
[ 1 0 0 1 111 704 ] concat
[
(MP_Put<type>\(\))
()
()
(MP_Get<type>\(\))
] Text
End

Begin %I Text
0 0 0 SetCFg
Helvetica-Bold 14 SetF
[ 1 0 0 1 520 703 ] concat
[
(MP_Put<type>\(\))
()
()
(MP_Get<type>\(\))
] Text
End

Begin %I Pict
1 0 0 [] 0 SetB
[ 1 0 0 1 -0.75 0 ] concat

Begin %I Line
0 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 -382 234 ] concat
476 434 551 434 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 -42 228 ] concat
211 440 211 463 Line
End

End %I eop

Begin %I Pict
1 0 0 [] 0 SetB
[ 1 0 0 1 -0.75 0 ] concat

Begin %I Line
0 0 0 [] 0 SetB
0 0 0 SetCFg
1 1 1 SetCBg
none SetP %I p n
[ 1 0 0 1 27.9998 234 ] concat
476 434 551 434 Line
End

Begin %I Line
1 0 0 [] 0 SetB
0 0 0 SetCFg
0.85098 0.85098 0.85098 SetCBg
none SetP %I p n
[ 1 -0 -0 1 368 228 ] concat
211 440 211 463 Line
End

End %I eop

End %I eop

showpage


end
%%EndDocument
 @endspecial 632 1001 a Fv(Figure)10 b(2.1:)15 b(Link)9
b(connection)h(or)o(ganization)75 1135 y Fm(2.2)58 b(MP)14
b(Links)75 1227 y Fv(Abstractly)m(,)9 b(a)h(link)f(is)g(an)h(endpoint)d
(for)i(communication)g(with)g(other)g(applications.)k(An)d(application)
e(sends)h(data)h(to)f(and)75 1277 y(receives)h(data)f(from)g(a)h(link.)
j(As)c(illustrated)e(in)i(\256gure)g(2.1,)g(a)h(link)d(has)j(two)e
(layers:)14 b(a)c(buf)o(fering)e(layer)h(which)f(contains)h(a)75
1327 y(set)e(of)g(send)g(and)g(receive)g(buf)o(fers,)g(and)g(a)g
(transport)g(layer)g(that)g(manages)g(communication)g(with)f(the)h(un)o
(derlyi)o(ng)f(transpor)o(t)75 1377 y(device.)22 b(The)13
b(buf)o(fers)g(are)g(implemented)f(as)h(a)g(linked)f(list)f(of)h(buf)o
(fer)g(segments.)23 b(The)13 b(application)e(programmer)h(will)75
1426 y(have)d(no)e(direct)h(interaction)f(with)g(the)h(transport)f
(layer)h(and)g(is)g(only)f(involved)g(in)g(transports)g(at)i(the)f
(time)g(a)g(link)f(is)h(created)75 1476 y(and)13 b(a)h(speci\256c)g
(transport)e(device)i(is)f(bound)f(to)h(the)g(link.)23
b(Similarly)m(,)14 b(the)f(application)f(programmer)r(')n(s)g(only)h
(concern)75 1526 y(with)d(the)i(buf)o(fering)e(layer)h(is)h(to)f
(customize)g(the)h(size)g(of)f(the)g(buf)o(fers)h(or)f(to)g(change)h
(the)f(time)g(at)h(which)f(data)h(is)f(moved)75 1576
y(between)g(transport)e(buf)o(fer)h(space)h(and)g(the)f(MP)g(buf)o
(fers.)15 b(T)m(ypically)10 b(the)g(programmer)g(will)f(use)i(the)f
(default)g(values.)122 1626 y(The)i(transport)d(device)i(is)f
(responsible)g(for)g(the)h(actual)g(transmission)e(of)i(data)g(between)
g(applications.)k(MP)c(assumes)75 1676 y(as)h(little)d(as)j(possible)e
(about)h(the)g(exact)h(nature)f(of)g(this)f(transport,)g(preferring)h
(to)f(support)g(a)i(diverse)f(collection)f(of)h(data)75
1725 y(delivery)e(devices.)16 b(In)9 b(this)g(way)m(,)i(a)f(variety)f
(of)h(communication)f(paradigms)h(can)g(be)g(used)g(to)g(send)g(MP)g
(data.)15 b(Currently)75 1775 y(\256les,)d(TCP)g(sockets,)g(T)m
(oolBus,)f(and)g(PVM)h(are)g(supported.)970 1760 y Fp(1)1003
1775 y Fv(At)f(the)g(time)h(a)f(link)f(is)h(\252opened\272,)i(a)f
(particular)e(transport)75 1825 y(device)f(is)g(bound)f(to)g(the)h
(link.)14 b(Other)8 b(transports)g(may)i(be)f(used)g(by)g(\256rst)f
(adding)g(them)h(to)g(the)g(environment)e(\(see)j(section)75
1875 y(4.1.2)g(in)g(the)g(chapter)h(on)f(Advanced)g(T)m(opics\).)122
1925 y(Information)g(is)i(exchanged)g(between)g(applications)e(in)i
(the)f(form)g(of)h Fu(messages)p Fv(.)20 b(A)12 b(message)h(is)f
(composed)g(of)f(one)75 1974 y(or)h(more)h Fl(message)h(fragments)e
Fv(,)h(where)g(each)g(fragment)g(corresponds)f(to)f(the)h(data)h(in)e
(a)i(single)f(buf)o(fer)g(segment.)21 b(The)75 2024 y(buf)o(fering)9
b(layer)h(lies)g(between)h(the)f(MP)g(application)f(interface)h(and)g
(the)g(transport)f(device)i(and)f(is)g(where)g(messages)i(are)75
2074 y(assembled)h(and)f(disassembled.)22 b(The)12 b(programmer)r(')n
(s)g(view)g(is)g(that)f(each)j Fl(put)d Fv(and)h Fl(get)p
Fv(,)h(whether)f(at)g(the)g(node)g(or)g(data)75 2124
y(packet)h(level,)g(accesses)i(a)e(link)e(connecting)h(the)g
(application)f(with)g(one)i(or)f(more)g(other)g(applications,)g(as)h
(determined)75 2174 y(by)d(the)f(underlying)f(transport)h(device.)16
b(In)9 b(reality)m(,)h(all)g(accesses)i(are)f(to)e(one)i(of)e(two)h
(buf)o(fers:)k Fl(put)p Fv(s)9 b(access)j(a)f(link')n(s)d(send)75
2223 y(buf)o(fer)i(and)g Fl(get)p Fv(s)h(the)f(receive)h(buf)o(fer)n(.)
k(The)c(contents)f(of)g(a)g(buf)o(fer)g(are)i(written)d(to)g(the)h
(underlying)f(data)h(delivery)g(device)75 2273 y(by)h(the)h
(transport-speci\256c)e(write)h(routine.)18 b(Similarly)m(,)11
b(a)h(transport-speci\256c)f(read)h(routine)e(is)i(responsible)e(for)h
(loading)75 2323 y(data)g(from)f(the)g(transport)f(device)h(into)f(the)
h(link')n(s)f(receive)i(buf)o(fer)n(.)122 2373 y(A)c(link)f(is)h
(created)g(and)g(initialized)e(with)h(a)i(call)f(to)f
Fs(MP_OpenLink\(\))g Fv(which)g(returns)g(a)i(pointer)d(to)i(an)g(MP)g
(link)e(struc-)75 2423 y(ture)11 b(\()p Fs(MP)p 217 2423
13 2 v 14 w(Link)p 331 2423 V 15 w(pt)p Fv(\))g(on)f(success)j(and)e
(NULL)h(on)f(failure.)17 b(The)11 b(link)f(inherits)g(attributes)f
(from)i(an)h(MP)f(environment.)p 75 2458 720 2 v 120
2486 a Fj(1)135 2497 y Fi(The)6 b(FILE)i(and)d(TCP)j(devices)d(are)h
(automatically)g(included)f(in)h(the)h(MP)f(library)n(.)11
b(The)c(PVM)f(and)g(TB)h(devices)e(must)i(be)f(added)f(to)h(an)g
(environment)75 2537 y(at)12 b(execution)f(time)h(with)g(a)h(call)f(to)
g Fh(MP)p 563 2537 10 2 v 12 w(AddEnvTranspDevice\(\))f
Fi(before)g(a)h(PVM-)g(or)g(TB-link)h(can)e(be)h(opened.)22
b(See)12 b(section)g(4.1.2)f(for)75 2576 y(information)h(on)h(adding)f
(devices)g(to)i(an)f(environment)e(and)i(the)g(INST)m(ALL)i(\256le)f
(in)g(the)f(MP)h(distribution)e(for)i(instructions)e(on)h(compiling)f
(the)75 2616 y(necessary)6 b(support)h(routines.)954
2754 y Fv(13)p eop
%%Page: 14 15
14 14 bop 75 94 1793 2 v 75 259 2 166 v 102 161 a Fk(MP_Link_pt)26
b(MP_OpenLi)q(nk)g(\(MP_Env_p)q(t)g(env,)e(int)f(argc,)i(char)f
(**argv\))102 217 y(void)158 b(MP_CloseL)q(in)q(k)26
b(\(MP_Link_p)q(t)g(link\))p 1866 259 V 75 261 1793 2
v 745 344 a Fv(T)m(able)11 b(2.2:)k(MP)10 b(link)f(routines)75
469 y(Some)k(of)f(these)g(link)f(attributes)g(are)i(resettable)g(by)f
(the)g(user)n(.)21 b(Remember)13 b(that)f(a)h(call)f(to)g
Fs(MP)p 1489 469 13 2 v 14 w(InitializeEnv\(\))75 519
y Fv(must)e(have)h(been)g(made)g Fu(prior)f Fv(to)f(any)i(call)f(to)g
Fs(MP)p 818 519 V 14 w(OpenLink\(\))p Fv(.)122 569 y(Ar)o(guments)j
(passed)g(in)f(the)g Fs(argv)g Fv(vector)h(identify)d(the)j(transport)e
(device)i(to)f(use,)h(what)g(mode)g(to)e(open)i(it)e(in,)i(etc.)75
619 y(These)f(are)g(shown)e(in)h(table)g(2.3.)17 b(The)12
b(ar)o(guments)f(may)g(either)g(be)g(given)g(as)g(options)f(on)g(the)h
(command)h(line)e(when)h(the)75 669 y(application)e(is)h(launched)g(or)
g(hardcoded)g(within)f(the)h(application.)122 718 y(The)i(following)d
(examples)j(illustrate)d(setting)h(the)h(ar)o(guments)g(from)g(the)g
(command)h(line.)17 b(The)12 b(ar)o(guments)f(\252-in\256le")75
768 y(and)g(\252-out\256le")g(are)h(needed)g(by)f(the)g(example)h
(applications)e(and)h(are)h(not)e(required)h(by)g Fs(MP_OpenLink\(\))p
Fv(.)17 b(The)11 b(\256rst)75 818 y(example)g(starts)g(application)e
Fs(recv-tree)h Fv(which)g(will)f(open)i(a)g(link)e(using)h(the)g(TCP)h
(transport)e(device)j(and)e(launch)h(a)75 868 y(remote)g(application,)e
Fs(send-tree)p Fv(,)h(on)g(host)f(eeyore)i(with)e(ar)o(gument)i
("-in\256le)e(ex1.dat".)75 935 y Fs(pooh)p Ft(f)p Fs(12)p
Ft(g)p Fs(\045recv-tree)23 b(-MPtransp)h(TCP)h(-MPmode)f(launch)g
(-MPapplication)g("send-tree)75 985 y(-infile)g(ex1.dat")g(-MPhost)h
(eeyore)122 1085 y Fv(T)m(o)11 b(manually)f(establish)g(a)g(connection)
g(between)h(two)e(applications)h(on)f(separate)j(machines,)g(you)d
(must)h(start)g(one)h(in)75 1135 y(\252listen\272)f(mode)h(and)f
Fu(then)g Fv(its)g(partner)g(in)f(\252connect\272)j(mode.)j(For)10
b(example:)75 1202 y Fs(pooh)p Ft(f)p Fs(13)p Ft(g)p
Fs(\045recv-tree)23 b(-MPtransp)h(TCP)h(-MPmode)f(listen)g(-MPport)g
(1045)h(-outfile)75 1252 y(ex1.out)122 1352 y Fv(On)13
b(host)f(Pooh,)h(application)f Fs(recv-tree)g Fv(opens)g(a)i(TCP)f
(link)e(that)i(will)e(listen)h(for)g(connections)g(on)h(port)f(1045.)75
1401 y(Now)e(we)h(run)e Fs(send-tree)h Fv(which)g(also)g(opens)g(a)h
(TCP)f(link)f(which)h(will)f(attempt)g(to)h(connect)g(to)g(port)f(1045)
g(on)h(Pooh.)75 1469 y Fs(owl)p Ft(f)p Fs(25)p Ft(g)p
Fs(\045send-tree)23 b(-MPtransp)h(TCP)h(-MPmode)f(connect)g(-MPhost)g
(pooh)h(-MPport)f(1045)75 1519 y(-infile)g(ex1.dat)122
1618 y Fv(T)m(o)11 b(open)f(a)h(link)e(to)g(write)h(to)g(a)h(\256le:)75
1686 y Fs(owl)p Ft(f)p Fs(2)p Ft(g)p Fs(\045send-tree)23
b(-MPtransp)h(FILE)h(-MPmode)f(write)g(-MPfile)h(ex1.mp)6
b(-infile)24 b(ex1.dat)122 1786 y Fv(T)m(o)11 b(open)f(a)h(link)e(to)g
(read)i(from)f(a)h(\256le:)75 1853 y Fs(owl)p Ft(f)p
Fs(3)p Ft(g)p Fs(\045recv-tree)23 b(-MPtransp)h(FILE)h(-MPmode)f(read)g
(-MPfile)h(ex1.mp)6 b(-outfile)24 b(ex1.out)p 433 1990
1085 2 v 432 2039 2 50 v 529 2024 a Fv(Option)p 740 2039
V 740 2039 V 198 w(Legal)10 b(V)-5 b(alues)p 1161 2039
V 1161 2039 V 197 w(Used)11 b(with)p 1516 2039 V 433
2041 1085 2 v 432 2091 2 50 v 458 2076 a(-MPtransp)p
740 2091 V 132 w(FILE,)g(TCP)-5 b(,)11 b(PVM,)g(TB)p
1161 2091 V 57 w(always)p 1516 2091 V 432 2141 V 458
2126 a(-MPmode)p 740 2141 V 142 w(listen,)e(connect,)i(launch)p
1161 2141 V 50 w(-MPtransp)e(TCP)p 1516 2141 V 432 2191
V 740 2191 V 766 2176 a(read,)i(write)p 1161 2191 V 243
w(-MPtransp)e(FILE)p 1516 2191 V 432 2240 V 458 2225
a(-MPapplication)p 740 2240 V 48 w Fq(<)h Fv(application)f(name)j
Fq(>)p 1161 2240 V 51 w Fv(-MPmode)e(launch)p 1516 2240
V 432 2290 V 458 2275 a(-MPhost)p 740 2290 V 164 w Fq(<)g
Fv(hostname)h Fq(>)p 1161 2290 V 177 w Fv(-MPmode)f(launch)p
1516 2290 V 432 2340 V 740 2340 V 766 2325 a Fq(<)g Fv(hostname)h
Fq(>)p 1161 2340 V 177 w Fv(-MPmode)f(connect)p 1516
2340 V 432 2390 V 458 2375 a(-MPport)p 740 2390 V 166
w Fq(<)g Fv(port)g(number)g Fq(>)p 1161 2390 V 132 w
Fv(-MPmode)g(connect)p 1516 2390 V 432 2440 V 740 2440
V 766 2425 a Fq(<)g Fv(port)g(number)g Fq(>)p 1161 2440
V 132 w Fv(-MPmode)g(listen)p 1516 2440 V 432 2489 V
458 2474 a(-MP\256le)p 740 2489 V 181 w Fq(<)g Fv(\256lename)i
Fq(>)p 1161 2489 V 193 w Fv(-MPtransp)d(FILE)p 1516 2489
V 433 2491 1085 2 v 609 2583 a(T)m(able)i(2.3:)k(Ar)o(guments)10
b(to)g Fs(MP)p 1079 2583 13 2 v 14 w(OpenLink\(\))954
2754 y Fv(14)p eop
%%Page: 15 16
15 15 bop 122 171 a Fv(Here)11 b(we)g(use)g(a)g Fs(.mp)f
Fv(extension)f(to)h(indicate)g(a)g(\256le)h(containing)e(MP)h(data,)h
(but)e(this)h(is)g(not)f(necessary)m(.)122 221 y(Alternatively)m(,)g
(one)i(might)e(hard)h(code)h(the)f(ar)o(guments)h(within)d(the)i(body)f
(of)h(the)h(program)f(as)h(follows:)78 261 y Fg(')p 78
753 4 411 v 78 837 a(&)1869 261 y($)p 1869 753 V 1869
837 a(\045)p 163 837 1625 4 v 163 261 V 119 323 a Fs(char)24
b(*argvec[]={"send-tree",)f("-MPtransp",)h("FILE",)g("-MPmode",)g
("write",)492 373 y("-MPfile",)g("MP-ex1.mp",)g("-infile",)g
("ex1.dat",)g(NULL};)168 473 y(env)h(=)g(MP_InitializeEnv\(NULL\);)168
572 y(if)g(\(\(link)g(=)f(MP_OpenLink\(env,)g(9,)g(argvec\)\))h(==)f
(NULL\))h({)218 622 y(MP_ReleaseEnv\(env\);)218 672 y(exit\(-1\);)218
722 y(})168 772 y(.)g(.)g(.)122 893 y Fv(There)11 b(are)g(several)g
(things)e(to)h(note)g(about)f(table)i(2.3.)127 967 y(1.)21
b(Launching)6 b(remote)g(applications)g(is)g(done)g(using)g(the)g
(remote)g(shell)g(command,)j(so)d(the)g(appropriate)g
Fs(rsh/remsh)179 1017 y Fv(conventions)i(must)h(be)h(observed.)15
b(In)9 b(paricular)n(,)g(the)h Fs(.rhosts)e Fv(\256le)i(has)g(to)e
(have)i(the)f(appropriate)g(entries)g(\261)g(see)179
1066 y(the)h(man)h(page)f(for)g Fs(rsh)g Fv(\(or)n(,)h
Fs(remsh)p Fv(\))f(for)f(details.)127 1145 y(2.)21 b(The)13
b(ar)o(gument)f(to)g Fs(-MPapplication)f Fv(must)h(be)h(given)e(in)h
(double)f(quotes)h(\()p Fs(")25 b(")p Fv(\))12 b(so)g(that)g(it)f(is)h
(treated)h(as)g(a)179 1194 y(single)c(ar)o(gument)g(to)h(the)f(remote)h
(application)e(and)i(not)f(additional)f(options)g(to)h(the)g(launching)
g(application.)k(This)179 1244 y(ar)o(gument)h(will)f(be)i(passed)g(to)
e(rsh,)j(so)e(must)g(include)g(the)g(name)h(of)f(the)g(remote)h
(application)e(to)h(be)g(launched)179 1294 y(as)i(well)f(as)h(any)g
Fu(additional)c Fv(command)k(line)f(options)f(you)h(want)g(to)g
(provide)g(the)g(remote)h(application.)29 b(The)179 1344
y(MP)11 b(software)g(will)e(add)i(other)g(command)g(line)g(options)e
(telling)g(the)i(remote)g(application)f(to)g(which)h(port)f(and)g(on)
179 1394 y(which)f(host)g(to)f(make)j(the)e(TCP)h(connection.)k(More)c
(precisely)m(,)g(the)f(remote)h(application)e(will)g(be)i(called)g
(with)e(the)179 1444 y(additional)g(command)j(line)f(ar)o(guments:)179
1493 y Fs(-MPtransp)24 b(TCP)g(-MPmode)h(connect)f(-MPhost)g
Fq(<)p Fv(hostname)p Fq(>)i Fs(-MPport)e Fq(<)p Fv(port)10
b(number)p Fq(>)179 1543 y Fv(where)16 b Fq(<)p Fv(hostname)p
Fq(>)g Fv(is)f(replaced)h(by)f(the)h(name)g(of)f(the)h(host)e(on)h
(which)g(the)h(client)e(is)i(running)d(and)j Fq(<)p Fv(port)179
1593 y(number)p Fq(>)10 b Fv(is)h(replaced)g(by)f(the)g(port)f(number)i
(at)f(which)g(the)g(client)g(is)g(\252listening\272.)15
b(An)10 b(application)f(should)h(pass)179 1643 y(these)g(ar)o(guments)h
(to)f(the)g(call)g(to)g Fs(MP_OpenLink)p Fv(.)127 1721
y(3.)21 b(When)13 b(using)g(a)g(port)g(number)g(in)f(connect)i(mode,)h
(it)d(is)h(assumed)h(that)f(an)g(application)f(is)h Fu(alr)n(eady)h
Fv(running)d(on)179 1771 y(the)j(given)f(host)g(and)h(is)g(listening)e
(on)i(the)f(speci\256ed)i(port.)25 b(Opening)13 b(a)i(link)e(in)g
(connect)h(mode)g(is)g(a)h(blocking)179 1821 y(operation,)9
b(i.e.,)j(control)d(will)g(resume)i(to)f(the)g(program)g(only)f(after)h
(the)h(connection)e(has)i(been)g(established.)127 1899
y(4.)21 b(For)11 b(listen)g(mode,)j(an)e(attempt)f(will)g(be)h(made)h
(to)e(use)i(the)e(port)g(speci\256ed,)j(but)d(if)g(it)g(is)h(already)g
(in)g(use,)h(the)f(next)179 1949 y(available)f(port)f(will)g(be)h
(used.)18 b(If)11 b(events)h(are)g(being)e(logged,)h(the)g(port)f
(number)h(can)h(be)g(taken)f(from)g(the)g(log)f(\256le)179
1999 y(once)h(the)f(application)e(has)j(successfully)f(bound)g(to)f(a)i
(port)e(number)n(.)127 2077 y(5.)21 b(The)11 b(order)f(of)g(the)g(ar)o
(guments)g(does)h(not)e(matter)n(.)122 2150 y(Also,)14
b(note)f(in)g(the)h(hardcoded)f(example)h(above)g(that)f(the)g(name)i
(of)e(the)g(application)f(\()p Fs(send-tree)p Fv(\))g(is)i(given)e(as)
75 2200 y(the)k(\256rst)h(entry)f(in)f Fs(argvec)p Fv(.)34
b(This)16 b(is)h(not)f(necessary)i(and)e(is)g(included)g(only)f(for)h
(logging)f(purposes)h(\(as)h(part)f(of)75 2250 y Fs(MP_OpenLink\(\))p
Fv(')n(s)9 b(initialization)e(sequence\).)122 2300 y(A)j(link)f(is)h
(closed)g(with)f(a)i(call)f(to)f Fs(MP_CloseLink\(\))p
Fv(,)g(after)h(which)g(data)g(may)h(not)e(be)h(written)f(to,)h(nor)f
(read)i(from,)75 2350 y(the)f(link.)75 2487 y Fm(2.3)58
b(Example:)22 b(link)15 b(communication)i(via)e(the)g(FILE)e(and)i(TCP)
f(devices)75 2580 y Fv(When)f(communicating)e(using)h(\256les,)h(the)f
(sending)g(side)g(must)h(open)f(the)g(\256le)g(for)g(writing)f(and)h
(the)g(receiving)g(side)h(for)75 2630 y(reading.)i(The)c(communicating)
e(programs)i(have)f(the)g(responsibility)e(of)i(coordinating)e(access)k
(to)e(the)g(\256le.)954 2754 y(15)p eop
%%Page: 16 17
16 16 bop 122 121 a Fv(When)10 b(using)f(TCP)i(sockets)f(in)f(launch)h
(mode,)h(the)e(connection)h(is)f(established)h(for)f(you.)15
b(The)10 b(alternative)g(is)f(to)h(have)75 171 y(the)g(two)g
(communicating)g(applications)f(use)i(the)f(connect)h(and)f(listen)f
(modes.)17 b(One)10 b(side)h(must)f(take)h(the)f(\252server)r(\272)h
(role,)75 221 y(creating)g(a)h(socket)f(and)h(listening)d(for)i(a)h
(request)f(to)f(connect,)j(while)d(the)h(other)g(side)g(must)g(take)h
(the)f(role)g(of)g(a)h(\252client\272,)75 271 y(creating)e(a)h(socket,)
g(identifying)d(the)i(address)h(of)g(the)f(\252server)r(\272,)i(and)e
(making)g(the)h(connection.)k(Note)10 b(that)g(the)g(listening)75
321 y(application)f(should)g(be)i(running)d(\(and)i(listening\))e
Fu(befor)n(e)j Fv(the)f(connecting)g(application)f(is)h(run.)122
370 y(The)15 b(example)g(code)f(below)f(may)i(be)f(used)g(with)f(the)h
(FILE)h(transport)d(or)i(the)g(TCP)g(transport.)25 b(The)14
b(applications)75 420 y(use)h(command)g(line)f(ar)o(guments)h(to)f
(determine)h(the)g(particular)e(transport.)27 b(These)16
b(programs)f(may)g(be)g(found)e(in)h(the)75 470 y Fs(examples)c
Fv(directory)h(of)f(the)h(MP)g(source)h(distribution)o(.)j(The)d(steps)
f(indicated)g(in)f(the)h(comments)h(correspond)f(to)f(the)75
520 y(outline)f(presented)h(at)g(the)h(beginning)d(of)i(this)f(chapter)
n(.)78 569 y Fg(')p 78 2107 4 1457 v 78 2192 a(&)1869
569 y($)p 1869 2107 V 1869 2192 a(\045)p 163 2192 1625
4 v 163 569 V 119 632 a Fs(/*)24 b(send-tree.c)g(-)268
682 y(read)h(expressions)f(in)g(a)h(textual,)f(stylized)g(MP)h(format)
268 731 y(from)g(a)f(file)h(and)g(send)f(them)h(as)f(MP)h(Trees)g(to)f
(the)h(link)f(*/)119 781 y(#include)g("MP.h")119 881
y(int)g(main\(int)g(argc,)h(char)f(*argv[]\))119 931
y({)168 980 y(char)174 b(*ifname)25 b(=)g(NULL;)168 1030
y(MP_Link_pt)f(link)100 b(=)25 b(NULL;)168 1080 y(MP_Env_pt)49
b(env)125 b(=)25 b(NULL;)168 1180 y(if)g(\(\(env)g(=)f
(MP_InitializeEnv\(NULL\)\))f(==)i(NULL\))f({)200 b(/*)24
b(STEP)h(1)g(*/)218 1230 y(fprintf\(stderr,)f("\045s:)g
(MP_InitializeEnv\(\))g(failed!\\n",)f(argv[0]\);)218
1279 y(exit\(1\);)218 1329 y(})168 1429 y(if)i(\(\(link)g(=)f
(MP_OpenLink\(env,)g(argc,)g(argv\)\))h(==)f(NULL\))h({)g(/*)f(STEP)h
(2)g(*/)218 1479 y(MP_ReleaseEnv\(env\);)73 b(exit\(1\);)218
1528 y(})168 1628 y(if)25 b(\(\(ifname)f(=)h(IMP_GetCmdlineArg\(argc,)e
(argv,)h("-infile"\)\))g(==)h(NULL\))49 b({)218 1678
y(MP_LogEvent\(link,)24 b(MP_ERROR_EVENT,)f("missing)h(-infile)h
(argument"\);)218 1728 y(exit\(1\);)218 1777 y(})168
1877 y(imp_file2tree\(link,)f(ifname\);)622 b(/*)24 b(STEP)h(3)g(*/)168
1977 y(MP_CloseLink\(link\);)846 b(/*)24 b(STEP)h(4)g(*/)168
2027 y(MP_ReleaseEnv\(env\);)846 b(/*)24 b(STEP)h(5)g(*/)168
2076 y(exit\(0\);)119 2126 y(})954 2754 y Fv(16)p eop
%%Page: 17 18
17 17 bop 75 83 a Fg(')p 75 1870 4 1706 v 75 1954 a(&)1876
83 y($)p 1876 1870 V 1876 1954 a(\045)p 160 1954 1636
4 v 160 83 V 116 145 a Fs(/*)24 b(recv-tree.c)g(-)h(receive)f(MP)h
(Trees)g(from)f(the)h(link)f(and)h(write)f(them)539 195
y(to)h(a)g(file)f(in)h(a)g(stylized,)f(textual)g(format.)g(*/)116
245 y(#include)g("MP.h")116 295 y(#include)g("node.c")116
345 y(main\(int)g(argc,)g(char)h(*argv[]\))116 394 y({)f(char)174
b(*ofname)25 b(=)g(NULL;)165 444 y(int)199 b(more)25
b(=)g(0,)g(n)f(=)h(-1;)165 494 y(node_t)124 b(*root)25
b(=)g(NULL;)165 544 y(MP_Link_pt)f(link)h(=)g(NULL;)165
594 y(MP_Env_pt)49 b(env)h(=)25 b(NULL;)165 693 y(if)g(\(\(env)g(=)f
(MP_InitializeEnv\(NULL\)\))f(==)i(NULL\))f(exit\(1\);)165
743 y(if)h(\(\(link)g(=)f(MP_OpenLink\(env,)g(argc,)g(argv\)\))h(==)f
(NULL\))h({)215 793 y(MP_ReleaseEnv\(env\);)48 b(exit\(1\);)215
843 y(})165 893 y(if)25 b(\(\(ofname)f(=)h(IMP_GetCmdlineArg\(argc,)e
(argv,)h("-outfile"\))g(==)h(NULL\))f({)215 942 y(MP_LogEvent\(link,)g
(MP_ERROR_EVENT,)514 992 y("missing)g(or)h(bad)g(-outfile)f
(argument\\n"\);)215 1042 y(exit\(1\);)215 1092 y(})165
1142 y(fd)h(=)g(fopen\(ofname,)f("w"\);)165 1191 y(printf\("server's)g
(annotated)g(tree\(s\):\\n"\);)165 1241 y(do)h({)215
1291 y(if)g(\(MP_TestEofMsg\(link\)\))e(MP_SkipMsg\(link\);)48
b(/*)25 b(msg)g(alignment)f(*/)215 1341 y(printf\("\\n\\n\045-20s)g
(\045-5s)g(\045-30s)h(\045-7s)f(\045-9s\\n",)g("Type",)h("Dict",)415
1391 y("Value",)f("#Annots",)g("#Children"\);)215 1441
y(root)h(=)g(m_get_node\(link\);)215 1490 y(more)g(=)g
(process_request\(root\);)215 1540 y(free_tree\(root\);)215
1590 y(root)g(=)g(NULL;)215 1640 y(free_label_table\(\);)165
1690 y(})g(while)g(\(more\);)165 1739 y(fclose\(fd\);)165
1789 y(MP_CloseLink\(link\);)165 1839 y(MP_ReleaseEnv\(env\);)116
1889 y(})75 2028 y Fv(A)10 b(sample)h(call)g(using)e(launch)h(mode)h
(looks)e(like:)75 2096 y Fs(Pooh)p Ft(f)p Fs(16)p Ft(g)p
Fs(\045)24 b(recv-tree)g(-MPtransp)g(TCP)h(-MPmode)f(launch)g(-MPhost)g
(eeyore)75 2145 y(-MPapplication)g("send-tree)g(-infile)g(expr")75
2213 y Fv(Alternatively)m(,)7 b(using)g(the)h(listen)f(and)h(connect)g
(modes)g(with)f(the)h(\252server)r(\272)h(running)d(on)h(Pooh)g(and)h
(the)g(\252client\272)g(on)g(Piglet,)75 2263 y(we)j(would)e(\256rst)h
(start)g(the)g(server)h(and)f(have)h(it)e(listen)h(for)f(a)i
(connection:)75 2330 y Fs(Pooh)p Ft(f)p Fs(27)p Ft(g)p
Fs(\045)24 b(recv-tree)g(-MPtransp)g(TCP)h(-MPmode)f(listen)g(-MPport)g
(1045)h(-outfile)75 2380 y(results)75 2448 y Fu(Then)10
b Fv(we)h(could)f(start)g(the)g(\252client\272)g(on)g(another)g
(machine:)75 2515 y Fs(Piglet)p Ft(f)p Fs(57)p Ft(g)p
Fs(\045)24 b(send-tree)g(-MPtransp)g(TCP)g(-MPmode)h(connect)f(-MPhost)
g(Pooh)h(-MPport)75 2565 y(1045)g(-infile)f(expr)954
2754 y Fv(17)p eop
%%Page: 18 19
18 18 bop 75 433 a Fn(Chapter)20 b(3)75 640 y Fr(Sending)25
b(&)h(Receiving)f(Data)g(in)h(MP)75 881 y Fm(3.1)58 b(MP)14
b(-)h(C)f(Data)h(T)l(ypes)75 974 y Fv(T)m(able)h(3.1)g(de\256nes)g(the)
g(mapping)f(of)g(MP)h(basic)g(types)g(to)f(C)g(types.)31
b(As)16 b(indicated)f(in)g(the)h(table,)h(most)f(MP)f(types)75
1023 y(have)c(natural)f(counterparts)h(in)f(C.)h(For)f(the)h
(string-based)f(types,)h(the)f(length)g(can)h(be)h(discovered)e(using)g
(normal)h(string-)75 1073 y(handling)h(operations.)25
b(The)14 b(size)h(of)e(the)h(machine)g(precision)f(numeric)h(types)g
(is)f(generally)g(determined)h(by)f(its)h(type)75 1123
y(\(e.g.,)d(MP)p 231 1123 13 2 v 15 w(Sint32T)m(ype)e(is)h(a)g(C)g
(long)f(-)h(four)f(bytes\))838 1108 y Fp(1)864 1123 y
Fv(The)i(raw)f(type,)g(on)g(the)f(other)h(hand,)g(requires)g(dif)o
(ferent)f(treatment.)75 1173 y(Unlike)g(the)g(string-based)g(types,)h
(the)f(amount)g(of)h(data)f(to)g(be)h(handled)f(must)h(be)g(supplied)e
(by)h(the)h(application)e(program.)75 1223 y(The)14 b(put)g(and)f(get)h
(routines)f(which)g(handle)h(the)f(raw)i(type)e(take)h(a)h(length)d(ar)
o(gument)i(\(in)f(bytes\))h(and)g(a)g(pointer)f(to)g(an)75
1272 y(array)h(of)f(char)h(\(uninterpreted)e(bytes\).)24
b(The)14 b(default)f(representation)g(and)g(supporting)e(code)j(for)f
(arbitrary)g(precision)75 1322 y(numbers)d(are)g(from)f(the)g(GNU)h
(Multiple)e(Precision)h(package.)16 b(Resetting)8 b(the)i(lar)o(ge)f
(integer/real)g(package)i(is)e(described)75 1372 y(in)k(section)g
(4.1.3.)26 b(Fixed)13 b(precision)g(integers)h(are)g(transmitted)f(in)g
(2')n(s)g(complement)h(form.)25 b(The)15 b(representation)e(for)75
1422 y(\256xed)c(precision)f(reals)i(is)f(quietly)e(negotiated)h(at)h
(link)f(connection)g(time,)i(with)e(preference)i(given)e(to)h(the)g
(native)f(format.)1858 1407 y Fp(2)75 1472 y Fv(There)15
b(should)e(be)h(no)g(loss)g(of)g(precision)f(when)i(transmitting)c
(reals)k(when)f(two)g(sides)g(are)h(using)e(the)h(native)g(format,)75
1522 y(however)8 b(occasionally)g(one)g(side)g(may)g(be)h(forced)f(to)f
(convert)h(between)g(its)f(native)h(format)g(and)g(the)g(MP)g(standard)
f(format)75 1571 y(\(IEEE)k(754)f([9)o(]\),)h(in)e(which)h(case)i
(there)f(may)f(be)h(some)g(loss)f(of)g(precision.)15
b(The)10 b(log)g(\256le)g(will)f(tell)h(you)f(which)h(format)g(is)75
1621 y(native)g(and)g(which)g(format)g(is)g(actually)g(used)g(by)g(the)
g(link.)75 1761 y Fm(3.2)58 b(Packets)75 1854 y Fv(Recall)10
b(that)g(data)g(is)g(sent)g(in)g(messages,)j(where)d(each)i(message)f
(typically)e(contains)h(an)g(MP)g(T)o(ree)h(\(a)g(linearized)f(version)
75 1903 y(of)f(the)h(annotated)f(parse)h(tree\).)15 b(MP)10
b(T)o(rees)g(are)g(composed)g(of)f(a)i(sequence)f(of)g
Fu(node)f(packets)p Fv(,)h Fu(annotation)d(packets)p
Fv(,)k(and,)75 1953 y(possibly)m(,)e Fu(data)h(limbs)p
Fv(.)75 2072 y Ff(3.2.1)50 b(node)12 b(packet)75 2149
y Fv(A)i(node)f(packet)i(corresponds)e(to)g(a)h(node)g(in)f(a)i(parse)f
(tree.)26 b(Interior)12 b(nodes)i(of)g(the)f(tree)h(are)h(always)f
(operators)f(with)75 2199 y(ar)o(guments,)h(while)e(the)g(leaves)i(of)e
(the)g(tree)h(will)f(be)g(non-operator)f(types)i(or)f(an)h(operator)f
(without)f(ar)o(guments.)22 b(Each)75 2249 y(node)10
b(packet)h(has)g(\256ve)f(\256elds:)75 2332 y Fw(node)h(type)21
b Fv(Identi\256es)10 b(the)g(type)g(of)h(data)g(carried)g(in)f(the)g
(node)g(packet.)17 b(This)11 b(will)e(always)i(be)g(an)g(MP)g(type)f
(as)h(listed)f(in)179 2382 y(the)g(\256rst)g(column)g(of)g(table)g
(3.1.)p 75 2409 720 2 v 120 2437 a Fj(1)135 2448 y Fi(At)d(the)f
(moment,)g(libMP)g(is)h(not)f(64bit)g(clean,)g(i.e.)12
b(will)7 b(not)f(work)g(on)g(machines)f(for)h(which)g
Fh(sizeof\(long\))19 b(==)h(8)6 b Fi(\(like)h(the)f(DEC)h(ALPHA\).)75
2488 y(This)h(will)h(change)e(in)h(the)g(next)f(version)g(of)h(libMP)l
(.)120 2516 y Fj(2)135 2528 y Fi(A)g(limited)h(number)e(of)h(formats)g
(are)g(currently)f(implemented.)k(More)c(will)i(become)e(available)g
(as)h(MP)h(is)f(ported)g(to)g(machines)f(using)g(non-IEEE)75
2568 y(formats.)954 2754 y Fv(18)p eop
%%Page: 19 20
19 19 bop 146 123 1658 2 v 145 173 2 50 v 387 158 a Fv(MP)10
b(Basic)h(T)m(ype)p 883 173 V 266 w(MP-C)f(typedef)p
1211 173 V 1211 173 V 266 w(Description)p 1803 173 V
146 174 1658 2 v 145 224 2 50 v 171 209 a Fs(MP)p 223
209 13 2 v 15 w(StringType)p 883 224 2 50 v 1211 224
V 751 w Fv(The)h(library)e(routines)g(expect)p 1803 224
V 145 274 V 171 259 a Fs(MP)p 223 259 13 2 v 15 w(IdentifierType)p
883 274 2 50 v 1211 274 V 672 w Fv(C)h(strings)f(\(null-terminated)p
1803 274 V 145 324 V 171 309 a Fs(MP)p 223 309 13 2 v
15 w(OperatorType)p 883 324 2 50 v 1211 324 V 722 w Fv(character)i
(strings\))e(for)h(these)p 1803 324 V 145 374 V 171 359
a Fs(MP)p 223 359 13 2 v 15 w(MetaType)p 883 374 2 50
v 1211 374 V 822 w Fv(types)g(and)g(will)f(prepend)h(the)p
1803 374 V 145 424 V 171 409 a Fs(MP)p 223 409 13 2 v
15 w(MetaOperatorType)p 883 424 2 50 v 1211 424 V 622
w Fv(4-byte)f(length)g(\256eld.)p 1803 424 V 145 473
V 171 458 a Fs(MP)p 223 458 13 2 v 15 w(ConstantType)p
883 473 2 50 v 1211 473 V 1803 473 V 146 475 1658 2 v
146 485 V 145 535 2 50 v 171 520 a(MP)p 223 520 13 2
v 15 w(RawType)p 883 535 2 50 v 1211 535 V 826 w Fv(unsigned)g(long)h
(int)40 b(array)11 b(of)e(char)p 1803 535 V 146 536 1658
2 v 146 546 V 145 596 2 50 v 171 581 a Fs(MP)p 223 581
13 2 v 15 w(BooleanType)p 883 596 2 50 v 397 w(MP)p 960
581 13 2 v 15 w(Boolean)p 1150 581 V 14 w(t)p 1211 596
2 50 v 50 w Fv(unsigned)g(char)p 1803 596 V 145 646 V
171 631 a Fs(MP)p 223 631 13 2 v 15 w(CommonMetaType)p
883 646 2 50 v 322 w(MP)p 960 631 13 2 v 15 w(Common)p
1125 631 V 14 w(t)p 1211 646 2 50 v 75 w Fv(unsigned)g(char)p
1803 646 V 145 696 V 171 681 a Fs(MP)p 223 681 13 2 v
15 w(CommonMetaOperatorType)p 883 696 2 50 v 122 w(MP)p
960 681 13 2 v 15 w(Common)p 1125 681 V 14 w(t)p 1211
696 2 50 v 75 w Fv(unsigned)g(char)p 1803 696 V 145 746
V 171 731 a Fs(MP)p 223 731 13 2 v 15 w(CommonOperatorType)p
883 746 2 50 v 222 w(MP)p 960 731 13 2 v 15 w(Common)p
1125 731 V 14 w(t)p 1211 746 2 50 v 75 w Fv(unsigned)g(char)p
1803 746 V 145 795 V 171 781 a Fs(MP)p 223 781 13 2 v
15 w(CommonConstantType)p 883 795 2 50 v 222 w(MP)p 960
781 13 2 v 15 w(Common)p 1125 781 V 14 w(t)p 1211 795
2 50 v 75 w Fv(unsigned)g(char)p 1803 795 V 145 845 V
171 830 a Fs(MP)p 223 830 13 2 v 15 w(CommonLatinIdentifierType)p
883 845 2 50 v 47 w(MP)p 960 830 13 2 v 15 w(Common)p
1125 830 V 14 w(t)p 1211 845 2 50 v 75 w Fv(unsigned)g(char)p
1803 845 V 145 895 V 171 880 a Fs(MP)p 223 880 13 2 v
15 w(CommonGreekIdentifierType)p 883 895 2 50 v 47 w(MP)p
960 880 13 2 v 15 w(Common)p 1125 880 V 14 w(t)p 1211
895 2 50 v 75 w Fv(unsigned)g(char)p 1803 895 V 146 897
1658 2 v 146 907 V 145 957 2 50 v 171 942 a Fs(MP)p 223
942 13 2 v 15 w(Sint8Type)p 883 957 2 50 v 447 w(MP)p
960 942 13 2 v 15 w(Sint8)p 1100 942 V 15 w(t)p 1211
957 2 50 v 99 w Fv(signed)h(char)p 1803 957 V 145 1006
V 171 991 a Fs(MP)p 223 991 13 2 v 15 w(Uint8Type)p 883
1006 2 50 v 447 w(MP)p 960 991 13 2 v 15 w(Uint8)p 1100
991 V 15 w(t)p 1211 1006 2 50 v 99 w Fv(unsigned)f(char)p
1803 1006 V 145 1056 V 171 1041 a Fs(MP)p 223 1041 13
2 v 15 w(Sint32Type)p 883 1056 2 50 v 422 w(MP)p 960
1041 13 2 v 15 w(Sint32)p 1125 1041 V 14 w(t)p 1211 1056
2 50 v 75 w Fv(signed)h(long)f(int)p 1803 1056 V 145
1106 V 171 1091 a Fs(MP)p 223 1091 13 2 v 15 w(Uint32Type)p
883 1106 2 50 v 422 w(MP)p 960 1091 13 2 v 15 w(Uint32)p
1125 1091 V 14 w(t)p 1211 1106 2 50 v 75 w Fv(unsigned)g(long)h(int)p
1803 1106 V 145 1156 V 171 1141 a Fs(MP)p 223 1141 13
2 v 15 w(Real32Type)p 883 1156 2 50 v 422 w(MP)p 960
1141 13 2 v 15 w(Real32)p 1125 1141 V 14 w(t)p 1211 1156
2 50 v 75 w Fv(\257oat)p 1803 1156 V 145 1206 V 171 1191
a Fs(MP)p 223 1191 13 2 v 15 w(Real64Type)p 883 1206
2 50 v 422 w(MP)p 960 1191 13 2 v 15 w(Real64)p 1125
1191 V 14 w(t)p 1211 1206 2 50 v 75 w Fv(double)p 1803
1206 V 145 1255 V 171 1240 a Fs(MP)p 223 1240 13 2 v
15 w(ApIntType)p 883 1255 2 50 v 447 w(MP)p 960 1240
13 2 v 15 w(ApInt)p 1100 1240 V 15 w(t)p 1211 1255 2
50 v 99 w Fv(void)f(*)p 1803 1255 V 145 1305 V 171 1290
a Fs(MP)p 223 1290 13 2 v 15 w(ApRealType)p 883 1305
2 50 v 422 w(MP)p 960 1290 13 2 v 15 w(ApReat)p 1125
1290 V 14 w(t)p 1211 1305 2 50 v 75 w Fv(void)g(*)p 1803
1305 V 146 1307 1658 2 v 735 1398 a(T)m(able)i(3.1:)j(MP)d(-)f(C)g
(data)g(types)75 1532 y Fw(data)20 b Fv(The)11 b(actual)g(data)f(value)
g(\(e.g.,)i(7,)e(sin,)h(PI\).)75 1615 y Fw(dictionary)f(tag)20
b Fv(Gives)13 b(the)g(numeric)g(tag)h(of)f(the)g(dictionary)e(in)i
(which)g(the)g(node')n(s)g(value)g(is)g(de\256ned.)25
b(This)13 b(\256eld)g(is)179 1665 y(ignored)c(for)h(those)g(types)g
(whose)g(values)h(are)g(not)e(described)i(in)e(dictionaries.)75
1748 y Fw(number)i(of)f(annotations)19 b Fv(Each)13 b(node)e(of)g(the)g
(tree)g(may)h(be)g(annotated)f(with)f(supplemental)h(information.)16
b(This)11 b(\256eld)179 1798 y(speci\256es)g(the)f(number)g(of)g(such)h
(annotations)e(attached)h(to)g(the)g(node.)75 1881 y
Fw(number)h(of)f(arguments)21 b Fv(This)16 b(\256eld)g(is)g(only)f
(valid)g(for)h(operator)f(types)h(and)g(gives)g(the)g(number)g(of)g
(operands)g(the)179 1930 y(operator)9 b(takes.)16 b(This)10
b(\256eld)h(is)f(ignored)f(for)h(non-operator)e(types.)122
2013 y(A)15 b(node)g(packet)g(may)g(be)g(viewed)g(as)g(having)f(two)g
(parts:)23 b(a)16 b(header)f(and)g(a)g(body)m(.)28 b(T)m(ypically)14
b(the)h(value)g(\256eld)f(is)75 2063 y(found)7 b(in)h(the)h(body)e(and)
i(everything)e(else)i(is)f(contained)g(in)g(the)g(header)n(.)15
b(For)9 b(the)f(\252common\272)i(types)e(\()p Fs(MP_Sint8Type)p
Fv(,)75 2113 y Fs(MP_Uint8Type)p Fv(,)e Fs(MP_CommonMetaType)p
Fv(,)g Fs(MP_CommonOperatorType)p Fv(,)g Fs(MP_CommonConstantType)p
Fv(,)75 2163 y Fs(MP_CommonLatinIdentifierType)p Fv(,)f
Fs(MP_CommonGreekIdentifierType)p Fv(,)g Fs(MP_BooleanType)p
Fv(\),)75 2213 y(the)10 b(value)h(\256eld)f(is)g(moved)h(into)e(the)h
(header)n(,)i(providing)c(a)j(more)f(compact)h(representation.)k
(Hence,)d(for)e(ef)o(\256ciency)m(,)i(the)75 2263 y(common)f(types)g
(should)e(be)i(used)g(whenever)h(possible.)j(Of)c(these,)h(the)e
(common)i(operator)n(,)f(common)g(meta,)h(and)f(com-)75
2312 y(mon)f(constant)g(types)f(are)i(integer)f Fu(encodings)f
Fv(of)h(data.)16 b(The)11 b(mapping)e(from)h(integer)f(to)h
(operator/meta)g(type/constant\))75 2362 y(is)g(given)g(in)f(a)i
(dictionary)e(\(see)i(section)f(3.3\).)122 2412 y(The)i(MP)f(API)g
(provides)f(a)h(set)g(of)g(routines)f(to)g(put)g(and)h(get)g(packets)g
(for)g(each)h(of)f(the)f(MP)h(types.)17 b(For)11 b(example,)h(the)75
2462 y(routine)g Fs(MP)p 258 2462 13 2 v 15 w(PutSint32Packet\(\))f
Fv(puts)i(a)h(single)e(node)h(packet)h(containing)e(a)i(signed)e(32)h
(bit)f(integer)h(to)g(a)g(link)75 2512 y(and)d Fs(MP)p
197 2512 V 15 w(GetCommonOperatorPacket\(\))e Fv(gets)i(from)g(a)h
(link)e(a)i(node)f(packet)h(containing)d(a)j(common)g(operator)n(.)954
2754 y(19)p eop
%%Page: 20 21
20 20 bop 75 121 a Ff(3.2.2)50 b(data)12 b(limbs)75 199
y Fv(A)d(data)g(limb)e(contains)h(data)h Fu(only)p Fv(;)g(there)f(are)i
(no)e(additional)f(\256elds.)14 b(In)9 b(particular)n(,)f(there)h(is)g
(no)f(type)g(\256eld)g(to)g(identify)f(the)75 249 y(type)k(of)g(the)g
(data.)19 b(Data)12 b(limbs)e(are)j(used)e(as)h(an)g(optimization)d
(either)i(when)g(the)h(sender)f(and)h(receiver)g(have)g(agreed)g(in)75
299 y(advance)e(on)f(the)h(type)f(and)g(structure)g(of)g(the)g(data)h
(to)f(be)g(exchanged)h(or)f(that)g(information)f(is)h(provided)f
(elsewhere,)j(such)75 348 y(as)i(in)e(a)i(prototype)e(annotation)f
(\(see)j(section)f(4.3\).)21 b(Most)11 b(packet-level)i(routines)e
(have)h(data-limb)g(level)g(equivalents.)75 398 y(For)g(example,)h
Fs(IMP)p 385 398 13 2 v 15 w(PutSint32\(\))e Fv(puts)g(a)h(signed)g
(32-bit)e(integer)h(value)h(to)f(the)h(link)e(and)i Fs(IMP)p
1588 398 V 15 w(GetReal64\(\))75 448 y Fv(gets)g(a)g(64-bit)f(value)g
(from)h(the)g(link)f(which)g(it)g(interprets)g(as)i(a)f(64-bit)e(real)i
(number)n(.)20 b(The)13 b(common)f(types)g(don')o(t)f(have)75
498 y(corresponding)e(IMP)p 399 498 V 15 w(Put)g(routines.)75
616 y Ff(3.2.3)50 b(annotation)11 b(packet)75 694 y Fv(Any)f(node)g(of)
h(the)f(tree)h(may)g(have)g(zero)g(or)f(more)h(annotations)e(attached)i
(to)f(it.)15 b(Generally)10 b(an)h(annotation)e(is)h(a)h(piece)g(of)75
744 y(information)e(relevant)h(to)g(a)h(node')n(s)f(data,)h(but)f(is)g
(not)g(itself)g(an)h(operator)e(or)i(ar)o(gument)f(to)g(an)h(operator)n
(.)k(MP)c(provides)f(a)75 794 y(set)i(of)f(protocol-de\256ned)f
(annotations)g(and)h(users)h(may)g(supply)e(their)h(own.)18
b(The)12 b(decision)f(to)g(attach)h(an)g(annotation)d(is)75
844 y(made)i(by)f(the)g(sending)g(tool.)k(Annotations)8
b(may)137 927 y Ft(\017)21 b Fv(be)8 b(purely)f(incidental)g(and)h(of)g
(no)f(consequence)i(to)f(the)g(correct)g(interpretation)e(of)h(the)h
(node')n(s)f(data.)15 b(For)8 b(example,)179 976 y Fs(Comment)24
b(``This)g(solution)h(works)f(best'')p Fv(.)137 1059
y Ft(\017)d Fv(provide)11 b(additional)f(interpretive)g(information)g
(that)h(may)h(be)h(useful)e(to)g(have,)i(but)e(is)h(not)f(critical)g
(to)g(the)h(data')n(s)179 1109 y(interpretation.)h(W)n(ith)d(the)g
Fl(unit)f(of)h(measurement)i Fv(annotation,)d(for)h(instance,)g(a)h
(user)g(can)g(specify)f(that)g(the)g(value)179 1159 y(sent)g(is)g(in)g
(feet,)h(miles,)f(joules,)g(liters,)g(etc.)137 1242 y
Ft(\017)21 b Fv(be)10 b(required)f(for)h(correct)g(decoding)f(of)h
(data.)15 b(For)10 b(instance,)g(MP)g(uses)h(the)f Fl(prototype)e
Fv(annotation)g(to)h(specify)h(the)179 1292 y(format)h(of)f(a)i
(special)f(block)f(of)h(data.)18 b(W)n(ithout)9 b(the)i(prototype,)f
(the)g(block)h(of)f(data)i(is)e(a)i(meaningless)f(collection)179
1342 y(of)h(bytes.)23 b(The)13 b(same)h(applies)f(to)f(MP-de\256ned)h
(annotations)e(used)i(for)f(optimizing)f(purposes)h(including)f
Fl(label)p Fv(,)179 1392 y Fl(reference)p Fv(,)k Fl(store)p
Fv(,)f Fl(stored)p Fv(,)g(and)f Fl(retrieve)p Fv(.)23
b(Such)13 b(annotations)f(are)h(tagged)g(with)f(the)h
Fu(r)n(equir)n(ed)h Fv(bit)e(set)h(to)f(1)h(\(see)179
1441 y(table)d(3.2)g(and)g(below\).)75 1524 y(An)g(annotation)f(packet)
h(has)h(three)g(\256elds:)75 1607 y Fw(annotation)e(type)21
b Fv(An)10 b(integer)f(identifying)f(the)i(annotation)f(type)h(\(e.g.,)
h Fs(MP_AnnotProtoPrototype)p Fv(\).)75 1690 y Fw(dictionary)f(tag)20
b Fv(Gives)10 b(the)g(numeric)h(tag)f(of)g(the)h(dictionary)e(in)g
(which)h(the)h(annotation')n(s)d(type)i(and)h(its)f(characteristics)179
1740 y(are)e(de\256ned.)15 b(The)8 b(tag)f(value)h(indicates)f(whether)
h(the)f(annotation)f(is)h(MP-)h(or)f(user)o(-de\256ned)h(\(see)h(the)e
(next)g(section\).)75 1823 y Fw(\257ags)20 b Fv(Three)12
b(\257ags)e(further)g(establish)f(an)i(annotation')n(s)d(meaning)j(and)
f(importance:)179 1906 y Fs(MP)p 231 1906 V 15 w(AnnotRequired)19
b Fv(indicates)14 b(that)f(the)g(annotation)f(carries)j(some)f
(information)e(essential)i(for)f(properly)270 1956 y(decoding)8
b(the)g(data)g(stream)h(and/or)f(understanding)e(the)i(data')n(s)g
(meaning.)15 b(A)8 b(tool)f(receiving)h(an)g(expression)270
2006 y(tagged)h(with)g(a)h(required)f(annotation)f(should)g(be)i(able)g
(to)f(process)h(the)f(annotation.)14 b(If)9 b(it)g(cannot,)h(generally)
270 2056 y(it)g(should)g(return)h(an)g(error)g(and/or)f(skip)g(the)h
(subexpression)g(tagged)f(with)g(this)h(annotation.)16
b(The)11 b(receiver)270 2106 y(may)m(,)j(however)n(,)g(attempt)e(to)g
(process)h(the)f(data,)h(but)f(does)g(so)h(at)f(it)g(its)f(own)h(risk.)
21 b(Conversely)m(,)13 b(when)f(the)270 2155 y(\257ag)d(is)g(cleared,)h
(the)f(annotation)e(is)h(said)h(to)f(be)h(supplemental.)15
b(There)9 b(should)f(be)h(no)f(harm)h(in)f(disregarding)270
2205 y(a)j(supplemental)f(annotation.)179 2272 y Fs(MP)p
231 2272 V 15 w(AnnotValuated)19 b Fv(indicates)12 b(that)g(the)g
(annotation)e(has)j(an)f(ar)o(gument)h(which)f(is)g(given)f(as)i(an)g
(MP)f(T)o(ree.)270 2321 y(The)g(ar)o(gument)g(must)f(immediately)g
(follow)f(the)h(annotation)f(in)h(the)g(data)h(stream.)20
b(By)11 b(contrast,)g(a)h(simple)270 2371 y(annotation)d(takes)h(no)g
(ar)o(gument.)179 2438 y Fs(MP)p 231 2438 V 15 w(AnnotTreeScope)19
b Fv(determines)c(whether)g(the)g(annotation)e(applies)i(only)e(to)i
(the)g(node)f(to)h(which)f(it)g(is)270 2487 y(attached)d(or)f(to)f(the)
i(entire)e(subtree)i(rooted)e(at)h(that)g(node.)954 2754
y(20)p eop
%%Page: 21 22
21 21 bop 548 76 854 2 v 547 121 2 46 v 573 108 a Fe(Annotation)9
b(Flag)p 969 121 V 192 w(Cleared)g(\(0\))p 1218 121 V
81 w(Set)g(\(1\))p 1401 121 V 548 123 854 2 v 547 169
2 46 v 573 155 a Fk(MP)p 619 155 12 2 v 14 w(AnnotReq)q(ui)q(red)p
969 169 2 46 v 76 w Fe(supplemental)p 1218 169 V 52 w(required)p
1401 169 V 547 214 V 573 201 a Fk(MP)p 619 201 12 2 v
14 w(AnnotVal)q(ua)q(ted)p 969 214 2 46 v 126 w Fe(simple)p
1218 214 V 102 w(valuated)p 1401 214 V 547 260 V 573
246 a Fk(MP)p 619 246 12 2 v 14 w(AnnotTre)q(eS)q(cop)q(e)p
969 260 2 46 v 116 w Fe(node)p 1218 260 V 112 w(\(sub\)tree)p
1401 260 V 548 262 854 2 v 667 341 a Fv(T)m(able)i(3.2:)k(MP)10
b(annotation)f(\257ag)h(values)75 475 y Fm(3.3)58 b(MP)14
b(Dictionaries)75 568 y Fv(MP)j(supports)f(collections)g(of)g
(de\256nitions)g(of)g(mathematical)i(symbols)e(\(symbolic)g(constants)h
(and)g(operators\))f(and)75 617 y(annotations)11 b(in)h(dictionaries.)
22 b(A)12 b(dictionary)f(is)i(an)g(of)o(\257ine,)g(human-readable)g
(document)g(containing)e(a)i(list)f(of)g(items)75 667
y(together)f(with)g(their)g(meaning.)21 b(The)13 b(de\256nition)d(may)j
(be)f(formal)g(or)f(informal,)h(but)g(must)f(be)i(suf)o(\256ciently)e
(precise)i(for)75 717 y(a)g(reader)h(to)e(understand)g(it.)22
b(Each)14 b(dictionary)d(has)i(a)h(character)g(string)d(name)j(which)e
(uniquely)f(identi\256es)i(it)f(to)g(users)75 767 y(\(e.g.,)k
(PolynomialDictionary\).)24 b(When)14 b(used)g(in)f(association)h(with)
f(an)h(MP)g(T)o(ree)h(for)f(data)g(exchange,)i(a)f(dictionary)75
817 y(is)e(speci\256ed)h(by)e(a)i(tag)f(number)f(which)h(uniquely)e
(identi\256es)i(it)f(to)g(other)h(processes.)25 b(There)13
b(are)h(256)f(dictionary)e(tags)75 866 y(available)i(that)f(can)i(be)f
(encoded)g(within)f(the)g(node)h(packet)g(header)h(\(2)1144
851 y Fp(16)1188 866 y Fv(for)e(annotations\).)22 b(They)13
b(are)h(distributed)c(as)75 916 y(shown)g(in)f(table)i(3.3.)p
75 1014 1805 2 v 74 1064 2 50 v 147 1049 a(T)m(ag)p 280
1064 V 280 1064 V 328 w(De\256ne)p 902 1064 V 902 1064
V 649 w(Description)p 1879 1064 V 75 1065 1805 2 v 74
1115 2 50 v 167 1100 a(0)p 280 1115 V 117 w Fs(MP_BasicDict)p
902 1115 V 323 w Fv(MP-de\256ned)f(\252basic\272)i(dictionary)p
1879 1115 V 74 1165 V 121 1150 a(1...127)p 280 1165 V
902 1165 V 693 w(less-basic)f(MP-de\256ned)f(dictionaries)p
1879 1165 V 74 1215 V 147 1200 a(128)p 280 1215 V 95
w Fs(MP_NoSemanticsDict)p 902 1215 V 173 w Fv(no)g(semantics)h(at)f
(all)p 1879 1215 V 74 1265 V 147 1250 a(129)p 280 1265
V 95 w Fs(MP_ReceiverDict)p 902 1265 V 248 w Fv(semantics)h(of)f(the)g
(receiver)p 1879 1265 V 74 1315 V 147 1300 a(130)p 280
1315 V 95 w Fs(MP_UnavailSemanticsDict)p 902 1315 V 48
w Fv(semantics)h(exist)f(but)f(are)i(not)f(available)g(via)g(a)h
(dictionary)p 1879 1315 V 74 1364 V 147 1349 a(131)p
280 1364 V 95 w Fs(MP_StringNameDict)p 902 1364 V 198
w Fv(dict)f(name)h(supplied)e(as)i(a)g(string)e(in)g(the)i(packet')n(s)
f(value)g(\256eld)p 1879 1364 V 74 1414 V 100 1399 a(132...154)p
280 1414 V 902 1414 V 672 w(reserved)h(for)f(future)f(extensions)p
1879 1414 V 74 1464 V 147 1449 a(155)p 280 1464 V 95
w Fs(MP_LocalDict)p 902 1464 V 323 w Fv(for)h(dictionary)f
(development/local)g(use)p 1879 1464 V 74 1514 V 100
1499 a(156...254)p 280 1514 V 902 1514 V 672 w(user)o(-de\256ned)i
(\252basic\272)g(dictionaries)p 1879 1514 V 74 1564 V
147 1549 a(255)p 280 1564 V 95 w Fs(MP_ExtraTagDict)p
902 1564 V 248 w Fv(other)f(dictionaries)f(\(read)h(extra)h(tag)f
(\256eld\))p 1879 1564 V 75 1565 1805 2 v 757 1680 a(T)m(able)h(3.3:)k
(Dictionary)9 b(tags)122 1788 y(Dictionaries)g(for)g(particularly)f
(common)j(constants,)e(annotations,)g(and)h(operators)f(are)i
(de\256ned)f(by)f(MP)-5 b(.)11 b(The)f(entries)75 1838
y(in)k(the)g(MP-provided)f(dictionaries)h(are)h(implemented)f(as)i(C)e
(\252de\256nes\272.)29 b(The)16 b(complete)e(hierarchy)h(of)f
(MP-de\256ned)75 1888 y(dictionaries)9 b(is)i(not)f(yet)g(speci\256ed.)
17 b(At)11 b(the)f(moment,)h(there)g(are)h(following)c(preliminary)h
(MP)i(dictionaries:)j(where)d(the)p 152 1990 1647 2 v
151 2040 2 50 v 177 2025 a(T)m(ag)p 262 2040 V 262 2040
V 157 w(De\256ne)p 636 2040 V 636 2040 V 252 w(Header)g(\256le)p
1059 2040 V 1059 2040 V 338 w(De\256nes)g(values)g(for)p
1797 2040 V 152 2042 1647 2 v 151 2091 2 50 v 197 2076
a(0)p 262 2091 V 70 w Fs(MP_BasicDict)p 636 2091 V 74
w(MP_BasicDict.h)p 1059 2091 V 73 w Fv(\252Basic\272)h(constructs)d
(like)h Fo(+)p Fq(;)d Ft(\000)p Fq(;)g Ft(\003)p Fq(;)g(=;)g
Fv(sin)m(,)k(etc)p 1797 2091 V 151 2141 V 197 2126 a(2)p
262 2141 V 70 w Fs(MP_MpDict)p 636 2141 V 149 w(MP_MpDict.h)p
1059 2141 V 148 w Fv(Internal)f(MP)g(use)h(like)e(negotiations)p
1797 2141 V 151 2191 V 197 2176 a(6)p 262 2191 V 70 w
Fs(MP_ProtoDict)p 636 2191 V 74 w(MP_PrototDict.h)p 1059
2191 V 48 w Fv(communication)h(of)g(Prototyped)e(MP)j(trees)p
1797 2191 V 151 2241 V 187 2226 a(10)p 262 2241 V 59
w Fs(MP_PolyDict)p 636 2241 V 99 w(MP_PolyDict.h)p 1059
2241 V 98 w Fv(communication)f(of)g(polynomial)e(data)p
1797 2241 V 151 2291 V 187 2276 a(11)p 262 2291 V 59
w Fs(MP_MatrixDict)p 636 2291 V 49 w(MP_MatrixDict.h)p
1059 2291 V 48 w Fv(Linear)j(Algebra)p 1797 2291 V 151
2340 V 187 2325 a(12)p 262 2340 V 59 w Fs(MP_NumberDict)p
636 2340 V 49 w(MP_NumberDict.h)p 1059 2340 V 48 w Fv(Number)f(Theory)p
1797 2340 V 152 2342 1647 2 v 575 2416 a(T)m(able)h(3.4:)k(Existing)8
b(Preliminary)i(MP)g(dictionaries)75 2557 y(respective)h(header)g
(\256les)f(can)h(be)g(found)e(in)h(the)g Fs(MP/h)g Fv(dirctory)f(of)h
(hte)g(MP)g(distribution)o(.)122 2607 y(Some)j(of)e(the)h(tags)g(are)g
(explained)g(in)f(more)h(detail)f(below)m(.)20 b(The)13
b(details)e(of)h(how)f(the)h(tag)f(is)h(handled)f(internally)f(by)954
2754 y(21)p eop
%%Page: 22 23
22 22 bop 75 121 a Fv(MP)10 b(are)g(not)f(important)f(for)h(the)g
(programmer)h(to)f(know)m(.)14 b(T)m(o)c(use)g(a)g(dictionary)m(,)f
(the)g(programmer)h(needs)g(to)f(have)h(access)75 171
y(to)g(the)g(dictionary)e(source)j(and)g(understand)e(its)h(contents.)
96 240 y(128)20 b(The)11 b(node')n(s)e(value)i(has)f(no)g(meaning)h
(for)e(the)i(sender)f(and)h(the)f(receiver)h(should)e(attach)h(no)g
(local)g(meaning)h(to)e(it.)96 315 y(129)20 b(The)10
b(sender)g(is)f(not)g(attaching)f(any)i(speci\256c)g(semantics)h(to)d
(the)i(node)f(and)g(is)h(relying)e(on)h(the)g(receiver)i(to)d
(interpret)179 365 y(it)h(according)h(to)f(local)h(semantics.)16
b(This)10 b(is)f(especially)h(useful)g(where)g(the)g(sender)g(has)h
(de\256ned)f(a)h(function)d(in)h(the)179 415 y(receiver)n(,)j(hence)f
(there)f(can)h(be)g(no)f(de\256nition)e(for)i(the)g(function)f(in)g(a)i
(statically)e(de\256ned)i(dictionary)m(.)96 491 y(130)20
b(The)8 b(semantics)h(of)f(the)g(node')n(s)f(value)h(exists)g(but)f(is)
h(not)f(available)h(to)f(the)h(receiver)g(\(that)g(is,)g(the)g
(receiving)g(process)179 541 y(has)h(no)g(possibility)e(of)i(being)f
(able)i(to)e(use)i(the)f(node')n(s)g(meaning,)h(however)f(it)g(could)f
(retrieve)h(that)g(meaning)g(from)179 590 y(the)h(sender\).)96
666 y(131)20 b(This)10 b(tag)f(indicates)h(that)f(the)h(actual)g
(dictionary)f(used)h(is)f(given)h(as)g(a)h(string)d(as)j
Fu(pr)n(e\256x)g(of)e Fv(the)h(packet')n(s)g Fu(value)p
Fv(.)15 b(For)179 716 y(example,)c(\252PolynomialDictionary::Ad)o
(d\272.)96 792 y(155)20 b(Reserved)13 b(to)g(people)g(developing/using)
d(a)k(local)e(dictionary)m(.)23 b(This)13 b(provides)f(a)i(tag)f(that)f
(is)h(guaranteed)g(to)g(be)179 842 y(available)d(\(at)g(least)h
(locally\))e(for)h(experimentation.)96 917 y(255)20 b(indicates)11
b(to)f(the)h(MP)h(software)f(that)f(another)h(\256eld)g(containing)f
(the)h(tag)g(number)g(of)g(a)h(dictionary)d(immediately)179
967 y(follows)g(the)i(packet)g(header)g(and)g(must)g(be)g(read)g(in)f
(to)g(determine)h(which)f(dictionary)g(de\256nes)h(the)f(node')n(s)h
(value.)179 1017 y(The)k(division)e(of)h(these)i(extended)e(tags)h
(between)h(MP)e(and)h(non-MP)f(dictionaries)g(will)f(be)j(determined)e
(later)179 1067 y(when)c(\(if\))f(they)h(are)h(needed.)75
1203 y Fm(3.4)58 b(MP)14 b(T)l(r)o(ees)75 1296 y Fv(An)c(MP)g(T)o(ree)h
(is)f(a)g(linearized)g(version)g(of)f(an)i(annotated)e(parse)i(tree)g
(is)e(formed)i(from)e(a)i(pre\256x)f(parse)h(of)f(the)g(tree.)15
b(Node)75 1346 y(packets)c(are)f(distinguished)e(from)i(annotation)e
(packets)j(by)e(their)g(position)f(in)i(the)f(stream)i(of)f(packets.)16
b(This)10 b(ordering)e(is)75 1395 y(well-de\256ned)j(since)h(every)g
(tree)f(must)h(begin)e(with)h(a)h(node)f(packet,)i(every)e(node)h
(speci\256es)g(the)f(number)h(of)f(annotation)75 1445
y(packets)h(associated)g(with)e(it,)h(annotations)e(immediately)i
(follow)f(the)h(node)g(with)f(which)h(they)g(are)h(associated,)g(and)f
(the)75 1495 y(operands)f(of)g(operator)g(nodes)g(follow)m(,)g(in)f
(order)n(,)i(the)f(last)g(annotation)f(packet)h(related)h(to)e(their)h
(parent.)122 1545 y(Figure)g(3.1)g(gives)g(a)h(stylized)f(MP)g(T)o(ree)
h(corresponding)e(to)g(the)i(parse)g(tree)f(in)g(Figure)g(1.1.)804
1666 y(Figure)g(3.1:)k(MP)c(T)o(ree)p 264 1716 1422 2
v 263 1762 2 46 v 276 1748 a Fe(T)m(ype)225 b(Dict)92
b(V)l(alue)230 b(#Annot:Ar)o(g)24 b(Remarks)p 1685 1762
V 264 1764 1422 2 v 263 1809 2 46 v 276 1795 a(Cop)237
b(Basic)72 b(CopBasicDiv)113 b(1:2)156 b(Common)8 b(Operator)h(node)f
(Pkt)p 1685 1809 V 263 1855 V 276 1841 a(AP)252 b(Basic)72
b(AnnotMpComment)226 b(Annotation)8 b(Pkt)p 1685 1855
V 263 1901 V 276 1887 a(String)365 b(gradient)397 b(annotation)8
b(ar)o(gument)p 1685 1901 V 263 1946 V 276 1932 a(Cop)237
b(Basic)72 b(CopBasicMult)97 b(0:2)p 1685 1946 V 263
1992 V 276 1978 a(CommonIdenti\256er)23 b(Receiver)f(a)299
b(0:)175 b(Common)8 b(Id)i(node)e(Pkt)p 1685 1992 V 263
2037 V 276 2024 a(Cop)237 b(Basic)72 b(CopBasicMinus)h(0:2)p
1685 2037 V 263 2083 V 276 2069 a(Identi\256er)163 b(Receiver)22
b(x2)278 b(0:)175 b(Identi\256er)9 b(node)f(Pkt)p 1685
2083 V 263 2129 V 276 2115 a(Identi\256er)163 b(Receiver)22
b(x1)278 b(0:)p 1685 2129 V 263 2174 V 276 2161 a(Cop)237
b(Basic)72 b(CopBasicMinus)h(0:2)p 1685 2174 V 263 2220
V 276 2206 a(Identi\256er)163 b(Receiver)22 b(x2)278
b(0:)p 1685 2220 V 263 2266 V 276 2252 a(Identi\256er)163
b(Receiver)22 b(x1)278 b(0:)p 1685 2266 V 264 2267 1422
2 v 75 2438 a Fm(3.5)58 b(Sending)16 b(and)f(Receiving)f(Messages)75
2530 y Fv(As)8 b(indicated)g(earlier)n(,)h(data)f(is)g(exchanged)h(in)e
Fl(messages)j Fv(with)d(one)h(or)g(more)g(MP)g(T)o(rees)h
(\(expressions\))e(contained)h(within)75 2580 y(a)14
b(single)f(message.)28 b(There)14 b(is)g(a)g(very)g(important)e
(synchronizing)g(action)i(between)g(the)f(sender)i(and)e(receiver\(s\))
i(that)75 2630 y(must)10 b(be)h(carefully)f(observed.)954
2754 y(22)p eop
%%Page: 23 24
23 23 bop 75 94 1793 2 v 75 314 2 221 v 102 161 a Fk(MP_Status_)q(t)26
b(MP_EndMsg)g(\(MP_Link_p)q(t)g(link\))102 217 y(MP_Status_)q(t)g
(MP_ResetLi)q(nk)g(\(MP_Link_)q(pt)g(link\))102 272 y(MP_Status_)q(t)g
(MP_EndMsgR)q(es)q(et\()q(MP)q(_Li)q(nk)q(_p)q(t)f(link\))p
1866 314 V 75 316 1793 2 v 681 399 a Fv(T)m(able)11 b(3.5:)j
(Completing)9 b(the)h(message)122 533 y(On)k(the)g Fu(sending)f(side)p
Fv(,)j(the)e(end)g(of)g(a)g(message)i(is)e(marked)h(with)e(a)h(call)h
(to)e Fs(MP)p 1337 533 13 2 v 15 w(EndMsg\(\))p Fv(.)26
b(This)14 b(call)g(updates)75 583 y(information)c(in)i(the)g(link)f
(indicating)g(that)g(this)h(is)g(the)g(last)g(fragment)g(in)g(a)g
(complete)h(message)h(and)e(calls)h(a)g(transport-)75
633 y(speci\256c)e(routine)e(to)h(hand)g(the)g(data)h(over)f(to)f(the)h
(underlying)f(data)h(delivery)g(device.)122 682 y Fs(MP_ResetLink\(\))i
Fv(prepares)h(a)g(link)e(for)h(the)h(next)f(message)i
Fu(after)e Fv(a)h(call)g(to)f Fs(MP)p 1399 682 V 15 w(EndMsg\(\))g
Fv(has)h(\257ushed)f(the)75 732 y(previous)g(message)j(to)e(the)g
(transport)e(device.)25 b(T)m(ypically)12 b(this)g(reset)i(would)e(be)i
(done)e(immediately)h(after)h(the)f(call)g(to)75 782
y Fs(MP)p 127 782 V 15 w(EndMsg\(\))p Fv(,)c(but)g(it)f(can)i(be)g
(delayed.)15 b(However)10 b(it)e(must)h(be)h(called)g
Fu(prior)e Fv(to)h(assembling)g(another)g(message)j(in)c(the)75
832 y(link')n(s)h(send)h(buf)o(fer)n(.)15 b(For)10 b(convenience,)h
(the)f(function)f Fs(MP)p 946 832 V 15 w(EndMsgReset\(\))g
Fv(performs)h(both)f(actions.)p 75 904 1793 2 v 75 1180
2 277 v 102 972 a Fk(MP_Status_)q(t)48 b(MP_SkipMs)q(g\()q(MP_)q(Li)q
(nk_)q(pt)26 b(link\))102 1027 y(MP_Status_)q(t)48 b(MP_InitMs)q(g\()q
(MP_)q(Li)q(nk_)q(pt)26 b(link\))102 1082 y(MP_Boolean)q(_t)g
(MP_TestEo)q(fM)q(sg\()q(MP)q(_Li)q(nk)q(_p)q(t)f(link\))102
1138 y(MP_Boolean)q(_t)h(MP_GetLin)q(kS)q(tat)q(us)q(\(MP)q(_L)q(in)q
(k_p)q(t)g(link,)e(int)g(status_to)q(_ch)q(ec)q(k\))p
1866 1180 V 75 1182 1793 2 v 521 1265 a Fv(T)m(able)11
b(3.6:)j(Routines)9 b(for)h(preparing)f(to)h(receive)h(a)g(message)122
1365 y Fs(MP_SkipMsg\(\))g Fv(is)h(the)f Fu(r)n(eceiving)i(side)p
Fv(')n(s)f(complementary)g(operation)f(to)g(the)h(sending)f(side')n(s)h
Fs(MP)p 1653 1365 13 2 v 14 w(EndMsg\(\))p Fv(.)75 1415
y(It)g(ensures)g(proper)g(message)i(alignment)d(before)i(reading)e(a)i
(message)h(by)e(consuming)f(\(skipping\))f(all)i(remaining)g(data)75
1465 y(in)f(the)h(current)g(message)i(and)e(is)g(to)f(be)h(called)h
Fu(befor)n(e)f(each)h Fv(new)f(message)i(is)d(read.)22
b(It)11 b(does)h Fu(not)f Fv(load)h(any)g(data)g(from)75
1514 y(the)f Fu(next)g Fv(message)i(into)d(the)h(link)f(and)h
(therefore)g(is)g(a)g Fu(non-blocking)f Fv(procedure.)17
b(Actual)11 b(loading)f(will)g(be)h(done)g(by)g(an)75
1564 y(explicit)e(request)h(to)g(read)h(in)e(some)i(MP)g(data)f
(\(through)f(one)h(of)g(the)g(get)g(routines\).)122 1614
y(Alternatively)m(,)15 b Fs(MP_InitMsg\(\))g Fv(may)g(be)h(called)f(in)
g(place)g(of)g Fs(MP_SkipMsg\(\))p Fv(.)29 b(The)16 b(dif)o(ference)g
(between)75 1664 y(the)e(two)g(is)h(that)e Fs(MP_InitMsg\(\))h
Fv(it)g(will)f(begin)h(loading)f(the)h(next)g(message)j(into)c(the)h
(link')n(s)f(buf)o(fers.)28 b(This)14 b(is)h(a)75 1714
y Fu(blocking)d Fv(read,)i(i.e.,)h(a)f(call)f(to)f Fs(MP_InitMsg\(\))g
Fv(will)g(block)g(as)h(long)f(as)i(there)f(no)f(data)i(to)e(be)h(read)h
(from)e(the)h(link.)75 1764 y Fs(MP_TestEofMsg\(\))e
Fv(can)h(be)g(called)g(to)g(determine)g(if)f(the)h(current)f(message)j
(has)e(been)h(completely)e(consumed.)21 b(It)75 1813
y(returns)11 b Fs(MP)p 254 1813 V 15 w(TRUE)g Fv(if)g(the)g(end)g(of)h
(the)f(current)g(message)i(on)e(the)h(link)e(has)i(been)f(reached,)j
(else)e(it)f(returns)f Fs(MP)p 1727 1813 V 15 w(FALSE)p
Fv(.)75 1863 y(A)j(useful)f(convention)f(is)h(to)g(transmit)g(a)h
(single)f(expression)g(per)g(message.)24 b(This)13 b(provides)e(a)i
(uniform)f(level)g(of)g(error)75 1913 y(recovery)j(and)f(allows)g(the)h
(receiving)f(side)g(to)g(ef)o(\256ciently)h(skip)f(to)f(the)i(end)f(of)
h(an)f(expression)h(\(message\))h(it)d(cannot)75 1963
y(process.)122 2013 y Fs(MP_GetLinkStatus\(\))g Fv(can)i(be)f(used)h
(to)e(determine)h(if)g(the)g(device)h(is)f(ready)g(for)g(reading)g(or)f
(writing.)25 b(The)75 2062 y(ar)o(gument)15 b Fs(status)p
398 2062 V 14 w(to)p 462 2062 V 15 w(check)g Fv(must)f(be)h(either)g
Fs(MP)p 926 2062 V 14 w(LinkReadyReading)f Fv(or)g Fs(MP)p
1453 2062 V 15 w(LinkReadyWriting)p Fv(.)75 2112 y(The)e(routine)f
(returns)g Fs(MP)p 460 2112 V 15 w(TRUE)g Fv(if)g(the)h(status)f
(condition)f(to)h(check)i(is)e(true)h(according)f(to)g(the)h(link')n(s)
e(underlying)g(data)75 2162 y(delivery)f(device,)j(else)e(it)g(returns)
g Fs(MP)p 637 2162 V 14 w(FALSE)p Fv(.)h(This)f(call)g(will)f(not)g
(block.)122 2212 y(The)i(synchronization)e(of)h(sends)g(and)h(receives)
g(is)f(illustrated)e(in)i(\256gure)g(3.2.)75 2352 y Fm(3.6)58
b(Sending)16 b(Data)f(with)g(MP)75 2444 y Fv(Packet-level)f(routines)e
(are)i(provided)f(for)g(sending)f(each)j(of)e(the)h(MP)f(types.)25
b(These)14 b(routines)f(put)f(a)j(complete)e(node)75
2494 y(packet)c(\(node)g(type,)g(dictionary)e(tag,)j(number)e(of)h
(annotations,)f(number)h(of)g(ar)o(guments,)g(and)g(data)g(value\))g
(or)g(annotation)75 2544 y(packet)k(\(annotation)d(type,)j(dictionary)d
(tag)i(and)g(\257ags\))h(to)e(the)h(send)h(buf)o(fer)f(associated)g
(with)f(a)i(link)e(and)h(are)h(prefaced)75 2594 y(with)8
b Fs(MP)p 210 2594 V 14 w Fv(.)15 b(No)9 b(error)f(checking)h(is)g
(done)f(on)h(the)f(ar)o(guments.)15 b(In)9 b(particular)n(,)g(there)g
(is)f(no)h(attempt)f(to)g(verify)g(that)g(pointers)954
2754 y(23)p eop
%%Page: 24 25
24 24 bop 75 121 a Fv(are)15 b(not)f(null.)27 b(Routines)13
b(which)h(handle)g(the)g(string-based)g(types)g(\(see)i(table)e(3.1\))g
(expect)h(a)g(valid)f(C)g(string)f(for)h(the)75 171 y(data)e(value.)20
b(On)12 b(success,)i(these)e(routines)f(return)g Fs(MP)p
892 171 13 2 v 15 w(Success)p Fv(;)h(on)f(failure,)h(they)g(return)f
(either)g Fs(MP)p 1641 171 V 15 w(Failure)g Fv(or)75
221 y(a)g(speci\256c)h(error)e(value)h(accessible)h(through)d(the)h
(link')n(s)f(error)i(variable.)16 b(The)11 b(function)e
Fs(MP)p 1445 221 V 15 w(PrintError\(\))g Fv(can)j(be)75
271 y(used)e(to)g(determine)h(the)f(cause)h(of)f(the)g(failure.)15
b(If)10 b(present,)h(the)f(log)f(\256le)i(may)f(also)h(contain)e
(useful)h(information.)122 321 y(Packet)h(level)e(routines)g(take)h(at)
g(least)f(three)h(ar)o(guments:)15 b(The)10 b(\256rst)f(one)h(is)g(the)
f(\(presumed)h(to)f(be)h(open\))g(link,)f(and)g(the)75
370 y(last)g(one)g(is)g(the)g(number)o(-of-annotation)d(\256eld)j(\()p
Fs(na\))g Fv(which)g(speci\256es)h(the)f(number)g(of)f(annotations)g
(that)g(are)i(attached)g(to)75 420 y(the)g(packet.)15
b(The)c(annotations)d(must)i(immediately)f(follow)f(the)i(node)g
(packet)g(\(see)h(section)e(3.8\).)15 b(There)c(is)f(a)g(symmetry)75
470 y(between)h(the)f(put)f(and)i(get)f(routines.)k(For)c(each)h
(put-packet)f(routine,)f(there)i(is)f(a)g(corresponding)f(get-packet)i
(routine.)122 520 y(Most)j(types)f(also)h(have)g(equivalents)f(for)g
(sending)g(a)i(data)f(limb.)25 b(These)15 b(lower)e(level)h(routines)f
(only)f(send)i(a)h(data)75 570 y(value)10 b(and)h(are)g(prefaced)g
(with)f Fs(IMP)p 622 570 V 14 w Fv(.)16 b(This)10 b(is)g(useful)g(on)g
(the)g(receiving)g(side)h(when)f(the)g(type)g(of)g(the)g(incoming)g
(packet)75 619 y(may)f(not)f(be)h(known)f(in)g(advance)h(and)g(it)f(is)
g(necessary)i(to)e(retrieve)h(the)f(node)g(packet)h(header)h
(separately)f(from)f(the)h(packet)75 669 y(body)m(.)25
b(It)14 b(also)f(provides)g(a)i(mechanism)g(for)e(more)h(compact)h(and)
f(ef)o(\256cient)g(communications)f(of)h(homogenous)f(data)75
719 y(based)h(on)f(the)h(speci\256cations)f(of)g(the)h(prototype)e
(dictionary)g(\()p Fs(MP_ProtoDict)p Fv(\).)23 b(The)14
b(basic)g(idea)g(is)f(to)g(avoid)g(the)75 769 y(overhead)c(of)g
(communicating)g(the)g(packet)g(header)h(for)e(each)j(datum)e(in)f(a)i
(homogenous)e(data)i(object.)k(This)9 b(is)g(discussed)75
819 y(more)i(fully)d(in)i(the)g(section)g(on)g(prototypes)f(\()p
Ft(x)p Fv(4.3\).)122 869 y(T)m(o)15 b(send)f(a)h(packet)g(in)f
(piecemeal)i(fashion,)f(one)f(must)g(\256rst)g(call)g
Fs(IMP)p 1203 869 V 15 w(PutNodeHeader\(\))p Fv(,)h(then)e(the)i
(appro-)75 918 y(priate)g Fs(IMP)p 262 918 V 15 w(Put)p
Fq(<)p Fl(type)p Fq(>)p Fs(\(\))g Fv(routine.)30 b(For)15
b(example,)j(the)e(packet-level)f(call)h Fs(MP)p 1364
918 V 15 w(PutSint32Packet\(...\))75 968 y Fv(is)d(equivalent)f(to:)19
b Fs(IMP)p 443 968 V 14 w(PutNodeHeader\(...\);)k(IMP)p
1030 968 V 15 w(PutSint32\(...\))p Fv(.)f Fu(Note)12
b Fv(that)h(there)g(are)g(no)g(data)75 1018 y(level)e(routines)f(for)g
(the)h(\252common\272)h(types)f(as)h(they)e(\256t)h(within)e(the)i
(node)g(packet)h(header)n(.)18 b(Also,)11 b(there)g(is)g(no)f
(data-level)75 1068 y(routine)h(for)h(annotations)f(since)i(they)f(are)
i(not)d(composed)i(of)f(multiple)f(parts)i(as)g(node)f(packets)h(are)h
(\(e.g.,)g(header)f(and)75 1118 y(body\))c(.)75 1236
y Ff(3.6.1)50 b(sending)12 b(numeric)h(data)122 1314
y Fv(The)g Fs(MP_Put)e Fv(routines)f(in)h(table)h(3.7)g(put)e(a)j
(boolean,)f(integer)n(,)g(or)f(real)h Fu(node)f Fv(packet)i(to)e(the)g
(link.)18 b(The)13 b Fs(IMP_Put)75 1364 y Fv(routines)8
b(put)g(an)h(integer)f(or)g(real)i Fu(data)d(limb)h Fv(to)g(the)h
(link.)k(Recall)c(that)f(no)h(type)f(information)f(is)i(passed)g(with)f
(a)h(data)g(limb,)75 1413 y(so)h(the)g(receiver)h(must)g(have)f(some)h
(other)f(way)h(to)e(know)h(what)g(type)g(of)g(data)g(it)g(has)g(been)h
(sent.)122 1463 y(The)16 b(default)e(format)h(for)g(arbitrary)f
(precision)g(numbers)h(\(integers)g(and)g(reals\))g(is)g(the)g(GNU)g
(Multiple)e(Precision)75 1513 y(\(GMP\))e(package.)18
b(It)10 b(is)h(possible,)f(however)n(,)i(to)e(use)h(other)g(big)f
(number)g(formats)h(and,)h(when)e(the)h(sender)g(and)g(receiver)75
1563 y(agree)h(on)e(an)h(alternative)f(format,)i(avoid)e(the)g(cost)h
(of)g(converting)e(between)i(a)h(local,)f(non-GMP)f(format)h(and)f(the)
h(GMP)75 1613 y(format.)25 b(See)15 b(section)e(4.1.3)h(for)f(details)g
(on)g(how)g(to)g(support)f(alternative)h(formats.)25
b(In)14 b(the)f(absence)i(of)e(support)g(for)75 1663
y(alternative)h(formats,)h(the)g(put)e(routines)h(for)f(arbitrary)h
(precision)g(numbers)g(expect)h(the)f(number)g(to)g(be)h(in)f(the)g
(GMP)75 1712 y(format.)75 1831 y Ff(3.6.2)50 b(sending)12
b(strings)h(and)e(raw)i(data)122 1909 y Fv(The)g(string)e(handling)f
(routines)h(take)i(a)g(pointer)d(to)i(a)h(char)n(.)21
b(It)11 b(is)h(expected)h(that)f(the)g(string)e(is)i(terminated)g(with)
f(the)75 1958 y(NULL)g(character)n(.)17 b(Raw)m(,)11
b(or)f(\252opaque\272)h(data,)g(can)g(be)g(sent)f(using)g(one)g(of)g
(the)g(PutRaw)g(routines.)k(The)d(data)g(is)f(sent)h(as)g(a)75
2008 y(stream)f(of)f(bytes,)h(with)e(no)h(conversions)g(done)g(on)g
(it.)14 b(The)c Fs(len)g Fv(ar)o(gument)f(speci\256es)i(the)e(number)g
(of)g Fu(bytes)h Fv(of)f(raw)h(data)75 2058 y(to)g(be)g(sent.)75
2177 y Ff(3.6.3)50 b(sending)12 b(meta)h(types)f(and)g(meta)g
(operators)122 2254 y Fv(The)e(PutMeta)f(routines)f(put)h(a)h(meta)g
(type)f(or)f(a)i(meta)g(operator)f(to)g(the)g(link.)k(A)d(meta)g(type)f
(is)g(a)h(value)f(\(represented)g(as)75 2304 y(a)g(string)e(for)h(the)g
(\252regular)r(\272)h(meta)g(type)f(and)h(as)g(an)g(integer)f(for)g
(the)g(\252common\272)i(meta)f(types\))f Fu(identifying)e
Fv(an)j(MP-de\256ned)75 2354 y(basic)14 b(type)g(and)g(is)g(used)g(in)g
(assembling)g(a)g(prototype)e(\(see)j(table)f(4.8)g(in)g(section)f(4.3)
h(for)g(a)h(list)d(of)i(the)g(MP-de\256ned)75 2404 y(meta)d(types\).)k
(A)10 b(meta)h(operator)f(speci\256es)h(a)g(particular)f(\252operator)r
(\272,)g(usually)f(a)i(structuring)d(operator)i(such)h(as)g(Matrix,)75
2454 y(V)-5 b(ector)n(,)16 b(Array)m(,)g(etc.)28 b(Most)14
b(of)g(the)g(MP)h(types)f(have)g(common)h(meta)g(type)f
(representations.)27 b(The)15 b Fs(dtag)f Fv(ar)o(gument)75
2503 y(speci\256es)d(the)f(dictionary)f(in)h(which)g(the)g(\(common\))g
(meta)h(type/operator)e(is)h(de\256ned.)954 2754 y(24)p
eop
%%Page: 25 26
25 25 bop 75 52 1793 2 v 75 1322 2 1270 v 102 120 a Fk(MP_Status_)q(t)
26 b(MP_PutBool)q(ea)q(nPa)q(ck)q(et)g(\(MP_Link_)q(pt)g(link,)e
(MP_Boole)q(an)q(_t)i(bool,)909 175 y(MP_NumAnno)q(t_)q(t)f(na\))102
230 y(MP_Status_)q(t)h(MP_PutSint)q(8P)q(ack)q(et)g(\(MP_Link_)q(pt)g
(link,)f(MP_Uint8_t)h(n,)d(MP_NumAn)q(no)q(t_t)j(na\))102
285 y(MP_Status_)q(t)g(MP_PutUint)q(8P)q(ack)q(et)g(\(MP_Link_)q(pt)g
(link,)f(MP_Uint8_t)h(n,)d(MP_NumAn)q(no)q(t_t)j(na\))102
341 y(MP_Status_)q(t)g(MP_PutSint)q(32)q(Pac)q(ke)q(t)f(\(MP_Link)q(_p)
q(t)g(link,)g(MP_Uint32)q(_t)h(n,)886 396 y(MP_NumAnn)q(ot)q(_t)g(na\))
102 451 y(MP_Status_)q(t)g(MP_PutUint)q(32)q(Pac)q(ke)q(t)f(\(MP_Link)q
(_p)q(t)g(link,)g(MP_Uint32)q(_t)h(n,)886 506 y(MP_NumAnn)q(ot)q(_t)g
(na\))102 561 y(MP_Status_)q(t)g(MP_PutApIn)q(tP)q(ack)q(et)g
(\(MP_Link_)q(pt)g(link,)f(MP_ApInt_t)h(apint,)886 617
y(MP_NumAnn)q(ot)q(_t)g(na\))102 672 y(MP_Status_)q(t)g(MP_PutReal)q
(32)q(Pac)q(ke)q(t)f(\(MP_Link)q(_p)q(t)g(link,)g(MP_Real32)q(_t)h(fp,)
886 727 y(MP_NumAnn)q(ot)q(_t)g(na\))102 782 y(MP_Status_)q(t)g
(MP_PutReal)q(64)q(Pac)q(ke)q(t)f(\(MP_Link)q(_p)q(t)g(link,)g
(MP_Real64)q(_t)h(dfp,)886 838 y(MP_NumAnn)q(ot)q(_t)g(na\))102
893 y(MP_Status_)q(t)g(MP_PutApRe)q(al)q(Pac)q(ke)q(t)f(\(MP_Link)q(_p)
q(t)g(link,)g(MP_ApReal)q(_t)h(apreal,)886 948 y(MP_NumAnn)q(ot)q(_t)g
(na\))102 1003 y(MP_Status_)q(t)g(IMP_PutSin)q(t3)q(2)f(\(MP_Link)q(_p)
q(t)g(link,)g(MP_Sint32)q(_t)h(n\))102 1058 y(MP_Status_)q(t)g
(IMP_PutUin)q(t3)q(2)f(\(MP_Link)q(_p)q(t)g(link,)g(MP_Uint32)q(_t)h
(n\))102 1114 y(MP_Status_)q(t)g(IMP_PutApI)q(nt)48 b(\(MP_Link)q(_p)q
(t)25 b(link,)g(MP_ApInt_)q(t)g(apint\))102 1169 y(MP_Status_)q(t)h
(IMP_PutRea)q(l3)q(2)f(\(MP_Link)q(_p)q(t)g(link,)g(MP_Real32)q(_t)h
(fp\))102 1224 y(MP_Status_)q(t)g(IMP_PutRea)q(l6)q(4)f(\(MP_Link)q(_p)
q(t)g(link,)g(MP_Real64)q(_t)h(dfp\))102 1279 y(MP_Status_)q(t)g
(IMP_PutApR)q(ea)q(l)f(\(MP_Link)q(_p)q(t)g(link,)g(MP_ApReal)q(_t)h
(apreal\))p 1866 1322 V 75 1324 1793 2 v 708 1407 a Fv(T)m(able)11
b(3.7:)k(Numeric)10 b(put)g(routines)p 75 1438 V 75 1769
2 332 v 102 1506 a Fk(MP_Status_)q(t)26 b(MP_PutStri)q(ng)q(Pac)q(ke)q
(t\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f(char)f(*str,)g(MP_NumAnn)q(ot)q
(_t)i(na\))102 1561 y(MP_Status_)q(t)g(MP_PutRawP)q(ac)q(ket)q(\(M)q
(P_L)q(in)q(k_)q(pt)g(link,)e(char)g(*rawdata)q(,)i(MP_Uint32_)q(t)g
(len,)796 1616 y(MP_NumAn)q(no)q(t_t)g(na\))102 1671
y(MP_Status_)q(t)g(IMP_PutStr)q(in)q(g\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)
e(char)h(*str\))102 1726 y(MP_Status_)q(t)h(IMP_PutRaw)q(\(M)q(P_L)q
(in)q(k_p)q(t)g(link,)e(char)g(*rawdata)q(,)h(MP_Uint3)q(2_)q(t)g
(len\))p 1866 1769 V 75 1771 1793 2 v 688 1854 a Fv(T)m(able)11
b(3.8:)j(Byte-based)c(put)g(routines)75 1988 y Ff(3.6.4)50
b(sending)12 b(operators,)h(constants,)f(and)g(identi\256ers)122
2065 y Fv(The)f(PutOperator)e(routines)f(put)h(an)h(operator)f(to)h
(the)f(link.)14 b(The)d(operator)e(may)h(represent)g(an)g(arithmetic)g
(operator)n(,)g(a)75 2115 y(function,)e(such)h(as)h(\252sine\272)f(or)g
(\252integrate\272,)h(a)f(data)g(object,)h(such)f(as)g(\252vector)r
(\272)g(or)g(\252dense)h(distributed)d(polynomial\272,)h(etc..)75
2165 y(The)13 b Fs(dtag)g Fv(ar)o(gument)g(identi\256es)f(the)h
(dictionary)e(in)h(which)g(the)h(operator)f(is)h(de\256ned.)23
b(The)13 b Fs(nc)g Fv(ar)o(gument)g(identi\256es)75 2215
y(the)g(number)h(of)f(ar)o(guments)h(\(children\))e(the)i(operator)f
(has.)25 b(In)13 b(a)h(syntactically)f(correct)h(MP)f(T)o(ree,)j(these)
e(ar)o(guments)75 2265 y(must)9 b(follow)g(the)g(annotations,)g(if)g
(any)m(,)h(attached)g(to)f(the)h(operator)f(packet.)15
b(For)9 b Fs(MP)p 1319 2265 13 2 v 15 w(PutOperator\(\))p
Fv(,)g(the)h(operator)75 2314 y(ar)o(gument)e(is)g(a)h(string.)k(For)8
b Fs(MP)p 539 2314 V 15 w(PutCommonOperator\(\))p Fv(,)f(the)h(ar)o
(gument)g(is)g(an)h(integer)e(encoding)h(of)g(the)g(operator)75
2364 y(found)h(in)h(the)g(dictionary)f(identi\256ed)g(by)h
Fs(dtag)p Fv(.)122 2414 y(The)j(two)f(routines)f(to)g(put)h(an)g
(Identi\256er)g(take)g(a)h Fu(string)e Fv(for)h(the)g(identi\256er)n(.)
19 b(The)13 b(common)g(variants)f(of)f(the)h(routine)75
2464 y(\()p Fs(MP_PutCommonLatinIdentifierPacket\(\))p
Fv(,)j Fs(MP_PutCommonGreekIdentifierPacket\(\))p Fv(\))75
2514 y(take)d(a)g Fu(single)f Fv(character)i(for)f(the)f(identi\256er)g
(which)g(will)g(be)h(transmitted)f(more)h(ef)o(\256ciently)f(than)h
(their)f(string)f(cousins.)75 2564 y(Again,)19 b Fs(dtag)e
Fv(identi\256es)g(the)g(dictionary)f(in)h(which)g(the)g(identi\256er)g
(is)g(de\256ned.)37 b(T)m(ypically)17 b(this)f(will)g(be)i(the)f(tag)75
2613 y Fs(MP_ReceiverDict)p Fv(,)10 b(indicating)f(that)h(the)g(sender)
h(relies)g(on)f(the)g(receiver)r(')n(s)h(\252native\272)g
(understanding)e(of)h(the)h(iden-)954 2754 y(25)p eop
%%Page: 26 27
26 26 bop 75 52 1793 2 v 75 659 2 608 v 102 120 a Fk(MP_Status_)q(t)26
b(MP_PutMeta)q(Ty)q(peP)q(ac)q(ket)q(\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)e
(MP_DictT)q(ag)q(_t)i(dtag,)953 175 y(char)e(*meta,)h(MP_NumAn)q(no)q
(t_t)h(na\))102 230 y(MP_Status_)q(t)g(MP_PutComm)q(on)q(Met)q(aT)q
(ype)q(Pa)q(ck)q(et\()q(MP)q(_Li)q(nk)q(_p)q(t)f(link,)g(MP_DictTa)q
(g_t)h(dtag,)953 285 y(MP_Commo)q(n_)q(t)f(meta,)g(MP_NumAnn)q(ot_)q(t)
h(na\))102 341 y(MP_Status_)q(t)g(MP_PutMeta)q(Op)q(era)q(to)q(rPa)q
(ck)q(et)q(\(MP)q(_L)q(ink)q(_p)q(t)g(link,)e(MP_DictTa)q(g_)q(t)h
(dtag,)953 396 y(char)f(*metaop,)i(MP_NumAn)q(not)q(_t)g(na\))102
451 y(MP_Status_)q(t)g(MP_PutComm)q(on)q(Met)q(aO)q(per)q(at)q(or)q
(Pac)q(ke)q(t\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f(MP_DictTag)q(_t)h
(dtag,)953 506 y(MP_Commo)q(n_)q(t)f(metaop,)h(MP_NumAnno)q(t_)q(t)g
(na\))102 561 y(MP_Status_)q(t)g(IMP_PutMet)q(aO)q(per)q(at)q(or\()q
(MP)q(_L)q(ink)q(_p)q(t)f(link,)g(char)f(*metaop\))102
617 y(MP_Status_)q(t)i(IMP_PutMet)q(aT)q(ype)q(\(M)q(P_L)q(in)q(k_)q
(pt)g(link,)e(char)g(*meta\))p 1866 659 V 75 661 1793
2 v 623 744 a Fv(T)m(able)11 b(3.9:)j(Meta)d(type/operator)d(put)i
(routines)p 75 775 V 75 1824 2 1050 v 102 843 a Fk(MP_Status_)q(t)26
b(MP_PutOper)q(at)q(orP)q(ac)q(ket)q(\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)e
(MP_DictT)q(ag)q(_t)i(dtag,)e(char)g(*op,)774 898 y(MP_NumAnn)q(ot)q
(_t)i(na,)e(MP_NumChil)q(d_)q(t)h(nc\))102 954 y(MP_Status_)q(t)h
(MP_PutComm)q(on)q(Ope)q(ra)q(tor)q(Pa)q(ck)q(et\()q(MP)q(_Li)q(nk)q
(_p)q(t)f(link,MP_)q(Di)q(ctT)q(ag)q(_t)h(dtag,)886 1009
y(MP_Common)q(_t)g(op,)e(MP_NumAnn)q(ot_)q(t)i(na,)864
1064 y(MP_NumChil)q(d_)q(t)g(nc\))102 1119 y(MP_Status_)q(t)g
(MP_PutIden)q(ti)q(fie)q(rP)q(ack)q(et)q(\(M)q(P_L)q(in)q(k_p)q(t)g
(link,)e(MP_DictT)q(ag_)q(t)i(dtag,)886 1174 y(char)e(*id,)g(MP_NumAn)q
(not)q(_t)i(na\))102 1230 y(MP_Status_)q(t)g(MP_PutComm)q(on)q(Lat)q
(in)q(Ide)q(nt)q(if)q(ier)q(Pa)q(cke)q(t\()q(MP)q(_Li)q(nk)q(_pt)g
(link,)886 1285 y(MP_DictTa)q(g_)q(t)g(dtag,)e(MP_Common)q(_t)i(cm_id,)
886 1340 y(MP_NumAnn)q(ot)q(_t)g(na\))102 1395 y(MP_Status_)q(t)g
(MP_PutComm)q(on)q(Gre)q(ek)q(Ide)q(nt)q(if)q(ier)q(Pa)q(cke)q(t\()q
(MP)q(_Li)q(nk)q(_pt)g(link,)886 1450 y(MP_DictTa)q(g_)q(t)g(dtag,)e
(MP_Common)q(_t)i(cm_id,)886 1506 y(MP_NumAnn)q(ot)q(_t)g(na\))102
1561 y(MP_Status_)q(t)g(MP_PutCons)q(ta)q(ntP)q(ac)q(ket)q(\(M)q(P_)q
(Lin)q(k_)q(pt)g(link,)e(MP_DictT)q(ag)q(_t)i(dtag,)841
1616 y(char)e(*cnst,)h(MP_NumAn)q(not)q(_t)h(na\))102
1671 y(MP_Status_)q(t)g(MP_PutComm)q(on)q(Con)q(st)q(ant)q(Pa)q(ck)q
(et\()q(MP)q(_Li)q(nk)q(_p)q(t)f(link,)g(MP_DictTa)q(g_t)h(dtag,)976
1726 y(MP_Common)q(_t)g(cm_cnst,)g(MP_NumAnno)q(t_)q(t)f(na\))102
1782 y(MP_Status_)q(t)h(IMP_PutIde)q(nt)q(ifi)q(er)q(\(MP)q(_L)q(in)q
(k_p)q(t)g(link,)e(char)g(*id\))p 1866 1824 V 75 1826
1793 2 v 498 1909 a Fv(T)m(able)11 b(3.10:)j(Operator)n(,)c(constant,)h
(and)f(identi\256er)f(put)h(routines)75 2043 y(ti\256er)r(')n(s)f
(meaning,)i(probably)e(established)h(during)e(the)j(current)f(session.)
15 b(Or)n(,)c(it)e(might)h(be)g Fs(MP_NoSemanticsDict)p
Fv(,)75 2093 y(indicating)e(that)h(the)g(sender)i(attaches)f(no)f
(meaning)h(to)f(the)h(variable)f(and)h(is)g(explicitly)d(telling)h(the)
i(receiver)g(that)f(it)g(must)75 2143 y(not)g(attach)i(any)f(special)h
(meaning)f(to)g(it)f(either)n(.)122 2192 y(The)k(PutConstant)e(routine)
f(sends)j(a)g(symbolic)e(constant,)i(given)f(as)h(a)f(string,)g(to)g
(the)g(link.)20 b(Y)l(ou)12 b(must)g(identify)e(the)75
2242 y(dictionary)f(in)h(which)g(the)g(constant)g(is)g(de\256ned.)16
b(The)c(\252common\272)f(variant)f(does)h(the)f(same)i(for)e(an)h
(integer)f(encoding)f(of)75 2292 y(a)i(symbolic)e(constant,)i(again)f
(as)h(de\256ned)f(in)g(a)h(dictionary)m(.)75 2411 y Ff(3.6.5)50
b(sending)12 b(expr)o(essions)75 2488 y Fv(As)f(previously)e
(indicated,)i(an)g(MP)g(T)o(ree)g(is)g(a)g(pre\256x)g(parse)g(of)g(an)g
(expression,)g(so)g(3)e Fo(+)h Fv(511)f Ft(\003)g Fq(x)h
Fv(would)g(be)h(transmitted)75 2538 y(as)g Fs(+)25 b(3)g(*)f(511)h(x)p
Fv(.)15 b(The)c(sequence)h(of)e(calls)g(to)g(transmit)f(this)h
(expression)g(could)f(be:)954 2754 y(26)p eop
%%Page: 27 28
27 27 bop 78 83 a Fg(')p 78 375 4 211 v 78 460 a(&)1869
83 y($)p 1869 375 V 1869 460 a(\045)p 163 460 1625 4
v 163 83 V 119 145 a Fs(MP_PutCommonOperatorPacket\(link,)22
b(MP_BasicDict,)h(MP_CopBasicAdd,)h(0,)g(2\);)119 195
y(MP_PutSint8Packet\(link,)e(3,)j(0\);)119 245 y
(MP_PutCommonOperatorPacket\(link,)d(MP_BasicDict,)h(MP_CopBasicMult,)h
(0,)g(2\);)119 295 y(MP_PutSint32Packet\(link,)e(511,)j(0\);)119
345 y(MP_PutCommonLatinIdentifierPacket\()o(link,)d(MP_ReceiverDict,)h
('x',)i(0\);)119 394 y(MP_EndMsgReset\(link\);)122 531
y Fv(The)13 b(same)g(expression)f(can)g(be)h(sent)f(by)f(assembling)h
(the)g(node)f(packets)i(in)e(piecemeal)j(fashion.)19
b(That)12 b(is,)h(sending)75 580 y(the)e(packet)g(header)h(followed)d
(by)i(a)g(data)h(packet)f(containing)e(the)i(data.)18
b(But)10 b(this)g(requires)g(more)i(intimate)e(knowledge)75
630 y(of)g(how)g(MP)g(sends)h(data.)p 75 693 1793 2 v
75 914 2 221 v 102 761 a Fk(MP_Status_)q(t)26 b(IMP_PutNod)q(eH)q(ead)q
(er)g(\(MP_Link_)q(pt)g(link,)47 b(MP_NodeTy)q(pe)q(_t)26
b(ntype,)796 816 y(MP_DictT)q(ag)q(_t)g(dtag,)e(MP_Commo)q(n_)q(t)h
(cval,)796 871 y(MP_NumAn)q(no)q(t_t)h(na,)e(MP_NumChi)q(ld)q(_t)i
(nc\))p 1866 914 V 75 916 1793 2 v 673 999 a Fv(T)m(able)11
b(3.11:)j(Node)d(header)g(put)e(routine)122 1106 y(A)i(node)g(packet)g
(header)g(can)h(be)f(sent)f(using)g Fs(IMP_PutNodeHeader\(\))p
Fv(.)15 b(Note)c(that)f(there)g(is)h(one)g(ar)o(gument)g(for)75
1156 y(each)f(\256eld)e(of)g(a)h(node)f(packet)h(header:)14
b(the)9 b(node)f(type,)g(the)h(tag)f(of)g(the)g(dictionary)f(in)h
(which)g(the)g(node')n(s)g(value)h(is)f(de\256ned)75
1205 y(\(when)g(relevant\),)g(a)g(\252common\272)h(data)f(value,)h(the)
f(number)f(of)h(annotations)e(to)h(be)h(attached)g(to)g(the)f(node,)i
(and)f(the)f(number)75 1255 y(of)14 b(ar)o(guments)h(\(for)f
(operators\).)27 b(When)15 b(sending)e(a)i(\252common\272)h(type)e
(\(e.g.,)j Fs(MP_CommonLatinIdentifier)p Fv(,)75 1305
y Fs(MP_BooleanType)p Fv(\),)9 b(you)g(can)h(supply)e(the)i(data)g
(value)f(in)g(the)h Fs(cval)f Fv(ar)o(gument)h(and)f(forego)g(sending)g
(an)h(additional)75 1355 y(data)h(limb.)j(The)d(example)g(below)f
(makes)h(this)f(more)g(concrete.)75 1443 y Fg(')p 75
1934 4 411 v 75 2019 a(&)1876 1443 y($)p 1876 1934 V
1876 2019 a(\045)p 160 2019 1636 4 v 160 1443 V 116 1505
a Fs(IMP_PutNodeHeader\(link,)22 b(MP_CommonOperatorType,)h
(MP_BasicDict,)589 1555 y(MP_CopBasicAdd,)g(0,)i(2\);)116
1605 y(IMP_PutNodeHeader\(link,)d(MP_Sint8Type,)i(3,)h(0,)g(0,)f(0\);)
116 1655 y(IMP_PutNodeHeader\(link,)e(MP_CommonOperatorType,)h
(MP_BasicDict,)589 1704 y(MP_CopBasicMult,)g(0,)i(2\);)116
1754 y(IMP_PutNodeHeader\(link,)d(MP_Sint32Type,)i(0,)h(0,)f(0,)h(0\);)
116 1804 y(IMP_PutSint32\(link,)e(511\);)116 1854 y
(IMP_PutNodeHeader\(link,MP_CommonLat)o(inIdentifi)o(erType,)f
(MP_ReceiverDict,)589 1904 y('x',)i(0,)h(0\);)116 1953
y(MP_EndMsgReset\(link\);)122 2082 y Fv(Since)11 b(the)f(operators)g
(are)h(all)f(de\256ned)h(in)f(the)g(MP)g(basic)h(dictionary)e(and)h
(can)h(be)g(sent)f(as)h(\252common\272)h(operators,)e(the)75
2132 y(node)g(packet)h(header)g(provides)f(the)g(complete)h(packet)g
(\(the)f(body)f(of)h(the)h(packet)g(has)f(been)h(moved)g(into)e(the)h
(\252common)75 2181 y(value\272)j(\256eld)f(of)f(the)h(node)g(packet)h
(header\).)21 b(The)13 b(integer)e(value)h(511,)h(however)n(,)g(must)f
(be)g(sent)g(as)h(a)g(\252regular)r(\272)f(value)75 2231
y(since)k(it)g(cannot)f(be)i(stored)e(as)i(a)g Fs(MP_Common_t)e
Fv(\(an)h(unsigned)f(char)h(with)f(a)i(range)f(of)g(0)g(to)f(255)h(for)
f(unsigned)75 2281 y(integers\).)f(So)c(we)f(send)h(the)f(node)g
(packet)h(header)g(\256rst,)g(followed)e(by)h(a)h(data)f(limb)g
(containing)f(the)h(signed)g(integer)f(511.)75 2331 y(Finally)m(,)h(it)
g(is)g(important)f(to)h(note)g(when)h(using)e Fs(IMP_PutNodeHeader\(\))
g Fv(that)h(there)h(will)e(be)i(times)g(when)f(some)h(of)75
2381 y(the)f(ar)o(guments)h(are)g(unused.)15 b(This)9
b(depends)h(on)f(the)g(type)g(of)h(data)f(to)g(be)h(sent)f(in)g(the)g
(node)h(packet.)15 b(For)9 b(example,)i(when)75 2431
y(sending)c(the)h(signed)g(integer)f(511,)h(we)h(don')o(t)e(use)h(the)g
(dictionary)e(tag,)j(common)f(value,)h(or)f(number)g(of)f(ar)o(guments)
i(\256elds.)75 2480 y(It)i(is)h(best)f(to)h(set)g(them)g(to)f(0)g(in)g
(cases)j(like)d(this.)19 b(The)12 b(receiver)h(should)d(always)i
(examine)h(the)e(number)h(of)g(annotations)75 2530 y(\256elds,)f(so)g
(it)f(is)g(essential)h(that)f(if)g(no)g(annotations)f(are)j(attached)f
(to)f(a)h(node)f(packet)h(the)g(number)f(of)h(annotations)e(\256eld)h
(is)75 2580 y(set)g(to)g(0.)122 2630 y(A)h(set)f(of)g(macros)h(is)f
(available)h(for)e(setting)g(the)i(\256elds)f(of)g(a)h(node)f(packet)g
(header)n(.)16 b(These)c(are)f(shown)f(in)f(table)h(3.12.)954
2754 y(27)p eop
%%Page: 28 29
28 28 bop 75 94 1793 2 v 75 922 2 829 v 102 161 a Fk(MP_NodeHea)q(de)q
(r_t)26 b(hdr;)102 217 y(MP_NodeTyp)q(e_)q(t)70 b(ntype;)102
272 y(MP_NumChil)q(d_)q(t)g(nargs;)102 327 y(MP_NumAnno)q(ts)q(_t)48
b(nannots;)102 382 y(MP_DictTag)q(_t)93 b(dtag;)102 437
y(MP_Common_)q(t)115 b(cval;)102 548 y(MP_SetNode)q(Ty)q(peF)q(ie)q
(ld\()q(hd)q(r,)26 b(ntype\))102 603 y(MP_SetNode)q(Nu)q(mCh)q(il)q
(dFi)q(el)q(d\()q(hdr)q(,)g(nargs\))102 658 y(MP_SetNode)q(Nu)q(mAn)q
(no)q(tsF)q(ie)q(ld)q(\(hd)q(r,)g(nannots\))102 713 y(MP_SetNode)q(Di)q
(ctT)q(ag)q(Fie)q(ld)q(\(h)q(dr,)g(dtag\))102 769 y(MP_SetNode)q(Ex)q
(tra)q(Ch)q(ild)q(Fi)q(el)q(d\(h)q(dr)q(\))102 824 y(MP_SetNode)q(Ex)q
(tra)q(An)q(not)q(sF)q(ie)q(ld\()q(hd)q(r\))102 879 y(MP_SetNode)q(Co)q
(mmo)q(nV)q(alu)q(eF)q(ie)q(ld\()q(hd)q(r,)g(cval\))p
1866 922 V 75 924 1793 2 v 567 1007 a Fv(T)m(able)11
b(3.12:)j(Macros)d(for)f(setting)f(node)h(packet)h(\256elds)75
1140 y Fm(3.7)58 b(Receiving)14 b(Data)h(with)h(MP)75
1233 y Fv(As)c(mentioned)g(above,)h(for)f(most)g(Put)f(routines)g
(there)i(is)f(a)g(corresponding)f(Get)h(routine.)20 b(At)12
b(the)g(packet-level,)h(these)75 1283 y(routines)e(get)h(a)g(complete)h
(node)f(packet)g(\(node)g(type,)g(dictionary)f(tag,)h(the)g(data)h
(value,)g(number)f(of)f(annotations,)h(and,)75 1332 y(for)c(operators,)
i(the)f(number)f(of)h(ar)o(guments\))g(or)g(annotation)e(packet)j
(\(annotation)d(type,)i(dictionary)e(tag,)j(and)f(\257ags\))g(from)75
1382 y(the)h Fs(link)p Fv(.)122 1432 y Fu(Important:)48
b Fv(Routines)12 b(that)i(take)g(a)g(single)f(pointer)g(as)h(an)g(ar)o
(gument)g(\(e.g.,)i Fs(MP)p 1372 1432 13 2 v 15 w(Sint32)p
1537 1432 V 14 w(t)25 b(*n)p Fv(\))14 b(assume)h(that)75
1482 y(the)c(pointer)f(is)h(not)f(NULL)i(and)f(that)g(it)f(points)g(to)
g(suf)o(\256cient)h(storage)g(to)g(hold)f(the)h(data.)18
b(Routines)10 b(which)h(take)g(double)75 1532 y(pointers)i(\(e.g.,)j
Fs(char)25 b(**s)p Fv(\))13 b(check)i(to)f(see)h(if)e
Fs(*s)h Fv(is)g(NULL.)h(If)f(so,)h(they)f(will)f(allocate)h(a)g(new)h
(block)e(of)h(memory)75 1582 y(suf)o(\256ciently)f(lar)o(ge)g(to)g
(handle)g(the)h(incoming)e(data.)25 b Fu(If)13 b Fs(*s)g
Fu(is)g(not)g(NULL,)h(the)f(r)n(outines)g(assume)h(that)e(the)h(caller)
g(has)75 1631 y(pr)n(ovided)d(suf\256cient)e(memory)j(to)e(stor)n(e)h
(the)f(object)g(to)g(be)h(r)n(ead.)16 b Fv(If)9 b(the)h(caller)f(does)h
(not)f(know)g(the)g(size)i(of)e(the)g(incoming)75 1681
y(object,)g(the)h(pointer)e(should)g(be)i(NULL.)g(It)f(is)g(important)f
(that)h(the)g(pointer)f(either)h(be)g(valid)g(\(that)f(is,)i(point)e
(to)h(previously)75 1731 y(allocated)h(memory\))h(or)f(be)g(NULL.)h
(Uninitialized)e(pointers)g(will)g(cause)i(problems.)k(See)c(section)f
(4.5)g(for)g(more)h(details)75 1781 y(on)f(libMP')n(s)f(memory)i
(management.)122 1831 y(It)j(is)g(the)g(programmer)r(')n(s)g
(responsibility)e(to)i(free)h(memory)f(allocated)h(by)f(MP)-5
b(.)15 b(This)f(can)h(be)g(done)f(with)f(a)i(call)g(to)75
1880 y Fs(IMP_RawMemFreeFnc\(\))p Fv(,)c(passing)h(as)h(the)f(ar)o
(gument)h(a)f(pointer)f(to)h(the)g(block)g(to)f(be)i(freed)f(\(see)h
(section)f(4.5)h(for)75 1930 y(more)e(information)d(on)i(memory)h
(management\).)122 1980 y(A)g(get-packet)g(call)f(will)g(fail)g(if)g
(the)g(type)h(of)f(the)h(next)f Fu(node)g Fv(packet)h(is)g(not)f(of)g
(the)h(type)f(requested.)16 b(In)11 b(this)f(case,)i(the)75
2030 y(receive)f(buf)o(fer)f(is)g(restored)g(to)g(the)g(state)h(it)e
(was)i(in)f(previous)f(to)h(the)g(failed)g(call.)122
2080 y(The)17 b(ar)o(gument,)g Fs(na)p Fv(,)g(speci\256es)g(the)e
(number)h(of)f(annotations)f(attached)j(to)e(the)g(packet.)32
b(The)16 b(annotations)e(must)75 2129 y(immediately)c(follow)f(the)h
(node)g(packet)h(\(see)g(sections)f(3.4)g(and)h(3.8\).)75
2248 y Ff(3.7.1)50 b(r)o(eceiving)13 b(numeric)f(data)122
2326 y Fv(These)g Fs(MP_Get)e Fv(routines)f(get)h(a)h(boolean,)f
(integer)n(,)g(or)g(real)h Fu(node)f(packet)g Fv(from)h(the)f(link.)k
(The)d Fs(IMP_Get)e Fv(routines)75 2376 y(in)h(table)g(3.13)g(get)g(a)h
(boolean,)f(integer)n(,)g(or)g(real)h Fu(data)e(limb)h
Fv(from)g(the)g(link.)k(Recall)c(that)g(no)g(type)g(information)e(is)i
(passed)75 2425 y(with)f(a)i(data)g(limb,)e(so)i(the)f(receiver)h(must)
f(have)h(some)g(other)e(way)i(to)f(know)f(what)h(type)g(of)g(data)h(it)
e(has)i(been)g(sent.)122 2475 y(The)i(default)f(format)g(for)f
(arbitrary)h(precision)f(numbers)h(is)g(the)g(GNU)h(Multiple)d
(Precision)i(\(GMP\))g(package.)22 b(It)11 b(is)75 2525
y(possible,)h(however)n(,)g(to)f(use)h(other)g(arbitrary)e(precision)h
(number)h(formats)f(and,)i(when)e(the)h(sender)g(and)g(receiver)g
(agree)75 2575 y(on)d(an)g(alternative)f(format,)i(avoid)e(the)h(cost)g
(of)f(converting)g(between)h(a)h(local,)f(non-GMP)f(format)h(and)g(the)
g(GMP)g(format.)75 2625 y(See)i(section)f(4.1.3)h(for)e(details)h(on)g
(how)g(to)g(support)f(alternative)g(formats.)954 2754
y(28)p eop
%%Page: 29 30
29 29 bop 75 52 1793 2 v 75 1543 2 1491 v 102 120 a Fk(MP_Status_)q(t)
26 b(MP_GetBool)q(ea)q(nPa)q(ck)q(et\()q(MP)q(_L)q(ink)q(_p)q(t)f
(link,)g(MP_Boolea)q(n_)q(t)g(*bool,)796 175 y(MP_NumAn)q(no)q(t_t)h
(*na\))102 230 y(MP_Status_)q(t)g(MP_GetSint)q(8P)q(ack)q(et)q(\(MP)q
(_L)q(in)q(k_p)q(t)g(link,)e(MP_Sint8_)q(t)i(*n,)796
285 y(MP_NumAn)q(no)q(t_t)g(*na\))102 341 y(MP_Status_)q(t)g
(MP_GetUint)q(8P)q(ack)q(et)q(\(MP)q(_L)q(in)q(k_p)q(t)g(link,)e
(MP_Uint8_)q(t)i(*n,)796 396 y(MP_NumAn)q(no)q(t_t)g(*na\))102
451 y(MP_Status_)q(t)g(MP_GetSint)q(32)q(Pac)q(ke)q(t\(M)q(P_)q(Li)q
(nk_)q(pt)g(link,)f(MP_Sint32_)q(t)h(*n,)102 506 y(MP_Status_)q(t)g
(MP_GetUint)q(32)q(Pac)q(ke)q(t\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f
(MP_Uint32_)q(t)h(*n,)796 561 y(MP_NumAn)q(no)q(t_t)g(*na\))102
617 y(MP_Status_)q(t)g(MP_GetApIn)q(tP)q(ack)q(et)q(\(MP)q(_L)q(in)q
(k_p)q(t)g(link,)e(MP_ApInt_)q(pt)i(apint,)796 672 y(MP_NumAn)q(no)q
(t_t)g(*na\))102 727 y(MP_Status_)q(t)g(MP_GetReal)q(32)q(Pac)q(ke)q
(t\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f(MP_Real32_)q(t)h(*fp,)796
782 y(MP_NumAn)q(no)q(t_t)g(*na\))102 838 y(MP_Status_)q(t)g
(MP_GetReal)q(64)q(Pac)q(ke)q(t\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f
(MP_Real64_)q(t)h(*dfp,)796 893 y(MP_NumAn)q(no)q(t_t)g(*na\))102
948 y(MP_Status_)q(t)g(MP_GetApRe)q(al)q(Pac)q(ke)q(t\(M)q(P_)q(Li)q
(nk_)q(pt)g(link,)f(MP_ApReal_)q(pt)h(apreal,)796 1003
y(MP_NumAn)q(no)q(t_t)g(*na\))102 1058 y(MP_Status_)q(t)g(IMP_GetBoo)q
(le)q(an\()q(MP)q(_Li)q(nk)q(_p)q(t)f(link,)g(MP_Boolea)q(n_t)h
(*bool\))102 1114 y(MP_Status_)q(t)g(IMP_GetSin)q(t8)q(\(MP)q(_L)q(ink)
q(_p)q(t)g(link,)46 b(MP_Sint8)q(_t)26 b(*n\))102 1169
y(MP_Status_)q(t)g(IMP_GetUin)q(t8)q(\(MP)q(_L)q(ink)q(_p)q(t)g(link,)
46 b(MP_Uint8)q(_t)26 b(*n\))102 1224 y(MP_Status_)q(t)g(IMP_GetSin)q
(t3)q(2\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)e(MP_Sint3)q(2_)q(t)h(*n\))102
1279 y(MP_Status_)q(t)h(IMP_GetUin)q(t3)q(2\(M)q(P_)q(Lin)q(k_)q(pt)g
(link,)e(MP_Uint3)q(2_)q(t)h(*n\))102 1334 y(MP_Status_)q(t)h
(IMP_GetApI)q(nt)q(\(MP)q(_L)q(ink)q(_p)q(t)g(link,)46
b(MP_ApInt)q(_p)q(t)25 b(apint\))102 1390 y(MP_Status_)q(t)h
(IMP_GetRea)q(l3)q(2\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)e(MP_Real3)q(2_)q
(t)h(*fp\))102 1445 y(MP_Status_)q(t)h(IMP_GetRea)q(l6)q(4\(M)q(P_)q
(Lin)q(k_)q(pt)g(link,)e(MP_Real6)q(4_)q(t)h(*dfp\))102
1500 y(MP_Status_)q(t)h(IMP_GetApR)q(ea)q(l\(M)q(P_)q(Lin)q(k_)q(pt)g
(link,)e(MP_ApRea)q(l_)q(pt)i(apreal\))p 1866 1543 V
75 1545 1793 2 v 699 1628 a Fv(T)m(able)11 b(3.13:)j(Numeric)d(get)f
(routines)75 1761 y Ff(3.7.2)50 b(r)o(eceiving)13 b(strings)f(and)g
(raw)g(data)p 75 1822 V 75 2153 2 332 v 102 1889 a Fk(MP_Status_)q(t)26
b(MP_GetStri)q(ng)q(Pac)q(ke)q(t\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f
(char)f(**str,)h(MP_NumAnno)q(t_)q(t)g(*na\))102 1945
y(MP_Status_)q(t)h(MP_GetRawP)q(ac)q(ket)q(\(M)q(P_L)q(in)q(k_)q(pt)g
(link,)e(char)g(**rawdat)q(a,)i(MP_Uint32)q(_t)g(*len,)729
2000 y(MP_NumAn)q(not)q(_t)g(*na\))102 2055 y(MP_Status_)q(t)g
(IMP_GetStr)q(in)q(g\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)e(char)h(**str\))
102 2110 y(MP_Status_)q(t)h(IMP_GetRaw)q(\(M)q(P_L)q(in)q(k_p)q(t)g
(link,)e(char)g(**rawdat)q(a,)i(MP_Uint32)q(_t)g(*len\))p
1866 2153 V 75 2155 1793 2 v 678 2238 a Fv(T)m(able)11
b(3.14:)k(Byte-based)10 b(get)g(routines)122 2336 y(The)k(string)e
(handling)g(routines)g(in)h(table)g(3.14)g(take)g(a)h(double)f(pointer)
f(to)g(a)i(char)n(.)25 b(The)14 b(string)e(that)g(is)i(returned)e(is)75
2386 y(terminated)j(with)f(the)h(NULL)h(character)n(.)32
b(Raw)m(,)17 b(or)e(\252opaque\272)h(data,)h(can)g(be)e(received)h
(using)e(one)i(of)f(the)g(GetRaw)75 2436 y(routines.)28
b(The)16 b(data)f(is)g(sent)g(as)g(a)h(stream)f(of)g(bytes,)h(with)e
(no)h(conversions)f(done)h(on)f(it)g(and)h(none)g(is)g(done)g(by)f(the)
75 2486 y(receiving)c(routine.)k(The)d Fs(len)f Fv(\256eld)g(gives)g
(the)g(number)g(of)g Fu(bytes)h Fv(in)f(the)g(block)f(of)h(raw)h(data.)
954 2754 y(29)p eop
%%Page: 30 31
30 30 bop 75 121 a Ff(3.7.3)50 b(r)o(eceiving)13 b(meta)f(types)p
75 182 1793 2 v 75 513 2 332 v 102 250 a Fk(MP_Status_)q(t)26
b(MP_GetMeta)q(Ty)q(peP)q(ac)q(ket)q(\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)e
(MP_DictT)q(ag)q(_t)i(*dtag,)841 305 y(char)e(**meta,)i(MP_NumAnno)q
(t_)q(t)g(*na\))102 360 y(MP_Status_)q(t)g(MP_GetComm)q(on)q(Met)q(aT)q
(ype)q(Pa)q(ck)q(et\()q(MP)q(_Li)q(nk)q(_p)q(t)f(link,)g(MP_DictTa)q
(g_t)h(*dtag,)841 415 y(MP_Commo)q(n_t)g(*meta,)f(MP_NumAn)q(not)q(_t)h
(*na\))102 470 y(MP_Status_)q(t)g(IMP_GetMet)q(aT)q(ype)q(\(M)q(P_L)q
(in)q(k_)q(pt)g(link,)e(char)g(**meta\))p 1866 513 V
75 515 1793 2 v 688 598 a Fv(T)m(able)11 b(3.15:)j(Meta)d(type)f(get)g
(routines)122 696 y(The)h(GetMeta)f(routines)e(get)i(a)g(meta)h(type)e
(from)g(the)h(link.)k(A)c(meta)g(type)f(is)h(a)g(value)g(\(represented)
g(as)g(a)h(string)d(for)h(the)75 746 y(\252regular)r(\272)h(meta)h
(type)f(and)g(as)h(an)f(integer)g(for)g(the)g(\252common\272)h(meta)g
(types\))f Fu(identifying)e Fv(a)i(basic)h(type)f(\(see)h(table)f(4.8)g
(in)75 796 y(section)h(4.3)g(for)g(a)h(list)e(of)g(the)i(MP)f
(de\256ned)g(meta)h(type)f(values)g(de\256ned)h(in)f(the)g
Fs(MP_ProtoDict)p Fv(\).)16 b(A)c(meta)g(operator)75
846 y(speci\256es)k(a)f(particular)f(\252operator)r(\272,)i(usually)e
(a)i(structuring)c(operator)j(such)g(as)g(Matrix,)g(V)-5
b(ector)n(,)18 b(Array)m(,)e(etc.)29 b(Users)75 895 y(may)11
b(de\256ne)g(their)e(own)h(meta)i(types)e(in)f(a)i(dictionary)m(.)k
(The)c(GetMeta)f(routines)g(are)h(typically)e(used)h(in)g
(disassembling)g(a)75 945 y(Prototype)f(T)o(ree)i(\(see)g(section)f
(4.3)g(for)g(more)h(details\).)75 1064 y Ff(3.7.4)50
b(r)o(eceiving)13 b(operators,)f(constants,)g(and)g(identi\256ers)p
75 1124 V 75 2284 2 1160 v 102 1192 a Fk(MP_Status_)q(t)26
b(MP_GetOper)q(at)q(orP)q(ac)q(ket)q(\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)e
(MP_DictT)q(ag)q(_t)i(*dtag,)841 1247 y(char)e(**op,)h(MP_NumAnn)q(ot_)
q(t)h(*na,)841 1302 y(MP_NumCh)q(ild)q(_t)g(*nc\))102
1358 y(MP_Status_)q(t)g(MP_GetComm)q(on)q(Ope)q(ra)q(tor)q(Pa)q(ck)q
(et\()q(MP)q(_Li)q(nk)q(_p)q(t)f(link,)g(MP_DictTa)q(g_t)h(*dtag,)976
1413 y(MP_Common)q(_t)g(*cm_op,)f(MP_NumAnn)q(ot)q(_t)h(*na,)976
1468 y(MP_NumChi)q(ld_)q(t)g(*nc\))102 1523 y(MP_Status_)q(t)g
(MP_GetIden)q(ti)q(fie)q(rP)q(ack)q(et)q(\(M)q(P_L)q(in)q(k_p)q(t)g
(link,)e(MP_DictT)q(ag_)q(t)i(*dtag,)886 1578 y(char)e(**id,)h
(MP_NumAnno)q(t_)q(t)h(*na\))102 1634 y(MP_Status_)q(t)g(MP_GetComm)q
(on)q(Lat)q(in)q(Ide)q(nt)q(if)q(ier)q(Pa)q(cke)q(t\()q(MP)q(_Li)q(nk)q
(_pt)g(link,)886 1689 y(MP_DictTa)q(g_)q(t)g(*dtag,)e(MP_Commo)q(n_)q
(t)h(*cm_id,)886 1744 y(MP_NumAnn)q(ot)q(_t)h(*na\))102
1799 y(MP_Status_)q(t)g(MP_GetComm)q(on)q(Gre)q(ek)q(Ide)q(nt)q(if)q
(ier)q(Pa)q(cke)q(t\()q(MP)q(_Li)q(nk)q(_pt)g(link,)976
1854 y(MP_DictTa)q(g_t)g(*dtag,)f(MP_Common)q(_t)h(*cm_id,)976
1910 y(MP_NumAnn)q(ot_)q(t)g(*na\))102 1965 y(MP_Status_)q(t)g
(MP_GetCons)q(ta)q(ntP)q(ac)q(ket)q(\(M)q(P_)q(Lin)q(k_)q(pt)g(link,)e
(MP_DictT)q(ag)q(_t)i(*dtag,)841 2020 y(char)e(**cnst,)i(MP_NumAnno)q
(t_)q(t)g(*na\))102 2075 y(MP_Status_)q(t)g(MP_GetComm)q(on)q(Con)q(st)
q(ant)q(Pa)q(ck)q(et\()q(MP)q(_Li)q(nk)q(_p)q(t)f(link,)g(MP_DictTa)q
(g_t)h(*dtag,)976 2131 y(MP_Common)q(_t)g(*cm_cnst,)g(MP_NumAnn)q(ot)q
(_t)g(*na\))102 2186 y(MP_Status_)q(t)g(IMP_GetOpe)q(ra)q(tor)q(\(M)q
(P_L)q(in)q(k_)q(pt)g(link,)e(char)g(**op\))102 2241
y(MP_Status_)q(t)i(IMP_GetIde)q(nt)q(ifi)q(er)q(\(MP)q(_L)q(in)q(k_p)q
(t)g(link,)e(char)g(**id\))p 1866 2284 V 75 2286 1793
2 v 499 2369 a Fv(T)m(able)11 b(3.16:)j(Operator)n(,)d(constant,)f(and)
g(identi\256er)f(get)h(routines)122 2467 y(The)f(GetOperator)f
(routines)f(get)h(an)h(operator)e(from)h(the)h(link.)k(The)c(operator)e
(may)i(represent)g(an)f(arithmetic)g(operator)n(,)75
2517 y(a)13 b(function,)e(such)h(as)h(\252sine\272)g(or)f
(\252integrate\272,)h(a)f(data)h(object,)f(such)g(as)h(\252vector)r
(\272)f(or)g(\252dense)h(distributed)d(polynomial\272,)75
2566 y(etc.)37 b(The)17 b Fs(dtag)g Fv(ar)o(gument)h(identi\256es)e
(the)h(dictionary)f(in)g(which)h(the)g(operator)g(is)g(de\256ned.)36
b(The)18 b Fs(nc)f Fv(ar)o(gument)75 2616 y(identi\256es)12
b(the)g(number)h(of)f(ar)o(guments)h(\(children\))e(the)i(operator)f
(has.)22 b(These)14 b(ar)o(guments)f(follow)e(the)i(annotations,)f(if)
954 2754 y(30)p eop
%%Page: 31 32
31 31 bop 75 121 a Fv(any)m(,)11 b(attached)g(to)f(the)g(operator)g
(packet.)16 b(For)10 b(GetOperator)n(,)h(the)f(operator)g(ar)o(gument)h
(is)f(a)h(double)e(pointer)h(to)f(char)n(.)16 b(For)75
171 y(GetCommonOperator)n(,)8 b(the)g(ar)o(gument)g(is)g(a)h(pointer)e
(to)g(an)h Fs(MP_Common_t)p Fv(.)14 b(This)8 b(small)g(integer)f(will)g
(be)h(an)h(encoding)75 221 y(of)h(the)g(operator)g(found)f(in)h(the)g
(dictionary)e(identi\256ed)i(by)g Fs(dtag)p Fv(.)122
271 y Fs(IMP_Get)f Fv(routines)g(are)h(provided)f(for)g(operators)g
(and)h(identi\256ers)e(to)h(allow)g(incoming)g(node)g(packets)i(to)e
(be)h(read)g(in)75 321 y(a)i(piecemeal)h(fashion.)18
b(That)12 b(is,)f(getting)f(the)i(node)f(packet)h(header)g(and)f(data)h
(value)g(separately)m(.)19 b(This)12 b(is)f(explained)g(in)75
370 y(more)g(detail)e(in)h(the)g(next)g(section.)122
420 y(The)16 b(two)e(routines)f(to)h(Get)h(an)g(Identi\256er)f(take)h
(a)g(double)f(pointer)g(to)g(char)n(.)28 b(If)15 b(the)f(pointer)g(is)g
(NULL,)i(suf)o(\256cient)75 470 y(memory)f(will)d(be)j(allocated)f(to)f
(store)h(the)g(Identi\256er)n(.)26 b(The)15 b(common)g(variants)e(of)h
(the)g(GetIdenti\256er)f(routine)g(take)i(a)75 520 y(pointer)9
b(to)h(a)g Fu(single)g Fv(character)h(in)f(which)g(to)g(store)g(the)g
(identi\256er)n(.)122 570 y(Again,)22 b(the)d Fs(dtag)g
Fv(\256eld)g(identi\256es)g(the)g(dictionary)f(in)h(which)g(the)g
(identi\256er)f(is)i(\252de\256ned\272.)43 b(T)m(ypically)19
b(this)75 619 y(will)g(be)h Fs(MP_ReceiverDict)p Fv(,)i(indicating)c
(that)i(the)g(sender)g(relies)h(on)e(the)h(receiver)r(')n(s)g
(\252native\272)h(understand-)75 669 y(ing)f(of)g(the)h(identi\256er)n
(,)i(probably)c(established)i(during)e(the)h(current)h(session.)46
b(Alternatively)m(,)23 b Fs(dtag)d Fv(might)g(be)75 719
y Fs(MP_NoSemanticsDict)p Fv(,)13 b(indicating)f(that)h(the)g
(identi\256er)g(has)h(no)f(special)h(meaning)g(to)f(the)h(sender)g(and)
f(that)g(the)75 769 y(receiver)e(must)f(not)g(attach)g(any)g(special)h
(meaning)f(to)g(it)g(either)n(.)122 819 y(There)h(are)f(two)f(routines)
f(to)h(get)g(a)h(symbolic)e(constant.)15 b(One)10 b(receives)g(the)f
(constant)g(as)h(a)g(string)e(and)i(the)f(other)g(as)h(an)75
869 y(integer)g(encoding)f(of)h(the)g(symbolic)g(constant)g(\(as)g
(de\256ned)h(in)f(a)g(dictionary\).)75 987 y Ff(3.7.5)50
b(r)o(eceiving)13 b(expr)o(essions)75 1065 y Fv(A)f(receiving)f
(application)f(parses)i(the)f(incoming)g(message)i(with)d(a)i(series)h
(of)e Fu(gets)p Fv(.)19 b(As)11 b(an)h(example,)h(let')n(s)e(receive)h
(the)75 1115 y(expression)d(that)g(was)h(sent)f(in)g(section)g(3.6.5:)
15 b Fs(+)24 b(3)h(*)g(511)g(x)p Fv(.)15 b(Of)9 b(course,)h(in)f(this)g
(example)h(we)g(know)f(exactly)g(what)75 1164 y(was)j(sent)g(and)f(so)g
(know)g(the)h(corresponding)e(calls)h(to)g(make.)20 b(A)11
b(real)h(application)e(requires)i(a)g(general)f(parser)h(capable)75
1214 y(of)e(reading)g(MP)g(trees.)122 1264 y(The)h(calls)g(to)e
(receive)j(the)e(expression)g(could)f(be:)79 1298 y Fg(')p
79 1690 4 311 v 79 1775 a(&)1868 1298 y($)p 1868 1690
V 1868 1775 a(\045)p 163 1775 1624 4 v 163 1298 V 119
1361 a Fs(if)25 b(\(!MP_TestEofMsg\(link\)\))48 b(/*)25
b(see)f(if)h(we)g(are)f(at)h(the)g(end)f(of)h(a)g(message)f(*/)169
1410 y(fprintf\(stderr,)g("Current)g(message)g(not)h(completely)f
(consumed!\\n"\);)119 1460 y(MP_SkipMsg\(link\);)248
b(/*)25 b(do)f(message)h(alignment)f(*/)119 1510 y
(MP_GetCommonOperatorPacket\(link,)e(&dtag,)j(&cop,)f(&nannots,)g
(&nargs\);)119 1560 y(MP_GetSint8Packet\(link,)f(&n,)i(&nannots\);)119
1610 y(MP_GetCommonOperatorPacket\(link,)d(&dtag,)j(&cop,)f(&nannots,)g
(&nargs\);)119 1660 y(MP_GetSint32Packet\(link,)f(&n2,)i(&nannots\);)
119 1709 y(MP_GetCommonLatinIdentifierPacket\(link,)d(&dtag,)i(&cid,)g
(&nannots\);)p 75 1880 1793 2 v 75 2211 2 332 v 102 1948
a Fk(MP_Status_)q(t)48 b(IMP_GetNo)q(de)q(Hea)q(de)q(r\(M)q(P_)q(Li)q
(nk_)q(pt)26 b(link,)f(MP_NodeTyp)q(e_)q(t)g(*ntype,)796
2003 y(MP_DictT)q(ag)q(_t)h(*dtag,)f(MP_Common)q(_t)h(*cv,)796
2058 y(MP_NumAn)q(no)q(t_t)g(*na,)e(MP_NumCh)q(il)q(d_t)i(*nc\))102
2113 y(MP_Status_)q(t)48 b(MP_PeekHe)q(ad)q(er\()q(MP)q(_Li)q(nk)q(_p)q
(t)25 b(link,)g(MP_NodeTy)q(pe_)q(t)h(*ntype,)707 2169
y(MP_DictTa)q(g_t)g(*dtag,)f(MP_Common)q(_t)h(*cv\))p
1866 2211 V 75 2213 1793 2 v 666 2296 a Fv(T)m(able)11
b(3.17:)k(Node)10 b(header)h(get)f(routines)122 2387
y(The)j(receiver)g(will)e(\256nd)h(it)f(convenient)h(to)f(receive)j
(packets)e(in)g(a)h(piecemeal)h(fashion.)20 b(That)12
b(is,)h(\256rst)f(get)g(the)g(node)75 2437 y(packet)h(header)n(,)i
(determine)e(the)g(type)f(of)h(node)g(packet,)h(then)e(get)h(the)g
(body)f(of)g(the)h(packet)g(containing)e(the)i(data.)23
b(On)75 2487 y(the)12 b(receiving)f(side,)i(to)e(receive)i(a)f(node)g
(packet)g(piecemeal,)i(one)e(must)g(\256rst)g(call)f
Fs(IMP)p 1394 2487 13 2 v 15 w(GetNodeHeader\(\))p Fv(,)h(then)75
2537 y(the)f(appropriate)f Fs(IMP)p 414 2537 V 15 w(Get)p
Fq(<)p Fl(type)p Fq(>)p Fs(\(\))h Fv(routine.)17 b(Of)11
b(course,)h(if)f(the)g(type)f(of)h(the)g(node)g(packet)h(is)f(a)h
(\252common\272)g(type,)75 2587 y(the)f(data)g(was)g(retrieved)g(when)f
(the)h(packet)g(header)h(was)f(read)h(in,)e(so)h Fu(ther)n(e)h(is)e(no)
h(separate)g(data)e(\256eld)i(to)f(r)n(etrieve)p Fv(.)18
b(For)75 2636 y(example,)954 2754 y(31)p eop
%%Page: 32 33
32 32 bop 75 129 a Fg(')p 75 869 4 660 v 75 954 a(&)1876
129 y($)p 1876 869 V 1876 954 a(\045)p 160 954 1636 4
v 160 129 V 116 191 a Fs(IMP_GetNodeHeader\(link,)22
b(&ntype,)j(&dtag,)f(&cv,)h(&na,)f(&nc\))h(/*)f(line)h(1)g(*/)116
241 y(switch)f(\(ntype\))g({)141 291 y(case)g(MP_Sint32Type:)472
b(/*)25 b(line)f(2)h(*/)190 341 y(IMP_GetSint32\(link,)f(&n\);)190
390 y(break;)141 440 y(case)g(MP_Sint8Type:)497 b(/*)25
b(line)f(3)h(*/)141 490 y(case)f(MP_Uint8Type:)497 b(/*)25
b(line)f(4)h(*/)141 540 y(case)f(MP_CommonOperatorType:)272
b(/*)25 b(line)f(5)h(*/)215 590 y(/*)g(nothing)f(to)h(do)g(-)g(we)f
(read)h(it)g(all)f(with)h(IMP_GetNodeHeader\(\))190 639
y(break;)141 689 y(.)f(.)h(.)141 739 y(case)f(MP_OperatorType:)422
b(/*)25 b(line)f(6)h(*)190 789 y(IMP_GetOperator\(link,)e(&op_str\);)
141 839 y(.)h(.)h(.)141 888 y(})122 1022 y Fv(Note)13
b(that)e(for)h(the)h(common)f(types)h(shown)f(here)h(\(lines)e(3)i(-)f
(5\),)h(no)f(further)g(Get)g(calls)h(are)g(needed.)23
b(For)12 b(example,)75 1072 y(the)e(body)g(of)g(the)g(case)i(label)f
(for)f Fs(MP_Sint8Type)f Fv(on)h(line)g(2)g(is)h(empty)f(since)h(we)g
(read)g(in)f(the)g(Sint8)f(with)h(the)g(call)h(to)75
1122 y Fs(IMP_GetNodeHeader\(\))f Fv(and)h(the)g(integer)f(is)h(stored)
g(in)g Fs(cv)p Fv(.)18 b(But)10 b(for)h(the)g(\252regular)r(\272)g(MP)g
(types)g(\(lines)g(2)g(and)g(6\),)75 1171 y(an)f Fs(IMP_Get<type>\(\))e
Fv(call)i(is)f(needed)h(to)f(read)h(the)f(data)h(\256eld)g(associated)g
(with)e(the)i(packet)g(header)g(read)g(in)f(line)g(1.)122
1221 y Fs(MP_PeekHeader\(\))k Fv(returns)h(the)g(type)g(of)g(the)g
(next)g(node)g(packet)g(in)g(the)g(ar)o(gument)g Fs(ntype)p
Fv(,)i(as)f(well)e(as)i(the)75 1271 y(common)d(value)g(and)g
(dictionary)e(tag)i(\256elds.)19 b(This)12 b(routine)f(is)g
(distinguished)f(from)h(the)h Fs(IMP)p 1489 1271 13 2
v 14 w(GetNodeHeader\(\))75 1321 y Fv(routine)k(in)g(that)h(it)f
(leaves)i(the)f(state)g(of)g(the)g(link')n(s)e(read)j(buf)o(fer)f
Fu(unchanged)p Fv(.)35 b(So,)19 b(for)d(example,)k(one)d(could)g(use)75
1371 y Fs(MP_PeekHeader\(\))7 b Fv(to)h(determine)h(the)f(type)g(of)g
(the)g(next)g(node)g(packet)h(and)g(use)g(that)e(type)h(as)i(the)e
(discriminator)f(in)h(a)75 1420 y(switch)g(statement.)15
b(Similarly)m(,)8 b(there)g(may)h(be)g(times)f(when)g(you)g(expect)h(a)
g(common)f(operator)n(,)h(but)f(need)g(to)g(know)g Fu(which)75
1470 y Fv(operator)j(you)g(received)i(\(e.g.,)g(List,)f
(SparseDistributedPolynomial,)e(Matrix\))g(so)i(that)f(you)g(can)i
(call)e(the)h(appropriate)75 1520 y(routine)c(to)g(handle)g(this)g
(data.)16 b(For)8 b(this)g(situation,)g(the)g(common)i(value)f(and)g
(dictionary)e(tag)i(\256elds)f(are)i(also)f(provided)e(by)75
1570 y Fs(MP_PeekHeader\(\))p Fv(.)18 b(Lastly)m(,)13
b(the)e Fs(cval)g Fv(\256eld)h(will)e(only)h(be)h(meaningful)e(if)i
Fs(ntype)f Fv(indicates)g(an)h(MP)g(common)75 1620 y(type.)j(The)c
(code)g(below)e(is)h(similar)g(to)g(the)g(sample)h(code)g(given)e
(above.)78 1672 y Fg(')p 78 2562 4 809 v 78 2646 a(&)1869
1672 y($)p 1869 2562 V 1869 2646 a(\045)p 163 2646 1625
4 v 163 1672 V 119 1734 a Fs(MP_PeekHeader\(link,)23
b(&ntype,)h(&cv,)h(&dtag\);)119 1784 y(switch)f(\(ntype\))g({)144
1834 y(case)g(MP_Sint32Type:)193 1883 y(MP_GetSint32Packet\(link,)f
(&n,)i(&na\);)193 1933 y(break;)144 1983 y(case)f(MP_Sint8Type:)193
2033 y(MP_GetSint8Packet\(link,)f(&sin8,)h(&na\);)193
2083 y(break;)144 2133 y(case)g(MP_Uint8Type:)193 2182
y(MP_GetUint8Packet\(link,)f(&uin8,)h(&na\);)193 2232
y(break;)144 2282 y(case)g(MP_CommonOperatorType:)193
2332 y(MP_GetCommonOperatorPacket\(link,)e(&cop,)j(&dtag,)f(&na,)h
(&nc\);)193 2382 y(break;)144 2431 y(.)f(.)h(.)144 2481
y(case)f(MP_OperatorType:)193 2531 y(MP_GetOperatorPacket\(link,)f
(&op_str,)h(&dtag,)g(&na,)h(&nc\);)144 2581 y(.)f(.)h(.})954
2754 y Fv(32)p eop
%%Page: 33 34
33 33 bop 122 121 a Fv(In)12 b(this)f(code,)j(we)e(simply)f(peek)i(at)f
(the)g(next)g(node)g(packet)g(header)h(in)e(the)h(link)f(without)f
(actually)i(reading)f(it.)20 b(This)75 171 y(allows)10
b(us)g(to)g(identify)e(the)i(type)g(of)g(the)g(node)g(packet)h(and)f
(call)h(the)f(correct)g Fs(MP_Get<type>Packet\(\))f Fv(routine.)122
221 y(Finally)m(,)16 b(there)f(is)h(also)f(a)h(set)f(of)g(macros)h(for)
f(getting)f(the)h(\256elds)g(of)g(a)h(node)f(packet)g(header)n(.)31
b(These)17 b(are)f(shown)75 271 y(in)h(table)h(3.18.)39
b(The)18 b(macros)h(return)e(the)h(value)g(of)g(the)g(type)g(of)f(the)h
(speci\256ed)h(\256eld.)38 b(For)18 b(example,)j(a)e(call)f(to)75
321 y Fs(MP_GetNodeNumAnnotsField)9 b Fv(would)g(return)h(the)h(valued)
g(stored)f(in)g(the)h(number)f(of)h(annotations)e(\256eld)i(of)f(the)75
370 y(node)g(packet)h(header)n(.)p 75 431 1793 2 v 75
873 2 442 v 102 499 a Fk(MP_NodeHea)q(de)q(r_t)26 b(hdr;)102
609 y(MP_GetNode)q(Fi)q(eld)q(Ty)q(pe\()q(hd)q(r\))102
664 y(MP_GetNode)q(Nu)q(mAn)q(no)q(tsF)q(ie)q(ld)q(\(hd)q(r\))102
720 y(MP_GetNode)q(Nu)q(mCh)q(il)q(dFi)q(el)q(d\()q(hdr)q(\))102
775 y(MP_GetNode)q(Di)q(ctT)q(ag)q(Fie)q(ld)q(\(h)q(dr\))102
830 y(MP_GetNode)q(Co)q(mmo)q(nV)q(alu)q(eF)q(ie)q(ld\()q(hd)q(r\))p
1866 873 V 75 875 1793 2 v 565 958 a Fv(T)m(able)11 b(3.18:)j(Macros)d
(for)f(getting)e(node)i(packet)h(\256elds)75 1147 y Fm(3.8)58
b(Sending)16 b(and)f(Receiving)f(Annotations)p 75 1225
V 75 1501 2 277 v 102 1292 a Fk(MP_Status_)q(t)26 b(MP_PutAnno)q(ta)q
(tio)q(nP)q(ack)q(et)q(\(M)q(P_L)q(in)q(k_p)q(t)g(link,)e(MP_DictT)q
(ag_)q(t)i(dtag,)841 1347 y(MP_Annot)q(Typ)q(e_)q(t)g(atype,)e
(MP_Annot)q(Fl)q(ags)q(_t)i(flags\))102 1403 y(MP_Status_)q(t)g
(MP_GetAnno)q(ta)q(tio)q(nP)q(ack)q(et)q(\(M)q(P_L)q(in)q(k_p)q(t)g
(link,)e(MP_DictT)q(ag_)q(t)i(*dtag,)841 1458 y(MP_Annot)q(Typ)q(e_)q
(t)g(*atype,)f(MP_AnnotF)q(lag)q(s_)q(t)h(*flags\))p
1866 1501 V 75 1503 1793 2 v 612 1586 a Fv(T)m(able)11
b(3.19:)j(Annotation)8 b(put)h(and)i(get)f(routines)122
1682 y(Annotations)j(are)i(transmitted)f(in)g(annotation)f(packets.)29
b(The)15 b(decision)f(to)g(send)h(an)g(annotation)e(is)h(made)i(by)e
(the)75 1732 y(sender)n(.)h(T)m(o)c(\252attach\272)g(a)g(single)f
(annotation)e(to)i(a)h(node:)127 1815 y(1.)21 b(set)8
b(the)f(number)h(of)f(annotations)f(\256eld)i(in)f(the)g(node')n(s)g
(packet)h(to)f(1.)14 b(This)8 b(is)f(done)h(by)f(passing)g(1)h(for)f
Fs(num)p 1713 1815 13 2 v 15 w(annots)179 1865 y Fv(to)i(either)h(a)h
(Put)p Fq(<)p Fv(type)p Fq(>)p Fv(Packet)g(routine)e(or)h
Fs(IMP_PutNodeHeader\(\))p Fv(.)127 1948 y(2.)21 b(call)10
b Fs(MP_PutAnnotationPacket\(\))e Fv(with)h(the)i(desired)f(annotation)
e(type,)j(dictionary)d(tag,)j(and)f(\257ags.)127 2031
y(3.)21 b(if)10 b(the)g(annotation)e(is)i(valuated,)h(send)f(the)g(MP)h
(T)o(ree)g(giving)d(the)i(ar)o(gument.)75 2114 y(This)h(generalizes)g
(easily)g(to)f(the)g(case)i(of)f(sending)e(multiple)h(annotations)f
(attached)i(to)f(a)h(single)f(node)g(packet.)17 b(T)m(o)11
b(send)75 2163 y Fq(n)f Fv(annotations,)f(simply)h(replace)h(1)f(with)f
Fq(n)i Fv(in)e(step)i(1)f(and)g(repeat)h(steps)f(3)g(and)h(4)f
Fq(n)g Fv(times.)122 2213 y(The)h(set)g(of)f(macros)h(shown)f(in)f
(table)h(3.20)g(are)h(de\256ned)g(for)f(setting)f(and)h(clearing)g(the)
g Fu(\257ags)g Fv(\256eld)g(of)g(an)h(annotation.)122
2263 y(For)f(example,)i(a)e(sequence)i(of)e(calls)g(to)g(send)h(the)f
(comment)h(annotation)d(from)i(\256gure)g(1.1)h(could)e(be:)954
2754 y(33)p eop
%%Page: 34 35
34 34 bop 75 82 1793 2 v 75 634 2 553 v 102 149 a Fk(MP_AnnotFl)q(ag)q
(s_t)26 b(aflag;)102 260 y(MP_SetAnno)q(tR)q(equ)q(ir)q(ed\()q(af)q(la)
q(g\))102 315 y(MP_SetAnno)q(tV)q(alu)q(at)q(ed\()q(af)q(la)q(g\))102
370 y(MP_SetAnno)q(tT)q(ree)q(Sc)q(ope)q(\(a)q(fl)q(ag\))102
426 y(MP_ClearAn)q(no)q(tRe)q(qu)q(ire)q(d\()q(af)q(lag)q(\))102
481 y(MP_ClearAn)q(no)q(tVa)q(lu)q(ate)q(d\()q(af)q(lag)q(\))102
536 y(MP_ClearAn)q(no)q(tTr)q(ee)q(Sco)q(pe)q(\(a)q(fla)q(g\))102
591 y(MP_ClearAn)q(no)q(tFl)q(ag)q(s\(a)q(fl)q(ag)q(\))p
1866 634 V 75 636 1793 2 v 512 719 a Fv(T)m(able)11 b(3.20:)k(Macros)10
b(for)g(setting/clearing)f(annotation)f(\257ags)75 812
y Fg(')p 75 1452 4 560 v 75 1537 a(&)1876 812 y($)p 1876
1452 V 1876 1537 a(\045)p 160 1537 1636 4 v 160 812 V
116 874 a Fs(MP_AnnotFlags_t)23 b(aflags)i(=)f(0;)116
973 y(/*)g(1)h(in)g(annot)f(field)h(indicates)f(a)h(single)f
(annotation)g(is)h(attached)f(*/)116 1023 y
(MP_PutCommonOperatorPacket\(link,)e(MP_BasicDict,)h(MP_CopBasicDiv,)h
(1,)h(2\);)116 1123 y(/*)f(send)h(the)g(annotation)f(immediately)f
(after)i(the)f(node)h(pkt)g(*/)116 1173 y
(MP_SetAnnotTreeScope\(aflags\);)116 1222 y
(MP_SetAnnotValuated\(aflags\);)116 1272 y
(MP_PutAnnotationPacket\(link,)d(MP_MpDict,)i(MP_AnnotMpComment,)f
(aflags\);)116 1372 y(/*)h(send)h(the)g(annotation's)e(argument)i(*/)
116 1422 y(MP_PutStringPacket\(link,)d("gradient",)i(0\);)116
1472 y(/*)g(Now)h(we)g(would)f(send)h(the)f(CopBasicDiv)g(operator's)g
(arguments)g(*/)122 1608 y Fv(On)11 b(the)g(receiving)g(side,)g(the)g
(parser)g(must)g(check)h(to)f(see)h(if)e(there)h(are)h(any)f
(annotations)f(attached)h(to)g(a)g(node.)18 b(In)10 b(the)75
1657 y(case)j(above,)f(once)g(the)f(receiver)h(had)f(read)h(the)f
(common)h(operator)f(packet)h(and)f(checked)h(the)f(number)h(of)f
(annotations)75 1707 y(\256eld,)g(it)e(would)g(know)h(to)f(get)i(one)f
(annotation)f(with)75 1757 y Fs(MP)p 127 1757 13 2 v
15 w(GetAnnotationPacket\(link,)22 b(&dtag,)j(&annot,)f(&aflags\);)75
1807 y Fv(In)16 b(checking)f(the)h(annotation)e(type)i(and)f(the)h
(annotation)e(\257ags,)k(the)e(receiver)h(would)d(learn)i(that)f(the)h
(annotation)e(is)75 1857 y(valuated.)32 b(This)16 b(means)h(that)f(an)g
(MP)g(T)o(ree)h(supplying)c(the)j(ar)o(gument)g(immediately)g(follows.)
31 b(It)15 b(is)h(important)f(to)75 1906 y(remember)10
b(that)e(the)g(call)h(to)f Fs(MP)p 544 1906 V 15 w
(GetAnnotationPacket\(\))e Fu(does)j(not)f Fv(read)h(in)f(the)g
(annotation')n(s)f(ar)o(gument.)15 b(Y)l(ou)75 1956 y(would)8
b(get)g(an)i(annotation')n(s)d(ar)o(gument)i(as)g(you)f(would)g(any)h
(MP)g(T)o(ree.)16 b(The)9 b(predicate)g(macros)h(in)f(table)f(3.21)h
(are)h(useful)75 2006 y(for)f(determining)f(if)h(a)g(particular)g
(annotation)f(\257ag)h(has)h(been)g(set.)15 b(Each)10
b(macro)g(returns)f(true)g(if)g(the)g(speci\256ed)h(\257ag)f(is)h(set.)
75 2056 y(For)g(example,)h(if)f(an)h(annotation)d(is)i(required,)h
Fs(MP_IsAnnotRequired\(aflags\))c Fv(would)j(return)f
Fs(MP_TRUE)p Fv(.)p 75 2118 1793 2 v 75 2450 2 332 v
102 2186 a Fk(MP_AnnotFl)q(ag)q(s_t)49 b(aflags;)102
2296 y(MP_IsAnnot)q(Re)q(qui)q(re)q(d\(a)q(fl)q(ag)q(s\))102
2352 y(MP_IsAnnot)q(Va)q(lua)q(te)q(d\(a)q(fl)q(ag)q(s\))102
2407 y(MP_IsAnnot)q(Tr)q(eeS)q(co)q(pe\()q(af)q(la)q(gs\))p
1866 2450 V 75 2452 1793 2 v 480 2535 a Fv(T)m(able)11
b(3.21:)j(Macros)d(for)e(determining)g(annotation)g(\257ag)i(settings)
122 2630 y(Finally)m(,)i(table)f(3.22)h(gives)f(a)h(collection)f(of)g
(macros)i(for)e(setting)f(and)i(getting)e(the)i(\256elds)f(of)h(an)g
(annotation)e(packet)954 2754 y(34)p eop
%%Page: 35 36
35 35 bop 75 121 a Fv(header)n(.)p 75 186 1793 2 v 75
848 2 663 v 102 253 a Fk(MP_AnnotHe)q(ad)q(er_)q(t)26
b(hdr;)102 308 y(MP_AnnotTy)q(pe)q(_t)71 b(atype;)102
364 y(MP_DictTag)q(_t)116 b(dtag;)102 419 y(MP_AnnotFl)q(ag)q(s_t)49
b(aflags;)102 529 y(MP_SetAnno)q(tT)q(ype)q(Fi)q(eld)q(\(h)q(dr)q(,)25
b(atype\))102 584 y(MP_SetAnno)q(tD)q(ict)q(Ta)q(gFi)q(el)q(d\()q(hdr)q
(,)h(dtag\))102 640 y(MP_SetAnno)q(tF)q(lag)q(sF)q(iel)q(d\()q(hd)q(r,)
g(aflags\))102 695 y(MP_GetAnno)q(tF)q(iel)q(dT)q(ype)q(\(h)q(dr)q(\))
102 750 y(MP_GetAnno)q(tD)q(ict)q(Ta)q(gFi)q(el)q(d\()q(hdr)q(\))102
805 y(MP_GetAnno)q(tF)q(lag)q(sF)q(iel)q(d\()q(hd)q(r\))p
1866 848 V 75 850 1793 2 v 456 933 a Fv(T)m(able)11 b(3.22:)k(Macros)10
b(for)g(setting/getting)d(annotation)i(packet)i(\256elds)75
1131 y Fm(3.9)58 b(Sending)16 b(and)f(Receiving)f(V)-5
b(ectors)14 b(of)h(numeric)g(data)75 1224 y Fv(Recall)10
b(that)e(each)j(node)e(in)g(a)h(normal)f(MP)g(tree)h(is)f(communicated)
h(as)g Fu(node)f(packet)p Fv(,)h(i.e.)16 b(each)10 b(datum)f(is)h
(communicated)75 1273 y(with)e(a)i(header)n(.)15 b(For)9
b(homogeneous)g(data)g(such)h(as)f(arrays)h(\(or)f(vectors\))g(of)g
(numeric)g(data,)h(this)e(implies)h(an)g(unnecessary)75
1323 y(overhead.)15 b(As)9 b(an)g(optimization,)e(MP)h(de\256nes)i
(mechanisms)g(to)d(avoid)h(sending)g(full)f(node)i(packets)g(for)f
(each)i(datum)e(and)75 1373 y(which,)i(among)g(others,)g(enable)g(the)g
(communicating)f(of)g(arrays)i(of)e(numeric)h(data)g(in)g(such)g(a)g
(way)g(that)f(the)h(elements)g(of)75 1423 y(the)g(array)h(can)g(be)f
(communicated)h(as)g(data)f(limbs)g(\(instead)g(of)f(full)g(node)h
(packets\).)16 b(These)c(optimization)c(mechanisms)75
1473 y(are)13 b(are)g(formally)e(de\256ned)h(in)f(the)h(prototype)e
(dictionary)h(\()p Fs(MP_ProtoDict.h)p Fv(\))f(and)i(are)h(explained)f
(in)f(some)i(more)75 1522 y(detail)g(in)g(section)g(4.3.)25
b(In)14 b(this)e(section,)j(we)f(only)e(explain)h(the)h(primitive)d
(routines)i(for)g(communicating)g(vectors)g(of)75 1572
y(numeric)d(data.)122 1622 y(Roughly)c(speaking,)f(vectors)h(of)g
(numeric)g(data)g(are)g(communicated)g(using)g(the)g(common)g(operator)
g Fs(MP_CopProtoArray)75 1672 y Fv(which)11 b(is)f(de\256ned)i(in)e
(the)h Fs(MP_ProtoDict)p Fv(.)17 b(The)11 b(number)o(-of-ar)o(guments)g
(of)g(this)f(operator)g(are)i(the)f(number)g(of)g(ele-)75
1722 y(ments)h(of)f(the)h(array)m(.)20 b(Furthermore,)12
b(a)g(prototype)e(annotation)g(is)h(attached)h(to)f(this)g(operator)g
(whose)h(value)g(\(called)f(the)75 1772 y(prototype)f(tree\))i
(speci\256es)h(that)e(each)i(of)f(the)f(ar)o(guments)i(of)e(the)h
(operator)f(is)h(a)g(data)g(limb)f(of)h(a)g(certain)g(numeric)g(type.)
75 1821 y(Consequently)m(,)c(the)g(elements)h(of)f(the)g(array)g(can)h
(be)g(communicated)f(as)h(data)g(limbs,)f(i.e.)15 b(as)9
b(data)g(without)d(node)i(headers.)122 1871 y(T)m(able)15
b(3.23)e(gives)g(a)h(set)g(of)f(routines)g(for)g(sending)g(and)g
(receiving)g(vectors)h(of)f(machine-precision)h(numbers)f(\(see)75
1921 y(table)g(3.24)g(for)g(the)g(supported)g(element)g(types\).)24
b Fs(MP_PutBasicVector\(\))12 b Fv(puts)h(a)h(vector)f(of)g(elements)h
(of)f(one)75 1971 y(of)f(the)g(types)g(corresponding)f(to)h(the)g
(values)h(listed)e(in)h(table)g(3.24.)21 b(The)13 b(routine)e(\256rst)h
(puts)g(the)g(array)h(node)f(\252header)r(\272)75 2021
y(which,)d(among)f(others,)h(provides)e(type)h(information)e(using)i
(the)g(prototype)e(annotation)h(\(see)i(section)f(4.3\))h(and)f(then)g
(puts)75 2070 y Fs(num)p 152 2070 13 2 v 15 w(elems)j
Fv(elements)h(starting)e(at)i(the)f(address)i(given)e(in)g
Fs(elems)p Fv(.)18 b(Note)12 b(that)f(you)g(cannot)g(attach)h(any)g
(annotations)75 2120 y(to)e(the)g(vector)g(using)f(this)h(routine.)122
2170 y(Alternatively)m(,)e(you)h(can)g(send)h(the)e(header)i(and)f
(vector)g(separately)m(,)h(using)e Fs(IMP_PutBasicVectorHeader\(\))75
2220 y Fv(followed)e(by)g Fs(IMP_PutBasicVector\(\))g
Fv(\(o)o(r)g(the)g(appropri)o(ate)g Fs(IMP_Put<type>V)o(ector\(\))g
Fv(rou)o(ti)o(ne\).)11 b Fs(IMP_PutBasicVectorHeader\(\))75
2270 y Fv(builds)c(and)i(puts)g(the)f(necessary)j(prototype)c
(annotation.)13 b(The)c(ar)o(gument)g Fs(na)g Fv(is)g(the)g(number)f
(of)h Fu(additional)d Fv(annotations)75 2320 y(you)k(wish)g(to)g
(attach)h(to)f(the)g(vector)n(.)15 b(These)d(annotations)d(must)i(be)f
(put)g Fu(after)g Fv(the)h(vector)f(header)h(and)g Fu(befor)n(e)g
Fv(the)f(vector)75 2369 y(vector)g(elements.)122 2419
y(For)g(the)g(receiving)g(side,)g(only)f(primitive)f(routines)h(which)h
(get)g(the)g(vector)g(elements)g(are)h(provided.)j(These)d(routines)75
2469 y(take)j(as)h(an)f(ar)o(gument)g(the)g(type)f(of)h(the)g(vector)g
(elements,)h(a)g(double)e(pointer)g(\(e.g.)26 b Fs(MP_Sint32_t**)e(vec)
p Fv(\))14 b(for)75 2519 y(storing)9 b(the)h(element)h(values)g(and)g
(the)f(number)g(of)h(elements)g(of)f(the)g(vector)n(.)16
b(Note)10 b(that)g(the)g(element)i(type)e(and)g(number)75
2569 y(of)e(vector)g(elements)h(must)f(be)g(given)g(explicitly)e(as)j
(ar)o(guments)g(to)e(these)i(routines)e(i.e.)15 b(their)7
b(values)i(must)f(be)g(determined)75 2618 y(by)k(appropriately)f
(parsing)g(the)h(vector)g(header)n(.)22 b(Furthermore,)13
b(recall)f(that)g(if)g Fs(vec)g Fv(is)g(the)g(double)f(pointer)g
(passed)i(in,)954 2754 y(35)p eop
%%Page: 36 37
36 36 bop 75 121 a Fv(then)9 b(suf)o(\256cient)g(memory)h(to)f(hold)f
(the)h(vector)g(elements)h(is)f(allocated)g(if)g Fs(*vec)25
b(==)f(NULL)p Fv(.)10 b(Otherwise,)f(it)g(is)g(assumed)75
171 y(that)h Fs(*vec)g Fv(already)g(points)f(to)h(suf)o(\256cient)g
(memory)h(to)e(store)h(the)g(vector)h(elements.)122 221
y(For)18 b(receiving)g(a)h(complete)g(vector)f(\(header)h(and)g
(elements\),)i(the)d(routine)f Fs(MPT_GetTree\(\))h Fv(contained)g(in)
75 271 y Fs(libMPT)p Fv(,)10 b(a)h(library)e(for)h(parsing)f(MP)i
(trees)g(which)e(is)h(distributed)e(along)i(with)f(MP)-5
b(,)11 b(should)e(be)i(used.)122 321 y(One)g(more)g(important)e(thing)g
(to)h(note)g(about)g(the)g(vector)h(routines)e(is)i(that)e(they)i(not)e
(only)h(provide)f(a)i(convenient)f(and)75 370 y(compact)k(way)f(for)f
(communicating)g(array)h(elements,)i(but)d(that)g(they)h(also)f(very)h
(ef)o(\256ciently)g(move)g(the)g(data)g(between)75 420
y(the)e(user)r(')n(s)f(memory)h(space)h(and)f(the)f(transport)g(device)
h(since)g(they)g(avoid)f(iterating)f(over)i(each)g(array)h(element)f
(and)g(use)75 470 y(memory)j(copy)f(\()p Fs(memcpy)p
Fv(\))f(functions)g(instead.)24 b(In)13 b(other)g(words,)h(using)e(the)
h(supplied)f(vector)h(routines)f(is)h(the)g(most)75 520
y(ef)o(\256cient)e(way)f(to)g(Put/Get)f(arrays)i(of)f(numeric)g(data.)
954 2754 y(36)p eop
%%Page: 37 38
37 37 bop 581 1174 a Fw(Sender)536 b(Receiver)366 1274
y Fv(while)10 b(\(...\))15 b Ft(f)488 b Fv(while)10 b(\(...\))15
b Ft(f)1082 1323 y Fs(MP_SkipMsg\(link\);)397 1373 y
Fv(calls)c(to)e Fs(put)h Fv(an)h(MP)f(T)o(ree)277 b(//)10
b(or)g Fs(MP_InitMsg\(link\);)397 1423 y(MP_EndMsgReset\(link\);)160
b Fv(calls)11 b(to)e Fs(get)h Fv(an)h(MP)f(T)o(ree)397
1473 y Ft(g)664 b(g)484 1603 y Fv(Figure)10 b(3.2:)15
b(Synchronizing)8 b(sending)i(and)g(receiving)g(messages)954
2754 y(37)p eop
%%Page: 38 39
38 38 bop 75 94 1793 2 v 75 2854 2 2761 v 102 161 a Fk(/*)23
b(Putting)i(a)e(Vector)i(*/)102 217 y(MP_Status_)q(t)h(MP_PutBasi)q(cV)
q(ect)q(or)q(\(MP)q(_L)q(in)q(k_p)q(t)g(link,)e(void)g(*elems,)393
272 y(MP_Common)q(_t)i(elem_type)q(,)g(MP_NumChil)q(d_)q(t)f(num_elem)q
(s\))102 382 y(MP_Status_)q(t)h(IMP_PutBas)q(ic)q(Vec)q(to)q(rHe)q(ad)q
(er)q(\(MP)q(_L)q(ink)q(_p)q(t)g(link,)e(MP_Common)q(_t)i(elem_type)q
(,)415 437 y(MP_NumAn)q(no)q(t_t)g(na,)e(MP_NumChi)q(ld_)q(t)i
(num_elems\))102 548 y(MP_Status_)q(t)g(IMP_PutBas)q(ic)q(Vec)q(to)q
(r\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f(void)f(*elems,)393
603 y(MP_Common)q(_t)i(elem_type)q(,)g(MP_NumChil)q(d_)q(t)f(num_elem)q
(s\))102 713 y(MP_Status_)q(t)h(IMP_PutSin)q(t3)q(2Ve)q(ct)q(or\()q(MP)
q(_L)q(ink)q(_p)q(t)f(link,)g(MP_Sint32)q(_t)h(*si32vec,)460
769 y(MP_NumCh)q(ild)q(_t)g(num_elems)q(\))102 879 y(MP_Status_)q(t)48
b(IMP_PutUi)q(nt)q(32V)q(ec)q(tor)q(\(M)q(P_)q(Lin)q(k_)q(pt)26
b(link,)e(MP_Uint3)q(2_)q(t)h(*si32vec)q(,)460 934 y(MP_NumCh)q(ild)q
(_t)h(num_elems)q(\))102 1045 y(MP_Status_)q(t)g(IMP_PutSin)q(t8)q(Vec)
q(to)q(r\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f(MP_Sint8_t)h(*si8vec,)460
1100 y(MP_NumCh)q(ild)q(_t)g(num_elems)q(\))102 1210
y(MP_Status_)q(t)48 b(IMP_PutUi)q(nt)q(8Ve)q(ct)q(or)26
b(\(MP_Link_)q(pt)g(link,)e(MP_Uint8)q(_t)i(*si8vec,)460
1265 y(MP_NumCh)q(ild)q(_t)g(num_elems)q(\))102 1376
y(MP_Status_)q(t)g(IMP_PutRea)q(l6)q(4Ve)q(ct)q(or\()q(MP)q(_L)q(ink)q
(_p)q(t)f(link,)g(MP_Real64)q(_t)h(*dvec,)460 1431 y(MP_NumCh)q(ild)q
(_t)g(num_elems)q(\))102 1542 y(MP_Status_)q(t)g(IMP_PutRea)q(l3)q(2Ve)
q(ct)q(or\()q(MP)q(_L)q(ink)q(_p)q(t)f(link,)g(MP_Real32)q(_t)h
(*r32vec,)460 1597 y(MP_NumCh)q(ild)q(_t)g(num_elems)q(\))102
1707 y(/*)d(Getting)i(a)e(vector)i(*/)102 1762 y(MP_Status_)q(t)h
(IMP_GetBas)q(ic)q(Vec)q(to)q(r\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f(void)
f(**elems,)393 1818 y(MP_Common)q(_t)i(elem_type)q(,)g(MP_NumChil)q(d_)
q(t)f(num_elem)q(s\))102 1928 y(MP_Status_)q(t)h(IMP_GetSin)q(t3)q(2Ve)
q(ct)q(or\()q(MP)q(_L)q(ink)q(_p)q(t)f(link,)g(MP_Sint32)q(_t)h
(**si32vec)q(,)460 1983 y(MP_NumCh)q(ild)q(_t)g(num_elems)q(\))102
2094 y(MP_Status_)q(t)g(IMP_GetUin)q(t3)q(2Ve)q(ct)q(or\()q(MP)q(_L)q
(ink)q(_p)q(t)f(link,)g(MP_Uint32)q(_t)h(**si32vec)q(,)460
2149 y(MP_NumCh)q(ild)q(_t)g(num_elems)q(\))102 2259
y(MP_Status_)q(t)g(IMP_GetSin)q(t8)q(Vec)q(to)q(r\(M)q(P_)q(Li)q(nk_)q
(pt)g(link,)f(MP_Sint8_t)h(**si8vec,)460 2314 y(MP_NumCh)q(ild)q(_t)g
(num_elems)q(\))102 2425 y(MP_Status_)q(t)g(IMP_GetUin)q(t8)q(Vec)q(to)
q(r\(M)q(P_)q(Li)q(nk_)q(pt)g(link,)f(MP_Uint8_t)h(**si8vec,)460
2480 y(MP_NumCh)q(ild)q(_t)g(num_elems)q(\))102 2591
y(MP_Status_)q(t)g(IMP_GetRea)q(l6)q(4Ve)q(ct)q(or\()q(MP)q(_L)q(ink)q
(_p)q(t)f(link,)g(MP_Real64)q(_t)h(**dvec,)460 2646 y(MP_NumCh)q(ild)q
(_t)g(num_elems)q(\))102 2756 y(MP_Status_)q(t)g(IMP_GetRea)q(l3)q(2Ve)
q(ct)q(or\()q(MP)q(_L)q(ink)q(_p)q(t)f(link,)g(MP_Real32)q(_t)h
(**r32vec,)460 2811 y(MP_NumCh)q(ild)q(_t)g(num_elems)q(\))p
1866 2854 V 75 2856 1793 2 v 748 2939 a Fv(T)m(able)11
b(3.23:)j(V)-5 b(ector)11 b(routines)954 2754 y(38)p
eop
%%Page: 39 40
39 39 bop 100 1231 a Fk(MP_Sint8T)q(ype)100 1277 y(MP_Uint8T)q(ype)100
1323 y(MP_Sint32)q(Typ)q(e)13 b(MP_Uint32T)q(yp)q(e)100
1368 y(MP_Real32)q(Typ)q(e)100 1414 y(MP_Real64)q(Typ)q(e)695
1501 y Fv(T)m(able)e(3.24:)j(V)-5 b(ector)11 b(element)g(types)954
2754 y(39)p eop
%%Page: 40 41
40 40 bop 75 433 a Fn(Chapter)20 b(4)75 640 y Fr(Advanced)25
b(T)-10 b(opics)75 881 y Fm(4.1)58 b(Customizing)15 b(an)g(MP)f(Envir)o
(onment)75 974 y Fv(The)g(resources)g(managed)g(by)f(an)g(environment)f
(include)g(memory)i(buf)o(fers,)g(parameters)h(af)o(fecting)e(the)f
(allocation)g(of)75 1023 y(buf)o(fers,)i(the)e(list)g(of)h(available)f
(transport)g(devices,)i(and)f(the)g(\256le)g(descriptor)f(for)g
(logging)f(events.)23 b(Links)13 b(are)g(created)75 1073
y(within)7 b(the)i(context)g(of)f(an)i(environment.)k(Occasionally)m(,)
9 b(the)g(programmer)h(may)f(want)g(to)g(customize)g(an)h(environment.)
75 1123 y(This)f(may)i(be)e(done)h(by)f(setting)f(environment)h
(options)f(and)h(by)h(adding)e(new)i(transport)e(interfaces)i(to)f(the)
h(environment.)75 1241 y Ff(4.1.1)50 b(Getting)11 b(and)h(setting)g
(envir)o(onment)f(options)p 75 1299 1793 2 v 75 1465
2 166 v 102 1367 a Fk(int)23 b(MP_GetEn)q(vOp)q(ti)q(on\()q(MP)q(_E)q
(nv_)q(pt)j(env,)e(int)g(option\))102 1422 y(int)f(MP_SetEn)q(vOp)q(ti)
q(on\()q(MP)q(_E)q(nv_)q(pt)j(env,)e(int)g(option,)h(int)f(value\))p
1866 1465 V 75 1467 1793 2 v 614 1550 a Fv(T)m(able)11
b(4.1:)k(MP)10 b(environment)f(option)g(routines)122
1646 y(The)i(environment)e(options)g(settable)h(by)g(the)g(programmer)h
(are)g(shown)f(in)f(table)h(4.2)h(and)f(explained)g(below)m(.)137
1733 y Ft(\017)21 b Fs(MP)p 231 1733 13 2 v 15 w(BUFFER)p
396 1733 V 14 w(SIZE)p 510 1733 V 14 w(OPT)11 b Fv(-)f(A)h(link')n(s)e
(send)h(and)h(receive)g(buf)o(fers)g(are)g(implemented)f(as)h(a)g
(linked)f(list)f(of)h(buf)o(fer)179 1783 y(segments.)20
b(This)11 b(option)f(allows)h(the)h(programmer)g(to)f(reset)h(the)f
(size)h(of)g(the)f(buf)o(fer)h(fragments)f(maintained)g(by)179
1833 y(the)f(environment.)137 1914 y Ft(\017)21 b Fs(MP)p
231 1914 V 15 w(MAX)p 321 1914 V 14 w(FREE)p 435 1914
V 15 w(BUFFERS)p 625 1914 V 14 w(OPT)7 b Fv(-)g(The)g(environment)f
(maintains)h(a)g(pool)f(of)h(free)g(buf)o(fers)g(from)g(which)f(links)g
(get)179 1964 y(the)i(buf)o(fer)h(segments)h(for)e(their)g(send)h(and)g
(receive)h(buf)o(fers.)15 b(This)8 b(option)f(allows)i(the)g
(programmer)g(to)f(determine)179 2014 y(the)f(maximum)h(number)f(of)g
(buf)o(fer)h(segments)g(maintained)f(in)f(pool.)14 b(More)7
b(buf)o(fer)g(segments)h(may)g(be)g(allocated)f(as)179
2063 y(needs)i(require,)g(but)e(once)i(the)f(expression)h(has)f(been)h
(\252consumed\272)h(\(sent)e(or)h(read\),)g(only)e Fs(MAX)p
1573 2063 V 15 w(FREE)p 1688 2063 V 15 w(BUFFERS)179
2113 y Fv(will)i(be)h(kept)g(in)g(the)g(environment')n(s)f(buf)o(fer)h
(segment)h(pool.)j(The)d(rest)f(will)f(be)i(freed.)137
2194 y Ft(\017)21 b Fs(MP)p 231 2194 V 15 w(INIT)p 346
2194 V 14 w(FREE)p 460 2194 V 15 w(BUFFERS)p 650 2194
V 14 w(OPT)12 b Fv(determines)h(the)f(initial)e(number)j(of)f(buf)o
(fer)g(segments)h(maintained)f(in)f(the)179 2244 y(environment')n(s)g
(pool)h(of)g(buf)o(fer)h(segments.)23 b(The)14 b(pool)e(may)h(grow)f
(as)i(lar)o(ge)f(as)g Fs(MAX)p 1478 2244 V 15 w(FREE)p
1593 2244 V 15 w(BUFFERS)f Fv(or)g(as)179 2294 y(determined)e(by)g
(setting)f Fs(MP)p 601 2294 V 15 w(MAX)p 691 2294 V 14
w(FREE)p 805 2294 V 15 w(BUFFERS)p 995 2294 V 14 w(OPT)p
Fv(.)122 2381 y(The)14 b(current)e(value)h(for)f(an)h(environment)e
(option)g(may)i(be)g(discovered)g(with)f(a)h(call)g(to)f
Fs(MP_GetEnvOption\(\))75 2431 y Fv(which)e(returns)f(the)i(current)f
(value)g(of)g(the)g(speci\256ed)h(option.)122 2480 y(Setting)e(an)h
(option)e(is)i(done)g(with)f Fs(MP_SetEnvOption\(\))f
Fv(which)i(sets)g(the)g(speci\256ed)g(environment)f Fs(option)h
Fv(to)75 2530 y Fs(value)g Fv(and)g(returns)g(the)g(old)f(value)i(of)f
(the)g(option)e(as)j(the)f(result)g(of)g(the)g(function.)122
2580 y Fu(Important)p Fv(:)j(An)c(environment')n(s)g(options)f(cannot)i
(be)g(changed)h(once)f(the)g(environment)f(has)h(been)h(initialized)d
(with)h(a)75 2630 y(call)h(to)g Fs(MP_InitializeEnv\(\))p
Fv(.)954 2754 y(40)p eop
%%Page: 41 42
41 41 bop 118 123 1714 2 v 117 169 2 46 v 351 155 a Fe(Option)p
686 169 V 686 169 V 356 w(Meaning)p 1066 169 V 1066 169
V 147 w(Default)p 1228 169 V 1228 169 V 144 w(Legal)9
b(Range)e(for)j Fk(value)p 1831 169 V 118 170 1714 2
v 117 216 2 46 v 143 202 a Fe(MP)p 199 202 12 2 v 14
w(BUFFER)p 355 202 V 12 w(SIZE)p 446 202 V 14 w(OPT)p
686 216 2 46 v 183 w(buf)o(fer)g(size)p 1066 216 V 221
w(1024)p 1228 216 V 86 w(positive)e(long)h(integer)p
1831 216 V 117 262 V 143 248 a(MP)p 199 248 12 2 v 14
w(MAX)p 300 248 V 13 w(FREE)p 405 248 V 13 w(BUFFERS)p
581 248 V 12 w(OPT)p 686 262 2 46 v 50 w(max)f(buf)o(fer)i(pool)f(size)
p 1066 262 V 72 w(32)p 1228 262 V 124 w(positive)f(long)h(integer)p
1831 262 V 117 307 V 143 294 a(MP)p 199 294 12 2 v 14
w(INIT)p 287 294 V 14 w(FREE)p 393 294 V 13 w(BUFFERS)p
569 294 V 12 w(OPT)p 686 307 2 46 v 62 w(initial)h(buf)o(fer)g(pool)f
(size)p 1066 307 V 49 w(16)p 1228 307 V 124 w(integer)g
Fd(\024)p 1831 307 V 117 353 V 686 353 V 1066 353 V 1228
353 V 1263 339 a Fe(MP)p 1319 339 12 2 v 14 w(DEF)m(AUL)m(T)p
1498 339 V 12 w(MAX)p 1597 339 V 14 w(FREE)p 1703 339
V 12 w(BUFF)p 1831 353 2 46 v 118 355 1714 2 v 678 446
a Fv(T)m(able)i(4.2:)k(MP)10 b(environment)f(options)122
580 y(Instead,)18 b(you)d(must)h(\256rst)f(allocate)h(the)g
(environment)f(\(with)g Fs(MP_AllocateEnv\(\))p Fv(\),)h(then)f(reset)h
(the)g(desired)75 630 y(environment)11 b(options,)h(and,)h(\256nally)m
(,)g(complete)g(the)f(initialization)d(of)j(the)g(environment.)21
b(For)12 b(example,)i(to)d(reset)i(the)75 679 y(size)e(of)f(the)g(buf)o
(fers)g(managed)h(by)f(the)g(environment)g Fs(env)p Fv(,)g(you)g(would)
f(do:)78 737 y Fg(')p 78 1129 4 311 v 78 1214 a(&)1869
737 y($)p 1869 1129 V 1869 1214 a(\045)p 163 1214 1625
4 v 163 737 V 119 800 a Fs(MP_Env_pt)24 b(env)g(=)h(NULL;)119
899 y(if)f(\(\(env)h(=)g(MP_AllocateEnv\(\)\))e(==)i(NULL\){)168
949 y(fprintf\(stderr,)f("failed)g(to)h(allocate)f(an)h(environment,)f
(exiting\\n"\);)168 999 y(exit\(1\);)168 1049 y(})119
1098 y(MP_SetEnvOption\(env,)f(MP_BUFFER_SIZE_OPT,)g(2028\);)119
1148 y(env)h(=)h(MP_InitializeEnv\(env\);)75 1355 y Ff(4.1.2)50
b(Adding)12 b(user)n(-supplied)f(transport)h(devices)g(to)g(an)g(envir)
o(onment)p 75 1416 1793 2 v 75 1636 2 221 v 102 1483
a Fk(MP_TranspL)q(is)q(t_p)q(t)26 b(IMP_GetTra)q(ns)q(pBy)q(Na)q(me)g
(\(MP_Env_p)q(t)g(env,)e(int)f(transp_d)q(ev\))102 1538
y(MP_Status_)q(t)j(MP_AddEnvT)q(ra)q(nsp)q(De)q(vic)q(e)g(\(MP_Env_pt)g
(env,)e(int)g(transp_de)q(v,)886 1594 y(MP_Transp)q(Op)q(s_)q(t)h
(*transp_)q(op)q(s\))p 1866 1636 V 75 1638 1793 2 v 594
1721 a Fv(T)m(able)11 b(4.3:)j(MP)c(environment)g(transport)f(routines)
122 1819 y(The)k(MP)f(library)e(includes)i(support)e(for)i(\256les)g
(and)g(TCP)g(sockets.)20 b(The)13 b(source)f(for)g(transport)e
(interfaces)j(for)e(PVM)75 1869 y(and)i(T)m(oolBus)f(are)i(provided)e
(with)g(the)h(MP)g(source)g(distribution,)e(but)h(are)i(not)e(compiled)
h(into)f(the)h(MP)g(library)f(since)75 1919 y(that)f(would)f(require)i
(supplying)d(the)i(PVM)h(and)g(T)m(oolBus)f(libraries)f(with)h(the)g
(MP)h(distribution)o(.)17 b(Y)l(ou)11 b(are)h(responsible)75
1969 y(for)e(providing)e(any)i(additional)e(libraries)i(needed.)122
2019 y(The)17 b(programmer)g(may)f(add)h(to)e(the)h(set)h(of)f
(transport)e(devices)j(supported)e(by)h(an)g(environment)g(with)f(a)h
(call)h(to)75 2069 y Fs(MP_AddEnvTranspDevice\(\))p Fv(,)9
b(where)j Fs(env)e Fv(is)h(a)g(pointer)f(to)g(the)h(environment)f(to)g
(which)g(you)g(want)h(to)f(add)h(the)75 2118 y(transport)g(interface,)i
Fs(transp)p 555 2118 13 2 v 14 w(dev)f Fv(is)g(an)g(integer)g
(identifying)d(device)k(type)e(to)h(add)g(\(these)g(are)h(given)e(as)i
(de\256nes)g(in)75 2168 y Fs(MP_Env.h)p Fv(,)h(e.g.,)i
Fs(MP_TcpTransportDev)p Fv(\))c(and)h(corresponds)h(to)f(the)g(string)f
(name)j(for)e(the)g(device)h(by)g(which)75 2218 y(it)d(will)f(be)i
(identi\256ed)e(\(i.e.,)j(through)d(the)h Fs(-MPtransp)g
Fv(option)f(to)h Fs(MP_OpenLink\(\))p Fv(\),)g(and)g
Fs(transp_ops)g Fv(is)g(the)75 2268 y(address)g(of)f(a)h(structure)e
(of)h(type)g Fs(MP_TranspOps_t)f Fv(\(de\256ned)i(in)e
Fs(MP_Env.h)p Fv(\).)122 2318 y(The)15 b(call)g(to)f(add)g(a)i(device)f
(to)e(the)i(environment)e(must)i(be)f(done)h Fu(after)f
Fv(the)g(environment)g(has)h(been)g(created)g(and)75
2367 y Fu(befor)n(e)d Fv(the)f(call)g(to)g(open)g(the)g(link.)17
b(The)12 b(sample)g(code)f(below)g(shows)g(how)g(this)g(would)f(be)h
(done)g(for)g(PVM.)h(Note)f(that)75 2417 y(you)e(must)h(explicitly)e
(enable)i(the)g(compilation)e(of)h(the)h(device-speci\256c)h(routines)d
(for)i(T)m(oolbus)f(and)h(Pvm)g(by)f(giving)f(the)75
2467 y(appropriate)f Fs(--enable-PACKAGE)f Fv(option)f(to)i(the)h
Fs(configure)e Fv(script,)i(prior)e(to)h(building)e(MP)-5
b(.)9 b(See)f(the)f(INST)m(ALL)75 2517 y(\256le)j(that)g(accompanies)i
(the)e(distribution)d(for)j(how)f(to)h(enable)h(it)e(as)i(the)f
(package)i(to)d(use.)954 2754 y(41)p eop
%%Page: 42 43
42 42 bop 75 129 a Fg(')p 75 820 4 610 v 75 904 a(&)1876
129 y($)p 1876 820 V 1876 904 a(\045)p 160 904 1636 4
v 160 129 V 91 191 a Fs(#include)24 b("MP.h")116 291
y(MP_Env_pt)49 b(env)g(=)25 b(NULL;)116 341 y(MP_Link_pt)f(link)g(=)h
(NULL;)116 440 y(/*)f(do)h(all)g(the)f(PVM)h(initialization)f(stuff)g
(here)h(*/)116 490 y(env)f(=)h(MP_InitializeEnv\(env\);)116
540 y(MP_AddEnvTranspDevice\(env,)d(MP_PvmTransportDev,)h(&pvm_ops\);)
116 590 y(if)h(\(\(link)h(=)g(MP_OpenLink\(env,)e(argc,)h(argv\)\))h
(==)f(NULL\))h({)165 639 y(MP_ReleaseEnv\(env\);)165
689 y(pvm_exit\(\);)165 739 y(exit\(1\);)165 789 y(})75
1004 y Ff(4.1.3)50 b(Adding)14 b(user)n(-supplied)g(arbitrary)g(pr)o
(ecision)h(integer)f(and)g(r)o(eal)h(packages)g(to)f(an)h(en-)224
1062 y(vir)o(onment)75 1140 y Fv(MP')n(s)h(default)f(format)g(for)h
(lar)o(ge)g(numbers)g(\(integers)f(and)h(reals\))g(is)g(the)f(Gnu)h
(Multiple)e(Precision)h(Package.)33 b(The)75 1190 y(ability)8
b(to)h(send)h(and)g(receive)g(lar)o(ge)g(numbers)g(in)f(an)h
(application')n(s)e(native)h(format)h(is)f(especially)h(important)e
(for)i(parallel)75 1239 y(distributed)i(applications)h(which)h(need)h
(to)f(avoid)g(the)g(cost)h(of)f(having)f(to)h(convert)g(between)h
(\252standard\272)g(and)g(native)75 1289 y(encodings.)g(In)9
b(general,)i(the)f(approach)g(MP)g(takes)h(is)e(to)h(allow)f(an)h
(application)f(the)h(illusion)e(of)h(sending)g(and)i(receiving)75
1339 y(lar)o(ge)i(numbers)g(in)f(its)g(\252native\272)h(format,)h(with)
e(any)g(necessary)j(conversions)d(are)h(quietly)e(performed)i(by)g(the)
f(put)g(and)75 1389 y(get)f(routines.)18 b(Currently)m(,)11
b(MP)h(provides)f(support)f(of)h(GMP)-5 b(,)12 b(P)l(ARI,)g(and)g(SAC)f
(big)g(integers)g(and)h(GMP)f(big)g(reals)h(\(see)75
1439 y(the)g(INST)m(ALL)h(\256le)g(with)e(the)h(distribution)d(for)j
(how)g(to)f(enable)i(and)f(use)h(alternative)f(packages\).)22
b(For)12 b(point-to-poin)o(t)75 1488 y(communication)e(\(TCP)g
(device\),)h(the)f(philosophy)e(is:)137 1571 y Ft(\017)21
b Fv(if)8 b(two)g(sides)h(can)h(agree)g(on)e(a)i(non-GMP)e(format,)h
(they)g(may)g(send)g(and)g(receive)h(in)e(that)g(format)h(and)g
(thereby)g(gain)179 1621 y(maximum)14 b(ef)o(\256ciency)h(in)e
(transmission)g(because)j(there)e(are)g(no)g(conversions)f(to)g(be)i
(done\(assuming)e(you)g(are)179 1671 y(using)e(one)h(of)f(the)h
(supported)f(packages\))i(.)20 b(The)13 b(negotiation)d(of)i(which)f
(format)h(to)f(use)i(is)e(done)h(automatically)179 1721
y(when)e(the)g(link)f(is)h(opened.)137 1804 y Ft(\017)21
b Fv(if)12 b(the)g(two)g(sides)g(cannot)h(agree,)h(then)e(sending)g
(and)g(receiving)g(is)h(always)g(done)f(in)g(the)g(GMP)g(format,)i(but)
d(the)179 1854 y(non-GMP)f(side)i(has)g(the)f(illusion)e(of)j(sending)e
(and)i(receiving)f(in)g(its)g(native)g(format)g(since)h(the)f
(conversions)g(are)179 1904 y(done)g(internally)e(by)i(the)g(PutApNum)f
(and)h(GetApNum)g(routines)f(\(again,)i(assuming)f(you)f(are)i(using)e
(one)h(of)g(the)179 1953 y(supported)e(packages\).)p
75 2059 1793 2 v 75 2335 2 277 v 102 2127 a Fk(MP_Status_)q(t)26
b(MP_SetEnvB)q(ig)q(Int)q(Fo)q(rma)q(t)g(\(MP_Env_t)g(*env,)e(MP_BigIn)
q(tO)q(ps_)q(t)i(*ops,)886 2182 y(MP_BigInt)q(Fo)q(rm)q(at_)q(t)g
(format\))102 2237 y(MP_Status_)q(t)g(MP_SetEnvB)q(ig)q(Rea)q(lF)q(orm)
q(at)g(\(MP_Env_t)g(*env,)f(MP_BigRea)q(lOp)q(s_)q(t)g(*ops,)886
2292 y(MP_BigRea)q(lF)q(or)q(mat)q(_t)h(format\))p 1866
2335 V 75 2337 1793 2 v 234 2420 a Fv(T)m(able)11 b(4.4:)j(MP)d
(environment)e(routine)g(to)h(add)g(an)h(arbitrary)e(precision)g
(integer)h(and)g(real)h(package)122 2520 y(Support)g(for)h(an)h
(alternative)f(big)f(integer/real)h(package)i(includes)d(routines)h(to)
g(put)f(and)i(get)f(an)h(integer/real)e(in)h(the)75 2570
y(package')n(s)e(format,)f(to)f(convert)g(between)h(the)g(package')n(s)
h(format)e(and)h(the)f(GMP)h(format,)g(and)g(to)f(convert)h(the)f
(package')n(s)75 2619 y(format)17 b(to)f(a)h(string)f(for)g(logging.)33
b(These)19 b(operations)c(are)j(contained)f(in)f(a)h(structure)g(\()p
Fs(MP_BigIntOps_t)e Fv(and)954 2754 y(42)p eop
%%Page: 43 44
43 43 bop 75 121 a Fs(MP_BigRealOps_t)8 b Fv(de\256ned)i(in)f
Fs(MP_BigNum.h)p Fv(\))f(which)h(is)h(passed)g(to)f(the)g(environment)g
(through)f(the)h(ar)o(gument)75 171 y Fs(ops)p Fv(.)23
b(See)14 b Fs(MP_BigNum.c)e Fv(and)h Fs(MP_GmpBigReal.c)f
Fv(for)h(examples.)24 b Fs(format)12 b Fv(be)i(must)f(one)g(of)f(the)h
(formats)75 221 y(de\256ned)e(in)e Fs(MP_BigNum.h)p Fv(.)122
271 y(Note)i(that)g(the)g(use)h(of)f(alternative)f(\(arbitrary)h
(precision\))f(number)h(packages)i(must)e(explicitely)e(enabled)j(by)f
(giving)75 321 y(the)16 b(appropriate)g Fs(--enable-PACKAGE)f
Fv(option)g(to)h(the)g Fs(configure)g Fv(script,)i(prior)d(to)h
(building)e(MP)-5 b(.)18 b(See)f(the)75 370 y(INST)m(ALL)11
b(\256le)f(that)g(accompanies)i(the)e(distribution)d(for)j(how)f(to)h
(enable)h(it)e(as)i(the)f(package)i(to)d(use.)75 509
y Fm(4.2)58 b(Setting)16 b(Link)f(Options)p 75 583 1793
2 v 75 749 2 166 v 102 651 a Fk(int)23 b(MP_GetLi)q(nkO)q(pt)q(ion)q
(\(M)q(P_)q(Lin)q(k_)q(pt)j(link,)e(int)g(option\))102
706 y(int)f(MP_SetLi)q(nkO)q(pt)q(ion)q(\(M)q(P_)q(Lin)q(k_)q(pt)j
(link,)e(int)g(option,)h(int)f(value\))p 1866 749 V 75
751 1793 2 v 687 834 a Fv(T)m(able)11 b(4.5:)j(MP)d(link)e(option)f
(routines)122 927 y(The)j(link)d(options)g(settable)i(by)f(the)h
(programmer)g(are)h(shown)e(in)g(table)h(4.6.)15 b(The)10
b(current)g(value)g(for)f(an)h(environment)75 977 y(option)i(may)j(be)f
(discovered)g(with)f(a)h(call)g(to)f Fs(MP_GetLinkOption\(\))g
Fv(which)g(returns)g(the)h(current)g(value)g(of)f(the)75
1027 y(speci\256ed)h(option.)24 b Fs(MP_SetLinkOption\(\))12
b Fv(sets)i(the)f(speci\256ed)i(link)d Fs(option)h Fv(to)g
Fs(value)p Fv(.)25 b(The)15 b(send/receive)75 1076 y(mode)h(and)g
(logging)e(options)g(are)j(explained)e(below)m(.)32 b(The)16
b(old)f(value)h(of)g(the)f(option)f(is)i(returned)f(on)h(success)h(and)
75 1126 y Fs(MP)p 127 1126 13 2 v 15 w(Failure)10 b Fv(is)h(returned)g
(if)f(the)h(option)f(is)h(unknown)e(or)i(the)g(value)g(is)g(illegal.)17
b(Clearly)10 b(a)i(link')n(s)d(options)h(cannot)h(be)75
1176 y(changed)g(before)f(the)g(link)f(has)i(been)g(created)g(with)e(a)
i(call)f(to)g Fs(MP)p 1039 1176 V 15 w(OpenLink\(\))p
Fv(.)75 1293 y Ff(4.2.1)50 b(Setting)11 b(a)i(link')n(s)e(send/r)o
(eceive)i(modes)75 1371 y Fv(A)f(few)g(options)f(determining)f(the)i
(buf)o(fering)f(layer)r(')n(s)g(behavior)h(are)g(available)g(to)g(the)g
(application)e(programmer)n(.)20 b(The)75 1421 y(way)12
b(in)e(which)h(a)h(link)e(sends)i(data)f(is)g(referred)h(to)f(as)h(its)
e Fu(send)i(mode)p Fv(,)g(and)f(the)g(way)h(it)e(reads)i(in)f(MP)g
(data)h(is)f(its)g Fu(r)n(eceive)75 1471 y(mode)p Fv(.)k(The)c(user)g
(can)g(specify)f(the)g(send)h(mode)f(as:)137 1554 y Ft(\017)21
b Fs(MP)p 231 1554 V 15 w(SEND)p 346 1554 V 14 w(FRAG)p
460 1554 V 15 w(MSG)26 b Fv(In)13 b(this)f(mode,)j(the)e(link)e
(maintains)i(only)f(one)h(output)f(buf)o(fer)h(fragment)g(at)g(any)g
(time)179 1604 y(which)7 b(is)g(written)f(to)h(the)g(transport)f
(device)i(when)f(it)g(becomes)h(full)e(\(the)h(default)g(behavior\).)14
b(For)7 b(some)h(transports,)179 1654 y(this)i(mode)i(provides)f(some)h
(simple)f(concurrency)h(in)e(message)k(processing,)d(allowing)f(the)h
(receiver)i(to)e(process)179 1704 y(the)f(fragment)g(of)g(the)g
(message)i(received)f(while)f(the)g(sender)h(assembles)g(and)g(sends)f
(the)g(rest)h(of)f(the)g(message.)137 1784 y Ft(\017)21
b Fs(MP)p 231 1784 V 15 w(SEND)p 346 1784 V 14 w(WHOLE)p
485 1784 V 15 w(MSG)d Fv(W)m(ait)9 b(until)f(the)h(whole)g(message)i
(is)e(assembled)h(on)f(the)g(sending)g(side)g(before)h(sending)179
1834 y(it)e(\(i.e.,)j(wait)e(for)g Fs(MP)p 487 1834 V
15 w(EndMsg\(\))g Fv(to)g(be)h(called\).)15 b(The)10
b(number)f(of)h(output)d(buf)o(fer)j(fragments)f(a)h(link)f(may)h(use)g
(in)179 1883 y(this)f(mode)i(is)f(limited)f(only)g(by)h(the)g(amount)g
(of)g(memory)h(available)f(to)g(the)g(process.)122 1967
y(The)h(receiver)g(has)g(three)f(options)f(in)h(specifying)f(how)h
(data)g(is)g(to)g(be)h(read)f(from)g(a)h(link)e(\(receive)i(mode\):)137
2044 y Ft(\017)21 b Fs(MP)p 231 2044 V 15 w(RECV)p 346
2044 V 14 w(FRAG)p 460 2044 V 15 w(MSG)p 550 2044 V 14
w(RECVER)26 b Fv(The)14 b(link)d(will)h(read)h(until)f(one)h
Fu(r)n(eceiver)p Fv(')n(s)i(buf)o(fer)e(fragment)f(is)h(full,)g(post-)
179 2094 y(poning)8 b(subsequent)h(reads)h(until)d(all)j(data)f(in)g
(the)g(buf)o(fer)h(has)f(been)h(consumed)g(\(the)f(default)g
(behavior\).)14 b(The)c(link)179 2144 y(keeps)h(only)e(one)h(input)f
(buf)o(fer)h(fragment)g(at)h(any)f(time.)15 b(This)10
b(option)f(may)i(be)f(useful)g(when)g(memory)h(is)f(low)m(.)137
2224 y Ft(\017)21 b Fs(MP)p 231 2224 V 15 w(RECV)p 346
2224 V 14 w(FRAG)p 460 2224 V 15 w(MSG)p 550 2224 V 14
w(SENDER)e Fv(The)11 b(link)d(will)g(read)i(one)g Fu(sender)p
Fv(')n(s)g(fragment)g(at)f(a)i(time,)f(postponing)d(subse-)179
2274 y(quent)h(reads)i(until)e(all)h(data)h(in)e(the)h(fragment)h(has)f
(been)h(consumed.)16 b(The)10 b(distinction)c(is)j(that)g(the)g(sender)
r(')n(s)g(buf)o(fer)179 2323 y(fragment)i(size)g(may)g(be)h(greater)f
(than)f(that)g(of)h(the)g(receiver)n(,)h(possibly)d(requiring)g(the)i
(receiver)h(to)e(allocate)h(extra)179 2373 y(memory)g(buf)o(fer)f
(fragments)g(to)g(accommodate)i(the)e(incoming)f(data.)137
2453 y Ft(\017)21 b Fs(MP)p 231 2453 V 15 w(RECV)p 346
2453 V 14 w(WHOLE)p 485 2453 V 15 w(MSG)f Fv(The)11 b(link)e(will)g
(read)i(a)g(complete)f(message)i(before)f(returning.)122
2530 y(The)k(number)f(of)g(input)f(buf)o(fers)h(a)h(link)e(may)i(use)g
(is)f(limited)f(only)g(by)h(the)g(amount)g(of)g(memory)g(available)h
(to)e(the)75 2580 y(process.)j(Also,)10 b(while)f(all)h(buf)o(fers)g
(within)e(a)j(single)e(application)g(will)f(be)j(the)f(same)h(size,)g
(there)f(is)g(no)g(requirement)g(that)75 2630 y(the)g(communicating)g
(applications)f(have)i(same-size)h(buf)o(fers.)954 2754
y(43)p eop
%%Page: 44 45
44 44 bop 214 123 1523 2 v 213 173 2 50 v 274 158 a Fv(Behavior)p
485 173 V 485 173 V 265 w(Option)p 1012 173 V 1012 173
V 458 w(Legal)11 b(V)-5 b(alues)p 1735 173 V 214 174
1523 2 v 213 224 2 50 v 239 209 a(send)10 b(mode)p 485
224 V 94 w Fe(MP)p 567 209 12 2 v 13 w(LINK)p 669 209
V 14 w(SEND)p 781 209 V 13 w(MODE)p 904 209 V 13 w(OPT)p
1012 224 2 50 v 52 w(MP)p 1094 209 12 2 v 13 w(SEND)p
1205 209 V 13 w(FRAG)p 1318 209 V 13 w(MSG)g(\(default\))p
1735 224 2 50 v 213 274 V 485 274 V 1012 274 V 1038 259
a(MP)p 1094 259 12 2 v 13 w(SEND)p 1205 259 V 13 w(WHOLE)p
1353 259 V 14 w(MSG)p 1735 274 2 50 v 213 324 V 485 324
V 1012 324 V 1735 324 V 213 374 V 239 359 a Fv(receive)h(mode)p
485 374 V 50 w Fe(MP)p 567 359 12 2 v 13 w(LINK)p 669
359 V 14 w(RECV)p 783 359 V 13 w(MODE)p 906 359 V 14
w(OPT)p 1012 374 2 50 v 49 w(MP)p 1094 359 12 2 v 13
w(RECV)p 1207 359 V 13 w(FRAG)p 1320 359 V 14 w(MSG)p
1415 359 V 13 w(RECVER)e(\(default\))p 1735 374 2 50
v 213 424 V 485 424 V 1012 424 V 1038 409 a(MP)p 1094
409 12 2 v 13 w(RECV)p 1207 409 V 13 w(FRAG)p 1320 409
V 14 w(MSG)p 1415 409 V 13 w(SENDER)p 1735 424 2 50 v
213 473 V 485 473 V 1012 473 V 1038 458 a(MP)p 1094 458
12 2 v 13 w(RECV)p 1207 458 V 13 w(WHOLE)p 1355 458 V
14 w(MSG)p 1735 473 2 50 v 213 523 V 485 523 V 1012 523
V 1735 523 V 213 573 V 239 558 a Fv(log)g(mask)p 485
573 V 122 w Fe(MP)p 567 558 12 2 v 13 w(LINK)p 669 558
V 14 w(LOG)p 760 558 V 13 w(MASK)p 881 558 V 14 w(OPT)p
1012 573 2 50 v 74 w(MP)p 1094 558 12 2 v 13 w(LOG)p
1184 558 V 14 w(INIT)p 1272 558 V 14 w(EVENTS)f(\(default\))p
1735 573 2 50 v 213 623 V 485 623 V 1012 623 V 1038 608
a(MP)p 1094 608 12 2 v 13 w(LOG)p 1184 608 V 14 w(READ)p
1300 608 V 13 w(EVENTS)p 1735 623 2 50 v 213 673 V 485
673 V 1012 673 V 1038 658 a(MP)p 1094 658 12 2 v 13 w(LOG)p
1184 658 V 14 w(WRITE)p 1316 658 V 13 w(EVENTS)p 1735
673 2 50 v 213 722 V 485 722 V 1012 722 V 1038 707 a(MP)p
1094 707 12 2 v 13 w(LOG)p 1184 707 V 14 w(ALL)p 1271
707 V 13 w(EVENTS)p 1735 722 2 50 v 213 772 V 485 772
V 1012 772 V 1038 757 a(MP)p 1094 757 12 2 v 13 w(LOG)p
1184 757 V 14 w(NO)p 1252 757 V 13 w(READ)p 1367 757
V 13 w(EVENTS)p 1735 772 2 50 v 213 822 V 485 822 V 1012
822 V 1038 807 a(MP)p 1094 807 12 2 v 13 w(LOG)p 1184
807 V 14 w(NO)p 1252 807 V 13 w(WRITE)p 1383 807 V 14
w(EVENTS)p 1735 822 2 50 v 213 872 V 485 872 V 1012 872
V 1038 857 a(MP)p 1094 857 12 2 v 13 w(LOG)p 1184 857
V 14 w(NO)p 1252 857 V 13 w(EVENTS)p 1735 872 2 50 v
214 874 1523 2 v 751 965 a Fv(T)m(able)j(4.6:)j(MP)d(link)e(options)75
1097 y Ff(4.2.2)50 b(Logging)12 b(a)h(session)75 1175
y Fv(MP)c(recognizes)g(a)g(set)g(of)f(events)h(that)f(can)h(occur)g
(during)e(the)i(course)g(of)f(a)h(session)g(and)f(information)f(about)h
(these)h(events)75 1224 y(can)i(be)g(logged)e(in)h(the)g(log)f(\256le.)
122 1274 y(Logging)g(of)g(events)h(must)f(explicitely)f(be)i(enabled)g
(by)f(giving)f(the)i Fs(--with-debug)e Fv(option)g(to)h(the)h
Fs(configure)75 1324 y Fv(script)i(prior)f(to)h(building)e(MP)i
(\(alternatively)m(,)g(logging)f(can)i(be)g(enabled)f(by)g
Fu(unde\256ning)f Fv(the)h Fs(NO_LOGGING)g Fv(prepro-)75
1374 y(cessor)f(macro\).)122 1424 y(If)f(logging)f(is)h(enabled,)g(the)
h(following)c(events)k(are)g(currently)e(recognized:)137
1505 y Ft(\017)21 b Fl(error)14 b(events)28 b Fs(MP)p
460 1505 13 2 v 15 w(ERROR)p 600 1505 V 14 w(EVENT)42
b Fv(Any)14 b(error)g(that)g(occurs)g(during)f(initialization,)f
(sending,)j(or)f(receiving)179 1555 y(data,)d(or)f(during)f
(conversions.)16 b(Error)10 b(events)h(are)g(always)g(logged)f(and)g
(cannot)h(be)g(disabled)f(\(unless)g(logging)e(as)179
1605 y(a)j(whole)e(is)h(disabled\).)137 1687 y Ft(\017)21
b Fl(read)15 b(events)31 b Fs(MP)p 454 1687 V 15 w(READ)p
569 1687 V 14 w(EVENT)45 b Fv(Reads)16 b(from)f(the)g(link')n(s)e
(receive)j(buf)o(fer)f(and)g(reads)h(from)f(the)f(transport)179
1737 y(device)c(to)g(the)g(receive)h(buf)o(fer)n(.)137
1819 y Ft(\017)21 b Fl(write)11 b(events)23 b Fs(MP)p
457 1819 V 14 w(WRITE)p 596 1819 V 15 w(EVENT)f Fv(W)n(rites)12
b(to)e(the)i(link')n(s)d(write)i(buf)o(fer)g(and)h(writes)e(from)i(the)
f(write)g(buf)o(fer)g(to)179 1869 y(the)f(transport)f(device.)137
1951 y Ft(\017)21 b Fl(init)8 b(events)20 b Fs(MP)p 422
1951 V 15 w(INIT)p 537 1951 V 14 w(EVENT)30 b Fv(Initialization)7
b(events)j(such)g(as)g(the)g(creation)g(and)f(release)j(of)d(an)h
(environment)179 2001 y(or)g(link,)f(and)h(resetting)g(options)e(on)i
(an)h(environment)e(or)h(link.)122 2082 y(Logging)c(is)h(done)f(on)h(a)
g(per)h(link)d(basis.)14 b(The)8 b(log)e(\256le)h(is)g(opened)g(as)g
(part)g(of)g(the)f(initialization)t(of)h(the)g(MP)g(environment.)75
2132 y(The)12 b(name)h(is)e Fs(/tmp/mplog.xxx)p Fv(,)g(where)h
Fs(xxx)f Fv(is)h(an)g(integer)f(starting)f(at)h(100.)19
b(Each)12 b(link)f(maintains)g(a)h(log)e(mask)75 2181
y(identifying)c(which)i(events)h(to)f(log.)14 b(The)c(mask)f(may)h(be)f
(changed)g(through)e(a)i(call)g(to)f Fs(MP)p 1383 2181
V 15 w(SetLinkOption\(\))p Fv(.)13 b(Note)75 2231 y(that)8
b(you)g(may)i(enable)f(and)g(disable)f(event)h(logging)e(at)i(will.)k
(This)c(is)g(especially)g(useful)f(when)h(you)f(know)g(your)g(program)
75 2281 y(is)h(about)g(to)g(output)e(a)j(really)f(lar)o(ge)h(amount)e
(of)h(data)h(\(say)m(,)h(a)e(huge)g(polynomial\))f(and)h(you)g(don')o
(t)f(want)h(to)g(have)h(it)e(written)75 2331 y(to)i(the)f(log)h
(\256le.)15 b(Y)l(ou)10 b(cannot)g(disable)f(logging)f(of)i(error)g
(events)g(\(except)h(by)e(disabling)g(logging)f(entirely\).)14
b(The)d(default)75 2381 y(logmask)f(includes)g(initialization)d(and)j
(error)g(events.)122 2431 y(Figure)j(4.1)h(gives)f(part)h(of)f(a)h
(sample)g(log)f(\256le.)26 b(The)14 b(preamble)g(gives)f(essential)h
(information)e(about)h(the)g(creation)75 2480 y(of)f(an)g(environment.)
19 b(Each)13 b(line)e(of)g(output)f(associated)j(with)e(a)h(link)f(is)g
(prefaced)i(by)f(the)f(link)g(id;)h Fs(L1)f Fv(in)h(the)f(example)75
2530 y(below)m(.)28 b(This)14 b(is)h(followed)e(by)h(the)g(event)h
(type)f(and)g(then)h(relevant)f(information)f(about)g(the)i(event.)28
b(When)15 b(reading)75 2580 y(or)i(writing)e(data,)k(the)e(data)g(and)g
(packet)g(types)g(are)h(easily)f(discerned)g(from)g(the)g(\256eld)f
(following)f(the)i(event)g(\256eld.)75 2630 y(First)11
b(there)h(is)g(the)g(data)g(type)g(\(e.g.,)i Fs(Operator)d
Fv(or)h Fs(Sint32)p Fv(\))f(followed)g(by)h(either)p
1379 2630 V 26 w Fs(NP)g Fv(indicating)f(a)h(Node)g(Packet)954
2754 y(44)p eop
%%Page: 45 46
45 45 bop 75 121 a Fv(generated)10 b(by)f(an)h Fs
(MP_Put/Get<type>Packet\(\))e Fv(routine,)h(or)p 1139
121 13 2 v 24 w Fs(DP)h Fv(indicating)e(a)i(Data)g(Limb,)g(generated)h
(by)e(an)75 171 y Fs(IMP_Put/Get<type>\(\))h Fv(routine.)18
b(Annotations)9 b(are)j(identi\256ed)f(by)g(the)p 1270
171 V 26 w Fs(AP)h Fv(suf)o(\256x,)g(indicating)d(an)j(Annotation)75
221 y(Packet,)i(with)d(the)h(pre\256x)h(giving)d(the)i(annotation)f
(type.)21 b(The)13 b(notation)d(used)j(for)f(the)g(entries)g(in)g(the)g
(annotation)f(\257ags)75 271 y(\256eld)f(are)h(shown)f(in)g(table)g
(4.7.)75 389 y Fs(MP)25 b(environment:)f(Multi)g(Protocol)g(Version)g
(1.1.2)h(Fri)f(May)50 b(2)25 b(14:45:47)f(1997)274 439
y(host:)99 b(Eeyore)274 488 y(log)25 b(file:)f(/tmp/mplog.101)274
538 y(buffer)h(size:)f(1024)h(bytes)274 588 y(max)g(free)f(buffers:)h
(32)274 638 y(init)g(free)f(buffers:)g(16)274 688 y(number)h(output)f
(buffers:)g(1)274 737 y(native)h(word)f(ordering:)g(big)h(endian)274
787 y(native)g(floating)f(point)g(format:)g(IEEE)274
837 y(native)h(multiple)f(precision)g(integer)g(format:)g(GMP)274
937 y(Added)h(transport)f(device)g(TCP)h(to)f(environment)274
986 y(Added)h(transport)f(device)g(FILE)h(to)f(environment)75
1036 y(L1:)h(InitE)74 b(file_open_connection:)23 b(opened)h(file)h
(ex1.mp)f(in)h(write)f(mode)75 1086 y(L1:)h(Application:)e(client)75
1136 y(L1:)i(InitE)74 b(MP_OpenLink:)24 b(opened)g(link)h(for)f
(transport)g(FILE)75 1186 y(L1:)h(InitE)74 b(MP_SetLinkOption:)23
b(set)i(logmask)f(to)h(0x4)75 1236 y(L1:)g(InitE)74 b
(MP_SetLinkOption:)23 b(set)i(logmask)f(to)h(0x6)75 1285
y(L1:)g(InitE)74 b(MP_SetLinkOption:)23 b(set)i(logmask)f(to)h(0x7)75
1335 y(InitE)49 b(:)25 b(environment)f(BigInt)g(format)h(set)f(to)h
(GMP)75 1385 y(InitE)49 b(:)25 b(environment)f(BigReal)g(format)h(set)f
(to)h(GMP)75 1435 y(L1:)g(WriteE)49 b(Operator_NP)74
b(annots:)24 b(0)74 b(dict:)25 b(129)74 b(op:)25 b(testSint32s)74
b(args:)24 b(3)75 1485 y(L1:)h(WriteE)49 b(Sint32_NP)124
b(value:)24 b(0)75 1534 y(L1:)h(WriteE)49 b(Sint32_NP)124
b(value:)24 b(-2147483648)75 1584 y(L1:)h(WriteE)49 b(AnnotPkt)149
b(dict:)24 b(2)75 b(atype:)24 b(7)75 b(flags:)24 b(Sup)h(Arg)f(Tree)75
1634 y(L1:)h(WriteE)49 b(String_NP)124 b(annots:)24 b(0)74
b(value:)25 b(lowerbound-for-Sint32s)75 1684 y(L1:)g(WriteE)49
b(Sint32_NP)124 b(value:)24 b(2147483647)75 1734 y(L1:)h(WriteE)49
b(AnnotPkt)149 b(dict:)24 b(2)75 b(atype:)24 b(7)75 b(flags:)24
b(Sup)h(Arg)f(Tree)75 1784 y(L1:)h(WriteE)49 b(String_NP)124
b(annots:)24 b(0)74 b(value:)25 b(upperbound-for-Sint32s)75
1833 y(L1:)g(WriteE)49 b(Operator_NP)74 b(annots:)24
b(0)74 b(dict:)25 b(129)74 b(op:)25 b(testUint32s)74
b(args:)24 b(2)75 1883 y(L1:)h(WriteE)49 b(Uint32_NP)124
b(value:)24 b(0)75 1933 y(.)h(.)g(.)687 2030 y Fv(Figure)10
b(4.1:)k(Sample)d(logging)e(output)122 2138 y Fs(MP_LogEvent\(\))p
Fv(can)19 b(be)h(used)g(to)e(place)i(a)g(log)f(message)i(in)e(the)g
(log)g(\256le)g(associated)i(with)d Fs(link)p Fv(.)42
b(The)75 2188 y Fs(log)p 152 2188 V 15 w(event)14 b Fv(can)h(be)g(one)f
(of)h(the)f(log)g(events)g(described)h(above)g(or)f(a)h(string)e
(supplied)h(by)g(the)g(user)n(.)28 b Fs(log)p 1745 2188
V 15 w(msg)14 b Fv(is)75 2238 y(a)d(string)e(containing)f(the)i
(message)j(you)c(wish)h(to)g(log.)122 2288 y(Logging)h(is)g(very)g
(useful)g(when)h(debugging,)f(but)f(can)j(hamper)f(performance.)20
b(The)12 b(default)f(is)g(to)g(compile)h(the)f(MP)75
2338 y(library)e(with)g(logging)f(enabled.)75 2477 y
Fm(4.3)58 b(Pr)o(ototypes)75 2570 y Fv(By)10 b(default,)g(the)g(ar)o
(guments)h(of)f(any)g(operator)g(are)h(MP)f(T)o(rees)h(\(see)g
(\256gure)g(3.1)f(given)g(earlier)g(and)g(\256gure)h(4.2)f(described)75
2620 y(below\).)k(However)n(,)9 b(when)f(all)f(of)h(the)f(ar)o(guments)
h(of)g(an)g(operator)f(have)h(a)g(homogeneous)g(syntactic)f(format)g
(it)g(is)h(possible)954 2754 y(45)p eop
%%Page: 46 47
46 46 bop 623 123 705 2 v 622 173 2 50 v 648 158 a Fv(Notation)p
817 173 V 48 w(Meaning)p 1326 173 V 623 174 705 2 v 622
224 2 50 v 648 209 a(Req)p 817 224 V 128 w(Required)9
b(annotation)p 1326 224 V 622 274 V 648 259 a(Sup)p 817
274 V 130 w(Supplemental)h(annotation)p 1326 274 V 623
276 705 2 v 622 326 2 50 v 648 311 a(Ar)o(g)p 817 326
V 131 w(annotation)f(has)h(an)h(ar)o(gument)p 1326 326
V 622 375 V 648 360 a(NoAr)o(g)p 817 375 V 80 w(annotation)e(has)h(no)g
(ar)o(gument)p 1326 375 V 623 377 705 2 v 622 427 2 50
v 648 412 a(Node)p 817 427 V 105 w(annotation)f(has)h(node)g(scope)p
1326 427 V 622 477 V 648 462 a(T)o(ree)p 817 477 V 121
w(annotation)f(has)h(tree)h(scope)p 1326 477 V 623 478
705 2 v 633 558 a(T)m(able)g(4.7:)k(Annotation)8 b(\257ags)j(in)e(log)h
(entries)75 692 y(to)i(minimize)g(the)h(overhead)f(incurred)g(by)g(the)
h(node)f(packet)h(headers)g(of)g(the)f(ar)o(guments.)22
b(Ideally)m(,)13 b(we)g(would)f(like)g(to)75 741 y(send)g
Fu(just)f Fv(the)h(data)g(and)g(avoid)f(the)h(overhead)g(of)g(all)f
(the)h(typing)e(information.)18 b(An)12 b(array)g(of)g(\257oating)f
(point)f(numbers)75 791 y(is)k(a)g(good)f(example,)j(but)d(the)g(data)i
(could)e(be)h(more)g(structured)f(-)h(an)g(array)g(of)g(complex)g(or)f
(rational)g(numbers,)i(or)f(a)75 841 y(polynomial)9 b(or)g(generators)i
(of)f(an)g(ideal.)122 891 y(A)e Fu(pr)n(ototype)p Fv(,)g(then,)g(is)g
(a)g(syntax)f(tree)h(providing)d(type)j(and)f(structuring)f
(information)g(about)h(a)h(composite)f(data)h(object.)75
941 y(The)13 b(sender)f(uses)h(the)f(prototype)e(to)h(de\256ne)i(the)f
(object.)20 b(Similarly)m(,)11 b(the)h(receiver)h(uses)g(this)e
(information)f(to)h(properly)75 990 y(parse)i(the)g(\252raw\272)h
(data.)22 b(This)13 b(section)f(gives)g(a)h(brief)f(description)g(of)g
(how)g(to)g(construct)g(a)h(prototype;)f(more)h(detailed)75
1040 y(information)8 b(can)j(be)g(found)e(in)h([3)o(].)75
1159 y Ff(4.3.1)50 b(pr)o(ototypes)12 b(and)g(meta)g(types)75
1237 y Fv(A)g(very)f(simple)g(example)h(will)e(both)h(motivate)g(the)g
(need)h(for)f(prototypes)f(and)h(their)g(use.)19 b(Consider)10
b(an)i(array)g(of)f(1000)75 1286 y Fs(float)p Fv(s)f(\()p
Fs(MP_Real32Type)p Fv(\))f(as)i(shown)f(in)f(the)h(stylized)g(MP)g(T)o
(ree)h(in)f(\256gure)g(4.2.)455 1418 y(Figure)f(4.2:)15
b(MP)10 b(T)o(ree)h(for)f(an)g(array)h(of)f(1000)f(MP)p
1211 1418 13 2 v 15 w(Real32)h(numbers)p 368 1468 1214
2 v 367 1514 2 46 v 380 1500 a Fe(T)m(ype)122 b(Dict)41
b(V)l(alue)168 b(#Annot:Ar)o(g)23 b(Remarks)p 1581 1514
V 368 1515 1214 2 v 367 1578 2 63 v 380 1547 a(Cop)134
b(Proto)24 b(CopProtoArray)f(0:1000)98 b(1\))10 b(Common)e(Operator)h
(Packet)p 1581 1578 V 367 1623 2 46 v 380 1610 a(MP)p
436 1610 12 2 v 14 w(Real32)127 b(1.0)207 b(0:)174 b(2\))10
b(\256rst)f(element)p 1581 1623 2 46 v 367 1669 V 380
1655 a(MP)p 436 1655 12 2 v 14 w(Real32)127 b(2.0)207
b(0:)174 b(3\))10 b(second)d(element)p 1581 1669 2 46
v 367 1715 V 682 1701 a Fc(:)f(:)g(:)p 1581 1715 V 367
1760 V 380 1747 a Fe(MP)p 436 1747 12 2 v 14 w(Real32)127
b(1000.0)150 b(0:)174 b(1001\))9 b(thousandth)e(element)p
1581 1760 2 46 v 368 1762 1214 2 v 122 1850 a Fv(Line)12
b(\(1\))f(indicates)g(that)g(we)h(have)g(an)g(array)g(of)f(1000)g(ar)o
(guments)h(\(elements\).)19 b(These)13 b(elements)f(follow)e(from)i
(line)75 1899 y(\(2\))f(on.)17 b(The)12 b(use)g(of)e(MP)p
454 1899 13 2 v 15 w(Real32)h(in)g(the)g(T)m(ype)g(column)g(indicates)g
(that)g(a)g(node)g(packet)h(was)g(used)f(to)g(send)g(the)g(datum.)75
1949 y(Recall)g(that)f(the)h(cost)g(of)f(each)i(node)f(packet)g
Fu(header)h Fv(is)e(four)g(bytes.)17 b(So)11 b(the)g(size)g(of)g(this)f
(MP)h(T)o(ree)g(is)g(8,008)f(bytes.)17 b(Of)75 1999 y(the)11
b(8,000)g(bytes)h(devoted)f(to)g(sending)g(the)g(\257oating)f(point)g
(numbers)i(\(line)f(\(2\))g(on\),)h(4,000)f(bytes)g(are)h(required)f
(for)g(the)75 2049 y(packet)e(headers)h(and)f(another)g(4,000)f(for)h
(the)f(data.)15 b(Clearly)9 b(it)f(is)h(a)g(nuisance)g(\(and)g(inef)o
(\256cient\))g(to)f(have)h(the)g(duplication)75 2099
y(of)14 b(the)g(type)g(information)e(for)i(each)h(data)g(element)g(of)f
(the)g(array)m(.)28 b(This)14 b(is)g(not)f(merely)i(a)g(matter)f(of)g
(the)g(size)h(of)f(the)75 2148 y(data.)h(Since)c(the)f(type)g
(information)e(is)i(attached)h(to)e(each)j(data)e(element,)h(the)f
(receiver)h(is)f(forced)g(to)g(make)h(a)g(linear)f(pass)75
2198 y(through)e(the)i(array)m(,)g(extracting)f(each)i(datum)f(one)g
(at)g(a)g(time.)15 b(A)10 b(much)g(more)g(ef)o(\256cient)g(approach)g
(would)f(be)h(to)f(transmit)75 2248 y(the)g(data)g(as)h(a)f(block)f(of)
h(bytes)g(\(which)f(is)h(likely)f(how)g(it)g(is)h(stored)g(within)e
(the)i(application\))e(which)h(not)h(only)e(reduces)j(the)75
2298 y(amount)g(of)h(data)f(that)g(must)h(be)g(sent,)g(but)f(also)g
(allows)g(the)h(sender)g(and)g(receiver)g(to)f(use)h(very)g(ef)o
(\256cient)g(memory)g(move)75 2348 y(operations)h(to)h(move)g(the)g
(data)g(between)g(application-)f(and)h(MP-memory)g(spaces.)25
b(But)12 b(this)h(requires)f(a)i(mechanism)75 2398 y(which)9
b(tells)g(the)h(receiver)g(that)f(each)i(element)f(of)g(the)f(array)h
(is)g(of)f(a)h(single)f(type.)15 b(This)10 b(is)f(precisely)h(what)f
(the)h(prototype)75 2447 y(annotation)f(does.)15 b(So)10
b(prototypes)f(may)i(be)f(thought)f(of)h(as)h Fu(type)f(speci\256ers)p
Fv(.)122 2497 y(Consider)e(\256gure)g(4.3,)h(which)f(is)h(a)g
(prototyped)d(version)i(of)g(\256gure)h(4.2)f(\(the)g(code)h(to)f(send)
h(this)e(tree)i(is)f(shown)g(in)g(\256gure)75 2547 y(4.4\).)19
b(As)12 b(before,)h(line)e(\(1\))g(contains)g(the)g(common)h(operator)f
Fs(CopProtoArray)g Fv(de\256ned)h(in)f(the)h(Proto)e(\(prototype\))75
2597 y(dictionary)m(.)j(But)8 b(now)h(the)f(packet)h(header)h
(indicates)e(that)g(an)i(annotation)d(is)h(attached)h(to)f(the)h
(operator)n(.)14 b(The)9 b(annotation,)954 2754 y(46)p
eop
%%Page: 47 48
47 47 bop 351 149 a Fv(Figure)10 b(4.3:)15 b(Prototyped)8
b(MP)j(T)o(ree)g(for)e(an)i(array)g(of)e(1000)h(IMP)p
1315 149 13 2 v 15 w(Real32)g(numbers)p 292 200 1366
2 v 291 245 2 46 v 304 232 a Fe(T)m(ype)134 b(Dict)41
b(V)l(alue)168 b(#Annot:Ar)o(g)24 b(Remarks)p 1657 245
V 292 247 1366 2 v 291 309 2 63 v 304 279 a(Cop)146 b(Proto)24
b(CopProtoArray)f(1:1000)99 b(1\))9 b(Common)f(Operator)i(Packet)p
1657 309 V 291 355 2 46 v 304 341 a(AP)161 b(Proto)24
b(Prototype)312 b(2\))9 b(Prototype)g(Annotation)f(Packet)p
1657 355 V 291 417 2 63 v 304 387 a(Cmt)145 b(Proto)24
b(IMP)p 686 387 12 2 v 14 w(Real32)67 b(0:)203 b(3\))9
b(MP)g(type)g(speci\256cation)p 1657 417 2 63 v 291 463
2 46 v 304 449 a(IMP)p 372 449 12 2 v 14 w(Real32)127
b(1.0)411 b(4\))9 b(beginning)f(of)h(Prototyped)g(Data)f(T)o(ree:)p
1657 463 2 46 v 291 509 V 304 495 a(IMP)p 372 495 12
2 v 14 w(Real32)127 b(2.0)448 b(data)8 b(only)n(,)h(no)g(extra)p
1657 509 2 46 v 291 554 V 304 541 a(IMP)p 372 541 12
2 v 14 w(Real32)127 b(3.0)448 b(packet)8 b(information)p
1657 554 2 46 v 291 600 V 618 586 a Fc(:)e(:)g(:)p 1657
600 V 292 602 1366 2 v 75 726 a Fv(given)11 b(on)h(line)g(\(2\),)g(is)g
(a)g(prototype)f(annotation.)19 b(A)12 b(prototype)e(annotation)h
(always)h(takes)h(a)f(single)g(ar)o(gument,)h(which)75
776 y(is)f(again)h(an)g(MP)f(T)o(ree)h(providing)d(the)j(type)f
(information)e(for)i(each)i(of)e(the)g(ar)o(guments)h(of)f(the)g
(operator)g(to)g(which)g(the)75 826 y(annotation)d(is)h(attached.)16
b(For)10 b(clarity)m(,)g(we)h(refer)f(to)g(such)g(an)h(MP)f(T)o(ree)h
(as)g(a)g Fu(Pr)n(ototype)g(T)n(r)n(ee)p Fv(.)17 b(W)m(e)10
b(refer)h(to)f(the)g(block)f(of)75 876 y(data)h(described)g(by)f(a)h
(Prototype)f(T)o(ree)h(as)g(a)h(Prototyped)d(Data)i(T)o(ree.)16
b(In)9 b(this)g(case,)j(the)d(Prototype)f(T)o(ree)j(is)e(very)h
(simple,)75 925 y(consisting)g(of)g(a)i(single)e(type)h(speci\256er)h
(indicating)d(that)h Fu(each)i Fv(element)f(of)g(the)g(array)h(is)e(of)
h(the)g(type)g(IMP)p 1667 925 13 2 v 14 w(Real32)g(\(see)75
975 y(line)h(\(3\)\).)20 b(MP)13 b(uses)f Fu(meta)h Fv(types)f(within)e
(Prototype)h(T)o(rees)i(to)f(specify)g(that)g(a)g(data)h(limb)e(of)h
(the)g(speci\256ed)h(diata)g(type)75 1025 y(will)d(appear)i(at)g(this)f
(place)h(in)f(the)g(Prototyped)f(Data)i(T)o(ree.)20 b(The)12
b(\252common\272)h(meta)f(type)f(\(Cmt\))g(is)g(reserved)h(for)f(those)
75 1075 y(types)d(that)g(have)i(a)f(unique)f(integer)g(assigned)g(to)g
(them)h(within)e(a)i(dictionary)e(\(see)j(table)f(4.8)f(for)g(a)i(list)
d(of)h(the)h(MP-de\256ned)75 1125 y(meta)k(types\).)19
b(\(The)12 b(\252regular)r(\272)g(meta)g(types)g(are)g(simply)f(a)i
(string)d(equivalent)h(of)g(this)g(\261)h(that)f(is,)h(the)g(type)f
(information)75 1175 y(is)g(given)f(as)i(a)f(sT)o(ring)f(instead)h(of)g
(an)g(integer)n(.\))16 b(So)11 b(the)g(common)h(meta)f(type)g(packet)g
(on)g(line)f(\(3\))h(speci\256es)h(the)f(type)f(of)75
1224 y(data)h(that)g(will)f(appear)i(in)e(this)h(position)e(of)i(the)g
(MP)g(T)o(ree)h(that)e(follows.)17 b(The)12 b(type)f(speci\256ed)g(is)g
(IMP)p 1610 1224 V 15 w(Real32.)18 b(Recall)75 1274 y(that)11
b(the)h(\252IMP\272)h(indicates)f(a)g Fu(data)f(limb)g
Fv(is)h(being)g(sent)g(and)g Fu(not)f Fv(a)h(complete)h(node)f(packet.)
21 b(Figure)11 b(4.5)h(relates)h(these)75 1324 y(terms)e(and)f(shows)g
(how)g(a)h(sparse)g(matrix)f(can)h(be)f(represented)h(using)e(a)i
(prototype.)122 1374 y(T)m(o)i(return)e(to)h(our)g(example)h(here,)h
(the)e(Prototyped)e(Data)j(T)o(ree)g(begins)f(on)g(line)f(\(4\).)21
b(Note)12 b(that)g(there)g(are)h(no)f(node)75 1424 y(packet)e(headers)h
(to)e Fu(individually)f Fv(specify)i(the)f(type)h(of)f(each)i(element)g
(of)e(the)h(Prototyped)e(Data)j(T)o(ree)f(\(this)f(is)h(the)f(job)g(of)
75 1473 y(the)j(prototype\).)18 b(Using)11 b(the)g(prototype)f
(mechanism)j(to)f(specify)g(the)f(array')n(s)h(element)g(type)g
(reduces)h(the)e(total)g(size)h(of)75 1523 y(the)e(array')n(s)g
(encoding)g(from)g(8,008)g(bytes)g(\(4,008)f(bytes)h(total)g
(overhead\))g(to)g(4,016)f(bytes)h(\(16)g(bytes)g(of)g(overhead\).)122
1573 y(There)16 b(are)f(three)g(further)f(important)f(points)g(to)h
(make)i(about)e(prototypes)f(before)i(moving)f(on)g(to)g(more)h
(complex)75 1623 y(examples.)28 b(The)14 b(\256rst)g(is)g(that)g(the)g
(size)g(of)g(the)g(prototype)e(is)i(lar)o(gely)g(independent)f(of)h
(the)g(size)h(of)e(the)h(data.)27 b(In)14 b(the)75 1673
y(example)g(above,)h(the)f(overhead)g(for)f(the)g(prototype)f(stays)i
(at)g(16)f(bytes)g(even)h(if,)h(for)e(example,)i(the)f(size)g(of)f(the)
h(data)75 1722 y(type)g(doubles)f(\(4)h(to)g(8)g(bytes)g(for)g(an)g
Fs(IMP_Real64)p Fv(\))f(or)h(the)g(length)g(of)f(the)i(array)f
(increases.)29 b(Secondly)m(,)15 b(one)f(can)75 1772
y(attach)i(additional)d(annotations)h(to)h(the)h(nodes)f(of)g(the)h
(Prototype)e(T)o(ree,)k(which)d(would)f(then)h(apply)g(to)g
Fu(all)f Fv(the)i(data)75 1822 y(limbs)f(described)g(by)g(that)g(node.)
30 b(Finally)m(,)16 b(the)f(use)h(of)f(prototypes)e(does)j(not)e
(preclude)i(the)f(possibility)d(of)j(writing)75 1872
y(ef)o(\256cient)c(routines)f(for)h(sending)f(and)h(receiving)f
(mathematical)i(objects.)17 b(Instead)11 b(of)f(decoding)g(each)i
(single)f(datum)f(by)75 1922 y(interpreting)f(the)i(prototype,)f(a)i
(receiver)g(can)g(simply)f(check)h(the)f(entire)g(prototype)e(to)i
(ensure)h(that)e(the)i(incoming)e(data)75 1972 y(meets)f(the)f
(expectations)g(of)g(a)h(pre-compiled)e(read)i(routine.)k(The)c
(sending)f(side)g(is)g(simpler:)13 b(An)8 b(object-speci\256c)g
(routine)75 2021 y(may)j(ef)o(\256ciently)f(marshall)g(the)g(user)r(')n
(s)g(data)h(structure,)f Fu(including)e Fv(sending)h(the)h(prototype)f
(describing)g(the)h(object.)75 2140 y Ff(4.3.2)50 b(pr)o(ototypes)12
b(and)g(common)h(operators)75 2218 y Fv(In)h(the)g(example)h
(considered)f(in)g(\256gure)g(4.3,)i(the)e(Prototype)f(T)o(ree)i
(consisted)f(of)g(a)h(single)e Fu(basic)h Fv(type)g(speci\256er)n(.)28
b(T)m(o)75 2267 y(send)12 b(a)h(1000)e(signed)g(32-bit)g(integers)g
(you)h(would)f(simply)g(replace)i(the)f(IMP)p 1251 2267
V 14 w(Real32)g(on)g(line)f(\(3\))h(with)e(IMP)p 1743
2267 V 15 w(Sint32.)75 2317 y(Similarly)f(for)h(any)g(of)g(the)g(other)
g(MP)g(basic)h(types.)122 2367 y(De\256ning)i(a)g(prototype)e(for)i
(more)g(structured)f(data)h(\(a)g(matrix)g(or)f(polynomial,)h(for)f
(example\))i(requires)e(the)h(use)g(of)75 2417 y(structuring)c
(operators)i(within)e(the)i(Prototype)f(T)o(ree.)18 b(This)11
b(structuring)e(is)i(provided)f(by)h(four)f(common)h(operators)g(and)75
2467 y(the)i(meta)h(operator)f(type.)23 b(The)14 b(four)f(common)g
(operators)g(are:)21 b(Struct,)14 b(RecStruct,)g(Union,)f(and)g
(RecUnion.)24 b(These)75 2516 y(are)12 b(the)g(only)e(common)i
(operators)f(that)g(may)h(appear)g(within)e(a)i(syntactically)f
(correct)h(Prototype)e(T)o(ree.)19 b(A)12 b(\(common\))75
2566 y(meta)g(operator)f(is)g(the)g(operator)g(equivalent)f(of)h(the)g
(meta)h(type.)18 b(Think)11 b(of)g(it)f(as)i(an)g(\252operator)o
(-speci\256er)r(\272)g(instead)f(of)g(a)75 2616 y(\252type-speci\256er)
r(\272.)16 b(As)10 b(we)h(will)e(see,)j(its)d(semantics)i(are)g
(slightly)d(dif)o(ferent)i(from)g(those)g(of)g(the)g(\252normal\272)h
(operators.)954 2754 y(47)p eop
%%Page: 48 49
48 48 bop 78 529 a Fg(')p 78 2017 4 1407 v 78 2101 a(&)1869
529 y($)p 1869 2017 V 1869 2101 a(\045)p 163 2101 1625
4 v 163 529 V 94 641 a Fs(MP_Real32_t)24 b(r32_array[1000];)94
741 y(/*)g(...)h(Fill)g(the)f(array)h(...)f(*/)94 840
y(/*)g(\(1\))h(Put)g(the)f(operator)h(node)f(packet)g(*/)94
890 y(MP_PutCommonOperatorPacket\(link,)321 b(/*)24 b(MP_Link_pt)g(*/)
766 940 y(MP_ProtoDict,)124 b(/*)24 b(defining)g(dictionary)g(*/)766
990 y(MP_CopProtoArray,)g(/*)g(array)h(operator)f(*/)766
1040 y(1,)399 b(/*)24 b(1)h(annotation)f(*/)766 1089
y(1000\);)299 b(/*)24 b(1000)h(args)f(*/)94 1189 y(/*)g(\(2\))h(Put)g
(the)f(prototype)g(annotation)g(packet)h(*/)94 1239 y
(MP_PutAnnotationPacket\(link,)667 1289 y(MP_ProtoDict,)247
b(/*)25 b(defining)f(dictionary)g(*/)667 1338 y
(MP_AnnotProtoPrototype,)e(/*)j(prototype)f(annot)h(*/)667
1388 y(MP_AnnotValuatedFlag)e(&)h(MP_AnnotRequiredFlag\);)94
1488 y(/*)g(\(3\))h(Put)g(typespecifaction)e(for)i(the)f(data)h(limbs)f
(*/)94 1538 y(MP_PutCommonMetaTypePacket\(link,)766 1587
y(MP_ProtoDict,)766 1637 y(MP_CmtProtoIMP_Real32,)766
1687 y(0\);)224 b(/*)25 b(no)g(annots)f(to)h(Cmt)f(*/)94
1787 y(/*)g(\(4\))h(Put)g(the)f(data)h(limbs)f(*/)94
1837 y(for)g(\(i=0;)h(i<1000;)f(i++\))h(IMP_PutReal32\(link,)e
(r32_array[i]\);)94 1936 y(/*)h(A)h(more)g(efficient)f(way)h(would)f
(actually)g(be)h(to)g(use:)119 1986 y(*)f(IMP_PutReal32Vector\(link,)f
(r32_array,)h(1000\);)119 2036 y(*)g(instead)h(of)f(putting)h(each)f
(data)h(limb)f(separately)g(*/)357 2217 y Fv(Figure)10
b(4.4:)k(Code)c(fragment)g(for)g(putting)e(a)j(prototyped)d(array)j(of)
f(IMP)p 1435 2217 13 2 v 15 w(Real32')n(s)954 2754 y(48)p
eop
%%Page: 49 50
49 49 bop 317 123 1316 2 v 316 173 2 50 v 629 158 a Fw(meta)10
b(type)p 1114 173 V 471 w(description)p 1632 173 V 317
174 1316 2 v 316 224 2 50 v 342 209 a Fs(MP_CmtProtoIMP_Sint8)p
1114 224 V 297 w Fv(Sint8)f(data)i(limb)p 1632 224 V
316 274 V 342 259 a Fs(MP_CmtProtoIMP_Uint8)p 1114 274
V 297 w Fv(Uint8)e(data)i(limb)p 1632 274 V 316 324 V
342 309 a Fs(MP_CmtProtoIMP_Sint32)p 1114 324 V 272 w
Fv(Sint32)e(data)i(limb)p 1632 324 V 316 374 V 342 359
a Fs(MP_CmtProtoIMP_Uint32)p 1114 374 V 272 w Fv(Uint32)e(data)i(limb)p
1632 374 V 316 424 V 342 409 a Fs(MP_CmtProtoIMP_ApInt)p
1114 424 V 297 w Fv(ApInt)f(data)g(limb)p 1632 424 V
316 473 V 342 458 a Fs(MP_CmtProtoIMP_ApReal)p 1114 473
V 272 w Fv(ApReal)h(data)f(limb)p 1632 473 V 316 523
V 342 508 a Fs(MP_CmtProtoIMP_Real32)p 1114 523 V 272
w Fv(Real32)g(data)h(limb)p 1632 523 V 316 573 V 342
558 a Fs(MP_CmtProtoIMP_Real64)p 1114 573 V 272 w Fv(Real64)f(data)h
(limb)p 1632 573 V 316 623 V 342 608 a Fs(MP_CmtProtoIMP_Boolean)p
1114 623 V 247 w Fv(Boolean)f(data)h(limb)p 1632 623
V 316 673 V 342 658 a Fs(MP_CmtProtoIMP_Identifier)p
1114 673 V 172 w Fv(Identi\256er)f(data)g(limb)p 1632
673 V 316 722 V 342 707 a Fs(MP_CmtProtoIMP_LatinIdentifier)p
1114 722 V 47 w Fv(LatinIdenti\256er)g(data)g(limb)p
1632 722 V 316 772 V 342 757 a Fs(MP_CmtProtoIMP_GreekIdentifier)p
1114 772 V 47 w Fv(GreekIdenti\256er)g(data)h(limb)p
1632 772 V 316 822 V 342 807 a Fs(MP_CmtProtoIMP_CommonConstant)p
1114 822 V 72 w Fv(CommonConstant)e(data)h(limb)p 1632
822 V 316 872 V 342 857 a Fs(MP_CmtProtoIMP_Constant)p
1114 872 V 222 w Fv(Constant)f(data)i(limb)p 1632 872
V 316 922 V 342 907 a Fs(MP_CmtProtoIMP_String)p 1114
922 V 272 w Fv(String)e(data)i(limb)p 1632 922 V 316
971 V 342 957 a Fs(MP_CmtProtoRecStruc)p Fv(t)p 1114
971 V 310 w(recursive)g(structure)f(indicator)p 1632
971 V 316 1021 V 342 1006 a Fs(MP_CmtProtoRecUnion)p
1114 1021 V 322 w Fv(recursive)h(union)e(indicator)p
1632 1021 V 316 1071 V 342 1056 a Fs(MP_CmtNumberRational)p
1114 1071 V 297 w Fv(rational)h(number)p 1632 1071 V
317 1073 1316 2 v 692 1153 a(T)m(able)h(4.8:)k(MP-de\256ned)10
b(meta)h(types)122 1286 y(Again,)18 b(we)f(use)g(examples)h(to)d
(describe)i(and)g(illustrate)e(the)h(essential)h(concepts.)34
b(First,)18 b(consider)e(an)h(array)f(of)75 1336 y(structures.)22
b(Figure)12 b(4.5)h(shows)f(how)h(a)g(sparse)g(100)f
Ft(\002)h Fv(100)f(integer)g(matrix)h Fq(A)f Fv(which)h(has)g(zero)g
(entries)f(everywhere)75 1386 y(except)k(for)f Fq(A)p
Fo([)p Fv(2)p Fq(;)7 b Fv(2)p Fo(])17 b(=)i Fq(A)p Fo([)p
Fv(2)p Fq(;)7 b Fv(3)p Fo(])17 b(=)i Fq(A)p Fo([)p Fv(2)p
Fq(;)7 b Fv(4)p Fo(])17 b(=)i Fv(1)p Fq(:)p Fv(0)14 b(can)j(be)e
(represented)h(using)f(the)g(structure)g(de\256nition)f(below)h(to)75
1435 y(represent)c(the)g(matrix)g(elements.)18 b(In)11
b(this)f(example)i(we)f(use)h(the)e(CopProtoStruct)f(operator)h(to)h
(provide)f(the)h(necessary)75 1485 y(structuring)d(within)h(the)h
(Prototype)f(T)o(ree.)75 1624 y Fs(struct)24 b(SparseMatElem)g({)150
1674 y(MP_Uint32)99 b(row_num;)150 1723 y(MP_Uint32)g(colnum;)150
1773 y(MP_Real64)g(val;)75 1823 y(})122 1914 y Fv(The)11
b(top-level)e(operator)h(on)g(line)f(\(1\))h(indicates)g(that)g(this)f
(is)h(a)h(three)g(element)f(sparse)i(matrix.)i(The)d(prototype)e
(\(lines)75 1964 y(2)j(-)h(6\))f(speci\256es)i(the)e(type)g(of)g(each)i
(element.)22 b(Line)13 b(\(3\))f(indicates)g(that)g(each)i(element)f
(is)f(a)h(3-\256eld)f(structure)g(and)g(the)75 2014 y(ar)o(guments)e
(to)g(this)f(structure)g(operator)g(\(lines)h(4)g(-)f(6\))h(specify)g
(the)g(individual)d(types)j(of)g(the)f(ar)o(guments)i(using)e(common)75
2064 y(meta)14 b(type)e(packets.)23 b(The)13 b(annotation)e(on)i(lines)
f(\(7)g(-)h(8\))f(provides)g(the)h(dimensions)f(of)g(the)g(matrix.)22
b(The)14 b(Prototyped)75 2114 y(Data)e(T)o(ree)g(begin)e(on)h(line)f
(\(9\))h(with)f(the)h(\256rst)g(\256eld)g(of)g(the)g(\256rst)g
(structure.)17 b(The)12 b(data)g(for)e(the)h(second)h(structure)f
(begins)75 2164 y(on)f(line)g(\(10\))f(and)h(the)g(third)f(on)h(line)g
(\(11\).)122 2213 y(The)17 b(CopProtoUnion)12 b(operator)k(looks)f
(quite)f(similar)n(,)k(but)d(has)h(an)g(important)e(dif)o(ference)j(in)
e(its)g(interpretation.)75 2263 y(As)h(with)f(a)h(C)f
Fs(union)p Fv(,)i(the)f(\252ar)o(guments\272)h(to)e(the)g(union)g
(operator)g(are)h(really)g(type)f(speci\256ers,)j(and,)g(as)e(with)f
(C,)h(a)75 2313 y(discriminator)11 b(is)i(required)f(to)g(identify)f
(the)i(particular)f(speci\256er)i(to)e(use)h(to)f(extract)h(data)g
(from)g(the)g(Prototyped)e(Data)75 2363 y(T)o(ree.)22
b(So,)13 b(at)g Fu(data)e(communication)g(time)h Fv(\(the)g(time)g(at)g
(which)g(the)g(data)h(described)g(by)f(the)g(Prototype)f(T)o(ree)i(is)f
(sent\),)75 2413 y(a)g(union)e(discriminator)f(is)i(\256rst)g
(transmitted)g(as)g(an)h(IMP)p 929 2413 13 2 v 15 w(Uint32.)k(The)c
(range)g(for)f(the)g(union)f(discrimination)f(index)h(is)75
2462 y(0)d Ft(\000)g Fq(n)p Fv(.)15 b(An)9 b(index)g(of)g(0)g
(speci\256es)i(that)e Fu(no)f Fv(data)i(follows)e(the)h(index)g(\(that)
f(is,)i(none)f(of)g(the)g(type)g(speci\256er)r(')n(s)h(ar)o(guments)f
(is)75 2512 y(selected)f(\261)f(it)g(is)g(convenient)f(to)h(think)f(of)
h(this)f(as)i(a)g(NULL)g(pointer\).)k(An)c(index)e Fq(i)i
Fv(between)f(1)h(and)f Fq(n)g Fv(speci\256es)h(that)f(exactly)75
2562 y(one)14 b(Prototyped)d(Data)j(T)o(ree)h(follows)d(the)h(index)g
(whose)h(type)f(is)g(that)g(of)g(the)h Fq(i)1282 2547
y Fb(th)1330 2562 y Fv(ar)o(gument)f(of)h(the)f(CopProtoUnion)75
2612 y(operator)d(node)g(packet.)954 2754 y(49)p eop
%%Page: 50 51
50 50 bop 75 125 a
 28943974 15853404 0 0 28943974 15853404 startTexFig
 75 125 a
%%BeginDocument: mp-tree.eps
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-45.0 309.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
n 0 792 m 0 0 l 612 0 l 612 792 l cp clip
 0.04020 0.04020 sc
/Times-Roman ff 210.00 scf sf
2985 2685 m
gs 1 -1 sc (AP) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 2955 m
gs 1 -1 sc (Cop) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 3225 m
gs 1 -1 sc (Cmt) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 3495 m
gs 1 -1 sc (Cmt) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 3765 m
gs 1 -1 sc (Cmt) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 4035 m
gs 1 -1 sc (AP) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 4305 m
gs 1 -1 sc (Cop) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 4575 m
gs 1 -1 sc (MP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 4845 m
gs 1 -1 sc (MP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 5385 m
gs 1 -1 sc (IMP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 5655 m
gs 1 -1 sc (IMP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 5925 m
gs 1 -1 sc (IMP_Sint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 6195 m
gs 1 -1 sc (IMP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 6465 m
gs 1 -1 sc (IMP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 6735 m
gs 1 -1 sc (IMP_Sint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 7005 m
gs 1 -1 sc (IMP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 7545 m
gs 1 -1 sc (IMP_Sint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2985 7275 m
gs 1 -1 sc (IMP_Uint32) col-1 sh gr
15.000 slw
n 9015 2130 m 9330 2130 l 9330 2400 l 9030 2400 l gs col-1 s gr 
n 9015 2520 m 9330 2520 l 9330 2790 l 9030 2790 l gs col-1 s gr 
n 9015 2895 m 9330 2895 l 9330 3810 l 9015 3810 l gs col-1 s gr 
n 9030 5310 m 9345 5310 l 9345 7590 l 9015 7590 l gs col-1 s gr 
n 9015 3945 m 9330 3945 l 9330 5100 l 9015 5100 l gs col-1 s gr 
/NewCenturySchlbk-Bold ff 270.00 scf sf
1222 4290 m
gs 1 -1 sc (MP) col-1 sh gr
/NewCenturySchlbk-Bold ff 270.00 scf sf
1140 4950 m
gs 1 -1 sc (Tree) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4245 2685 m
gs 1 -1 sc (Proto) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4245 2955 m
gs 1 -1 sc (Proto) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4245 3225 m
gs 1 -1 sc (Proto) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4245 3495 m
gs 1 -1 sc (Proto) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4245 3765 m
gs 1 -1 sc (Proto) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4245 4035 m
gs 1 -1 sc (Matrix) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4245 4305 m
gs 1 -1 sc (Proto) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4230 2295 m
gs 1 -1 sc (Matrix) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6765 2970 m
gs 1 -1 sc (0:3) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6765 3240 m
gs 1 -1 sc (0:) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6765 3510 m
gs 1 -1 sc (0:) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6765 3780 m
gs 1 -1 sc (0:) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6765 4320 m
gs 1 -1 sc (0:2) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6765 4590 m
gs 1 -1 sc (0:) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6765 4860 m
gs 1 -1 sc (0:) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6750 2325 m
gs 1 -1 sc (2:3) col-1 sh gr
2 slj
2 slc
n 2475 2070 m 2115 2070 l 2115 7530 l 2490 7530 l gs col-1 s gr 
0 slj
0 slc
7.500 slw
n 2775 2055 m 8775 2055 l gs col-1 s gr 
n 2775 7650 m 8775 7650 l gs col-1 s gr 
n 2775 1725 m 8775 1725 l gs col-1 s gr 
/Times-Roman ff 210.00 scf sf
2985 2280 m
gs 1 -1 sc (Cop) col-1 sh gr
/Times-Roman ff 210.00 scf sf
2955 1965 m
gs 1 -1 sc (Type) col-1 sh gr
/Times-Roman ff 210.00 scf sf
4320 1995 m
gs 1 -1 sc (Dict) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5235 1995 m
gs 1 -1 sc (Value) col-1 sh gr
/Times-Roman ff 210.00 scf sf
6375 1995 m
gs 1 -1 sc (#Annot:Arg) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7740 1995 m
gs 1 -1 sc (Remarks) col-1 sh gr
/NewCenturySchlbk-Bold ff 210.00 scf sf
9465 2715 m
gs 1 -1 sc (Prototype annotation) col-1 sh gr
/NewCenturySchlbk-Bold ff 210.00 scf sf
9480 3405 m
gs 1 -1 sc (Prototype Tree) col-1 sh gr
/NewCenturySchlbk-Bold ff 210.00 scf sf
9495 4140 m
gs 1 -1 sc (dimension annotation) col-1 sh gr
/NewCenturySchlbk-Bold ff 210.00 scf sf
9465 2310 m
gs 1 -1 sc (Matrix operator) col-1 sh gr
/NewCenturySchlbk-Bold ff 210.00 scf sf
9870 4620 m
gs 1 -1 sc (and argument) col-1 sh gr
/NewCenturySchlbk-Bold ff 150.00 scf sf
9825 6945 m
gs 1 -1 sc ( type content are described) col-1 sh gr
/NewCenturySchlbk-Bold ff 150.00 scf sf
9825 7140 m
gs 1 -1 sc ( by the Prototype Tree\)) col-1 sh gr
/NewCenturySchlbk-Bold ff 150.00 scf sf
9825 6750 m
gs 1 -1 sc (\(whose structure and type) col-1 sh gr
/NewCenturySchlbk-Bold ff 210.00 scf sf
9540 6480 m
gs 1 -1 sc (Prototyped Data Tree) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 3255 m
gs 1 -1 sc (4\) rowspec) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 3525 m
gs 1 -1 sc (5\) columnspec) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 3795 m
gs 1 -1 sc (6\) elem type) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 4065 m
gs 1 -1 sc (7\) dimensions) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7815 5940 m
gs 1 -1 sc (     [1, 1] = 1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7815 6750 m
gs 1 -1 sc (     [2, 1] = 1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7815 7560 m
gs 1 -1 sc (     [2, 4] = 1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 4605 m
gs 1 -1 sc (dim1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 4890 m
gs 1 -1 sc (8\) dim2) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 2970 m
gs 1 -1 sc (3\)) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 5370 m
gs 1 -1 sc (9\)) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 2700 m
gs 1 -1 sc (2\)) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7785 2310 m
gs 1 -1 sc (1\)) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7710 6210 m
gs 1 -1 sc (10\)) col-1 sh gr
/Times-Roman ff 210.00 scf sf
7680 7020 m
gs 1 -1 sc (11\)) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 2685 m
gs 1 -1 sc (Prototype) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 2955 m
gs 1 -1 sc (CopProtoStruct) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 3225 m
gs 1 -1 sc (IMP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 3495 m
gs 1 -1 sc (IMP_Uint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 3765 m
gs 1 -1 sc (IMP_Sint32) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 4035 m
gs 1 -1 sc (AnnotMatrixDim) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 4305 m
gs 1 -1 sc (CopProtoArray) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 4575 m
gs 1 -1 sc (100) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 4845 m
gs 1 -1 sc (100) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 5385 m
gs 1 -1 sc (1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 5655 m
gs 1 -1 sc (1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 5925 m
gs 1 -1 sc (1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 6195 m
gs 1 -1 sc (2) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 6465 m
gs 1 -1 sc (1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 6735 m
gs 1 -1 sc (1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 7005 m
gs 1 -1 sc (2) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 7275 m
gs 1 -1 sc (4) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5115 7545 m
gs 1 -1 sc (1) col-1 sh gr
/Times-Roman ff 210.00 scf sf
5085 2295 m
gs 1 -1 sc (SparseMat) col-1 sh gr
$F2psEnd
rs
%%EndDocument

 endTexFig
 547 1262 a Fv(Figure)10 b(4.5:)15 b(Prototyped)8 b(MP)j(T)o(ree)f(for)
g(a)h(sparse)g(matrix)122 1396 y(The)h(example)g(in)f(\256gure)g(4.6)g
(illustrates)f(the)h(use)g(of)g(the)g(CopProtoUnion)d(operator)n(.)17
b(This)12 b(example)f(is)g(intended)g(to)75 1446 y(be)g(illustrative)d
(only)h(-)h(do)g(not)f(expect)i(it)e(to)h(be)h(ef)o(\256cient!)305
1574 y(Figure)f(4.6:)k(Prototyped)8 b(MP)j(T)o(ree)g(for)f(an)g(array)h
(of)f(integers)g(using)f(the)h(union)f(operator)p 275
1624 1401 2 v 274 1670 2 46 v 287 1656 a Fe(T)m(ype)132
b(Dict)41 b(V)l(alue)174 b(#Annot:Ar)o(g)23 b(Remarks)p
1674 1670 V 275 1672 1401 2 v 274 1734 2 63 v 287 1704
a(Cop)144 b(Proto)24 b(CopProtoArray)29 b(1:10)p 1674
1734 V 274 1780 2 46 v 287 1766 a(AP)159 b(Proto)24 b(Prototype)p
1674 1780 V 274 1825 V 287 1812 a(Cop)144 b(Proto)24
b(CopProtoUnion)e(0:3)155 b(1\))10 b(3)f(prototypes)f(follow)p
1674 1825 V 274 1871 V 287 1857 a(Cmt)143 b(Proto)24
b(IMP)p 667 1857 12 2 v 14 w(Uint32)76 b(0:)193 b(2\))10
b(1st)e(prototype)h(gets)g(index)f(1)p 1674 1871 2 46
v 274 1917 V 287 1903 a(Cmt)143 b(Proto)24 b(IMP)p 667
1903 12 2 v 14 w(Sint32)82 b(0:)193 b(3\))10 b(2nd)e(prototype)g(get)h
(index)g(2)p 1674 1917 2 46 v 274 1979 2 63 v 287 1949
a(Cmt)143 b(Proto)24 b(IMP)p 667 1949 12 2 v 14 w(ApInt)93
b(0:)193 b(4\))10 b(3rd)f(prototype)f(gets)h(index)f(3)p
1674 1979 2 63 v 274 2025 2 46 v 287 2011 a(IMP)p 355
2011 12 2 v 14 w(Uint32)128 b(2)444 b(5\))10 b(1st)f(item)h(has)e
(index)g(2,)h(use)g(prototype)f(2)p 1674 2025 2 46 v
274 2079 2 55 v 287 2057 a(IMP)p 355 2057 12 2 v 14 w(Sint32)134
b(-245)394 b(1st)9 b(data)g(value)f(IMP)p 1345 2057 V
14 w(Sint32)p 1674 2079 2 55 v 274 2124 2 46 v 287 2111
a(IMP)p 355 2111 12 2 v 14 w(Uint32)128 b(1)444 b(6\))10
b(2nd)e(item)i(has)e(index)h(1,)g(use)f(prototype)h(1)p
1674 2124 2 46 v 274 2178 2 55 v 287 2156 a(IMP)p 355
2156 12 2 v 14 w(Uint32)128 b(1057)387 b(2nd)9 b(data)f(value)h(\(IMP)p
1370 2156 V 14 w(Uint32\))p 1674 2178 2 55 v 274 2224
2 46 v 287 2210 a(IMP)p 355 2210 12 2 v 14 w(Uint32)128
b(3)444 b(7\))10 b(3rd)f(item)h(has)e(index)g(1,)i(use)e(prototype)g(1)
p 1674 2224 2 46 v 274 2278 2 55 v 287 2256 a(IMP)p 355
2256 12 2 v 14 w(ApInt)145 b(1234567890)273 b(3rd)10
b(data)e(value)g(\(IMP)p 1363 2256 V 15 w(ApInt\))p 1674
2278 2 55 v 274 2324 2 46 v 599 2310 a(.)13 b(.)h(.)409
b(and)9 b(so)f(on)p 1674 2324 V 275 2326 1401 2 v 122
2416 a Fv(The)k(CopProtoUnion)d(operator)i(on)g(line)g(\(1\))g
(indicates)g(that)g(there)h(are)g(3)f(type)g(speci\256ers)i(in)e(the)g
(union.)18 b(These)12 b(are)75 2466 y(given)f(on)g(lines)h(\(2\),)g
(\(3\),)g(and)g(\(4\).)19 b(The)12 b(Prototyped)e(Data)i(T)o(ree)h
(begin)e(on)g(line)g(\(5\))h(with)e(an)i(IMP)p 1566 2466
13 2 v 15 w(Uint32)e(serving)h(as)75 2516 y(union)e(discriminator)n(.)
15 b(The)d(value)f(is)f(2,)i(indicating)c(that)j(prototype)e(2)h
(\(de\256ned)h(on)g(line)f(\(3\)\))g(speci\256es)i(the)e(type)h(of)f
(the)75 2566 y(following)g(data)j(limb.)22 b(Once)13
b(a)g(receiver)h(has)f(consumed)g(the)g(data)g(according)f(to)g(the)h
(prototype,)f(it)f(is)i(positioned)e(to)75 2615 y(read)g(the)f(next)g
(discriminator)f(on)g(line)h(\(6\).)15 b(This)10 b(would)f(proceed)i
(until)d(all)i(10)g(ar)o(guments)h(had)f(been)h(read.)954
2754 y(50)p eop
%%Page: 51 52
51 51 bop 75 121 a Ff(4.3.3)50 b(pr)o(ototypes)12 b(and)g(meta)g
(operators)75 199 y Fv(For)d(objects)h(such)g(as)g(structures)f(and)h
(unions,)f(the)g(sender)h(knows)f(at)h Fu(pr)n(ototype)f
(speci\256cation)g(time)g Fv(\(the)g(time)h(at)g(which)75
249 y(the)e(prototype)f(is)h(sent\))h(how)f(many)h(ar)o(guments)g(the)f
(structuring)f(operator)h(has.)15 b(Also,)9 b(the)f(type)g(of)g(each)i
(\256eld)e(of)h(a)g(struct)75 299 y(or)g(union)e(is)i(given)f(quite)h
(easily)f(within)g(the)g(Prototype)g(T)o(ree)i(by)e(specifying)g(them)h
(through)f Fu(the)g(operator)r(')-5 b(s)8 b(ar)n(guments)p
Fv(.)75 348 y(But)g(this)h(approach)h(is)f(not)f(practical)i(for)f
(objects)g(which)g(are)h(a)g(repetition)d(of)j(a)f(single)g(type)g
(speci\256cation)g(\(an)h(array)m(,)h(for)75 398 y(example\),)i(or)f
(for)g(which)f(the)h(actual)g(number)g(of)g(ar)o(guments)h(is)e(not)h
(known)f(at)h(prototype)e(speci\256cation)i(time,)h(or)f(for)75
448 y(which)e(the)h(number)g(of)g(ar)o(guments)g(may)g(change)h(for)e
(separate)i(instances)g(of)e(the)h(object)f(within)g(the)g(tree)i(\(a)f
(pointer)e(or)75 498 y(ragged)h(array)m(,)i(for)d(example\).)122
548 y(These)i(cases)g(are)f(handled)f(through)f(meta)i(operators)f
(\(MP)p 998 548 13 2 v 15 w(MetaOperator)g(and)g(MP)p
1384 548 V 15 w(CommonMetaOperator)g(node)75 598 y(packets\))16
b(which)f(are)h(operator)e(variants)h(of)g(the)g(meta)h(types)f(and)h
(may)g(only)e(appear)i(in)f(a)g(Prototype)f(T)o(ree.)31
b(There)75 647 y(are)16 b(two)e(important)f(points)h(to)g(make)i(about)
e(the)h(meta)h(operator)n(.)28 b(First,)16 b(like)e(its)g(basic)h
(cousin)g(the)g(meta)g(type,)h(the)75 697 y(meta)d(operator)f(is)g
(providing)e(information)h(about)h(something,)g(in)g(this)f(case)j(a)f
(speci\256c)h(operator)d(\(given)h(as)h(the)f(meta)75
747 y(operator)r(')n(s)i Fu(value)p Fv(\).)30 b(Second,)18
b(an)d(important)f(distinction)f(between)j(operators)f(and)g(meta)i
(operators)d(is)i(that)e(for)h(the)75 797 y(former)n(,)10
b(the)e(number)o(-of-ar)o(guments)g(\256eld)h(speci\256es)h(the)e
(number)h(of)f(ar)o(guments)h(that)f(will)g(follow)f(the)h(operator)g
(packet,)75 847 y(while)14 b(for)h(the)g(meta)h(operators,)g(the)f
(number)o(-of-ar)o(guments)g(\256eld)g(only)f(gives)g
Fu(information)f(about)g Fv(the)i(number)g(of)75 896
y(ar)o(guments)c(that)e(will)g(appear)i(in)f(the)g(Prototyped)f(Data)h
(T)o(ree)h(that)f(follows.)k(There)d(are)g(only)e(two)h(cases)i(to)e
(consider:)127 979 y(1.)21 b(A)9 b(meta)g(operator)f(node)h(packet)g
(with)f(a)h(non-0)f(number)o(-of-ar)o(guments)g(\256eld.)15
b(This)9 b(is)f(the)h(number)f(of)h(ar)o(guments)179
1029 y(transmitted)g(at)h(data)h(communication)e(time.)127
1112 y(2.)21 b(A)7 b(meta)g(operator)g(node)f(packet)i(with)e(0)g(in)h
(the)f(number)o(-of-ar)o(guments)h(\256eld.)14 b(T)o(ransmitting)5
b(the)h(actual)i(number)e(of)179 1162 y(ar)o(guments)i(the)g(operator)g
(has)g(is)g(delayed)h(from)e(prototype)g(communication)g(time)h(to)g
(data)g(communication)g(time.)179 1212 y(That)j(is,)h(the)e(actual)i
(number)f(of)g(ar)o(guments)g(is)g(transmitted)f(at)h(data)g
(communication)g(time)g(by)g(an)g(IMP)p 1747 1212 V 15
w(Uint32)179 1262 y(data)h(limb)f(before)h(the)g(ar)o(guments)g(are)h
(transmitted)e Fu(at)g(the)h(place)g(wher)n(e)h(the)e(operator)h(would)
e(have)j(appear)n(ed)179 1312 y(at)c(data)h(communication)e(time)p
Fv(.)75 1395 y(Note)i(that)g(the)g(operator)g(is)g(not)f(resent)i(at)f
(data)g(communication)g(time.)122 1444 y(As)16 b(a)g(\256rst)g
(example,)i(consider)d(a)h(matrix)f(of)h(reals)g(sent)f(as)i(an)f
(array)g(of)f(arrays)1366 1429 y Fp(1)1383 1444 y Fv(.)31
b(In)16 b(this)f(case,)j(the)e(prototype)75 1494 y(consists)10
b(of)g(a)g(common)h(meta)g(operator)e(whose)i(value)f(is)g
(CopProtoArray)e(and)i(whose)h(number)o(-of-ar)o(guments)e(\256eld)h
(is)75 1544 y(non-zero.)15 b(The)c(common)f(meta)i(operator)d(itself)h
(has)g(a)h(prototype)e(annotation)f(specifying)i(the)g(type)g(of)g
(each)h(ar)o(gument)75 1594 y(of)f(the)h(CopProtoArray)e(operator)n(.)
15 b(Notice)c(that)f(the)g(number)o(-of-ar)o(guments)g(\256eld)h(of)f
(the)h(meta)g(operator)g(speci\256es)g(the)75 1644 y(number)i(of)g
(data)g(values)h(that)e(will)g Fu(appear)h(at)g(data)f(communication)f
(time)i Fv(and)g Fu(not)f Fv(the)h(number)g(of)g(ar)o(guments)h(that)75
1693 y(follow)8 b(the)h(meta)h(operator)f(within)e(the)i(Prototype)f(T)
o(ree.)16 b(Figure)8 b(4.7)i(gives)f(prototyped)e(and)i(non-prototyped)
e(versions)75 1743 y(side-by-side)i(for)h(comparison.)122
1793 y(The)18 b(top-level)d(operator)h(on)h(line)f(\(1\))g(indicates)h
(that)f(we)h(have)h(an)f(array)g(with)f(2)g(ar)o(guments.)35
b(The)18 b(prototype)75 1843 y(annotation)9 b(starting)g(on)g(line)h
(\(2\))g(speci\256es)h(that)f(the)g(type)g(of)g(each)h(element)g(of)f
(the)g(array)h(from)f(line)g(\(1\))g(is)g(a)g(3)h(element)75
1893 y(array)g(\(line)f(3\).)15 b(The)d(meta)f(operator)f(on)g(line)g
(\(3\))g(also)h(has)g(a)g(prototype)d(\(lines)i(4)h(-)f(5\))g
(specifying)g(that)g(the)g(elements)h(of)75 1942 y(each)h(subarray)e
(is)g(an)h(IMP)p 479 1942 V 15 w(Real32.)k(Note)10 b(that)g(the)g(meta)
h(operator)f(on)g(line)g(\(3\))g(does)g(not)g(have)h(any)f(actual)h(ar)
o(guments)75 1992 y(within)d(the)h(Prototype)f(T)o(ree.)15
b(The)10 b(number)o(-of-ar)o(guments)f(\256eld)g(speci\256es)i(the)e
(number)g(of)g(ar)o(guments)h(to)f(expect)h(in)e(the)75
2042 y(Prototyped)h(Data)h(T)o(ree)h(that)f(follows.)122
2092 y(As)k(a)h(second)f(example,)i(suppose)e(that)g(the)f(subarrays)h
(in)g(the)g(example)g(above)h(have)f(dif)o(ferent)f(lengths,)i(say)f
(one)75 2142 y(has)f(length)f(2)g(and)h(the)g(other)f(length)f(3.)23
b(In)12 b(this)g(case)i(we)g(need)f(to)f(use)h(a)h(meta)f(operator)f
(node)h(packet)g(with)f(0)g(in)g(the)75 2192 y(number)o(-of-ar)o
(guments)e(\256eld)g(as)h(shown)f(in)f(\256gure)i(4.8.)122
2241 y(As)e(in)g(the)g(\256rst)f(example,)j(the)d(prototype)f(\(lines)i
(2)g(\261)f(5\))h(speci\256es)h(that)e(each)i(element)g(of)f(the)f
(top-level)g(array)h(is)g(again)75 2291 y(an)j(array)f(of)g(IMP)p
344 2291 V 15 w(Real32')n(s.)17 b(However)n(,)c(the)e(0)g(in)g(the)g
(number)o(-of-ar)o(guments)f(\256eld)i(of)f(the)g(meta)h(operator)e(in)
h(line)g(\(3\))75 2341 y(speci\256es)h(that)f(the)g(actual)g(number)h
(of)f(elements)g(of)g(the)g(subarrays)h(is)f(not)f(given)h(at)g
(prototype)f(speci\256cation)h(time)g(but)75 2391 y(is)g(instead)h
(given)e(at)i(data)g(communication)f(time)g(by)g(an)h
Fs(IMP)p 1006 2391 V 15 w(Uint32)f Fv(data)g(limb)g Fu(in)g(the)g
(place)h(wher)n(e)g(the)g(operator)75 2441 y(would)d(have)i(appear)n
(ed)f Fv(\(lines)g(\(6\))g(and)g(\(7\)\).)p 75 2476 720
2 v 120 2503 a Fj(1)135 2515 y Fi(This)i(example)f(is)i(illustrative)f
(only)n(.)24 b(T)n(wo-dimensional)10 b(matrices)i(should)f(be)h(sent)g
(as)g(de\256ned)f(in)h(the)g(matrix)g(dictionary)n(.)24
b(For)12 b(example,)75 2555 y(using)c(the)g Fh(MP)p 247
2555 10 2 v 12 w(CopMatrixDenseMatrix)g Fi(with)h(an)f(attached)g
(prototype)f(annotation)g(specifying)g(the)i(type)f(of)h(the)f(basic)g
(matrix)h(elements)f(and)75 2594 y(a)g(matrix-dimension)e(annotation)h
(giving)g(the)h(dimensions)f(of)h(the)g(matrix.)954 2754
y Fv(51)p eop
%%Page: 52 53
52 52 bop 175 149 a Fv(Figure)10 b(4.7:)k(Prototyped)9
b(and)h(unprototyped)e(MP)i(trees)h(for)f(a)g(matrix)g(as)h(an)g(array)
f(of)g(even-length)g(arrays)75 237 y Fk({)120 282 y({)23
b(-1.0,)h(-2.0,)h(-3.0)f(},)120 328 y({)f(-4.0,)h(-5.0,)h(-6.0)f(})75
374 y(})p 77 462 1797 2 v 76 507 2 46 v 454 494 a Fe(Prototyped)8
b(version)p 1114 507 V 576 w(Non-Prototyped)g(version)p
1873 507 V 77 509 1797 2 v 76 555 2 46 v 88 541 a(T)m(ype)143
b(Dict)32 b(V)l(alue)168 b(#Annot:Ar)o(g)24 b(Remarks)p
1114 555 V 132 w(T)m(ype)130 b(Dict)33 b(V)l(alue)168
b(#Annot:Ar)o(g)p 1873 555 V 77 556 1797 2 v 76 619 2
63 v 88 588 a(Cop)147 b(Proto)23 b(CopProtoArray)89 b(1:2)h(1\))9
b(2)g(elem)g(array)p 1114 619 V 39 w(Cop)134 b(Proto)24
b(Array)233 b(0:2)p 1873 619 V 76 664 2 46 v 88 651 a(AP)162
b(Proto)23 b(Prototype)312 b(2\))9 b(element)g(type)p
1114 664 V 1873 664 V 76 710 V 88 696 a(Cmop)118 b(Proto)23
b(CopProtoArray)89 b(1:3)h(3\))9 b(is)h(Array)p 1114
710 V 1873 710 V 76 756 V 88 742 a(AP)162 b(Proto)23
b(Prototype)312 b(4\))9 b(subarray)f(type)p 1114 756
V 1873 756 V 76 818 2 63 v 88 788 a(Cmt)146 b(Proto)23
b(IMP)p 470 788 12 2 v 14 w(Real32)143 b(0:)99 b(5\))9
b(IMP)p 968 788 V 14 w(Real32)p 1114 818 2 63 v 1873
818 V 76 864 2 46 v 1114 864 V 1126 850 a(Cop)134 b(Proto)24
b(CopProtoArray)89 b(0:3)p 1873 864 V 76 909 V 88 896
a(IMP)p 156 896 12 2 v 14 w(Real32)127 b(-1.0)399 b(1st)9
b(subarray)p 1114 909 2 46 v 83 w(MP)p 1182 896 12 2
v 14 w(Real32)127 b(-1.0)270 b(0:)p 1873 909 2 46 v 76
955 V 88 941 a(IMP)p 156 941 12 2 v 14 w(Real32)127 b(-2.0)p
1114 955 2 46 v 665 w(MP)p 1182 941 12 2 v 14 w(Real32)g(-2.0)270
b(0:)p 1873 955 2 46 v 76 1001 V 88 987 a(IMP)p 156 987
12 2 v 14 w(Real32)127 b(-3.0)p 1114 1001 2 46 v 665
w(MP)p 1182 987 12 2 v 14 w(Real32)g(-3.0)270 b(0:)p
1873 1001 2 46 v 76 1046 V 1114 1046 V 1126 1033 a(Cop)134
b(Proto)24 b(CopProtoArray)89 b(0:3)p 1873 1046 V 76
1092 V 88 1078 a(IMP)p 156 1078 12 2 v 14 w(Real32)127
b(-4.0)399 b(2nd)8 b(subarray)p 1114 1092 2 46 v 71 w(MP)p
1182 1078 12 2 v 14 w(Real32)127 b(-4.0)270 b(0:)p 1873
1092 2 46 v 76 1138 V 88 1124 a(IMP)p 156 1124 12 2 v
14 w(Real32)127 b(-5.0)p 1114 1138 2 46 v 665 w(MP)p
1182 1124 12 2 v 14 w(Real32)g(-5.0)270 b(0:)p 1873 1138
2 46 v 76 1183 V 88 1170 a(IMP)p 156 1170 12 2 v 14 w(Real32)127
b(-6.0)p 1114 1183 2 46 v 665 w(MP)p 1182 1170 12 2 v
14 w(Real32)g(-6.0)p 1873 1183 2 46 v 77 1185 1797 2
v 244 1304 a Fv(Figure)10 b(4.8:)k(Prototyped)9 b(and)h(unprototyped)e
(MP)i(T)o(rees)i(for)d(an)i(array)g(of)e(uneven-length)g(arrays)75
1392 y Fk({)120 1437 y({)23 b(-1.0,)h(-2.0,)h(-3.0)f(},)120
1483 y({)f(-4.0,)h(-5.0)g(})75 1529 y(})p 148 1617 1654
2 v 147 1662 2 46 v 525 1649 a Fe(Prototyped)9 b(version)p
1185 1662 V 504 w(Non-Prototyped)f(version)p 1801 1662
V 148 1664 1654 2 v 147 1710 2 46 v 160 1696 a(T)m(ype)143
b(Dict)32 b(V)l(alue)168 b(#Annot:Ar)o(g)23 b(Remarks)p
1185 1710 V 133 w(T)m(ype)130 b(Dict)32 b(V)l(alue)25
b(#Annot:Ar)o(g)p 1801 1710 V 148 1711 1654 2 v 147 1774
2 63 v 160 1743 a(Cop)146 b(Proto)24 b(CopProtoArray)f(1:2)155
b(1\))10 b(2)f(elem)g(array)p 1185 1774 V 39 w(Cop)134
b(Proto)23 b(Array)h(0:2)p 1801 1774 V 147 1819 2 46
v 160 1806 a(AP)161 b(Proto)24 b(Prototype)311 b(2\))10
b(element)f(type)p 1185 1819 V 1801 1819 V 147 1865 V
160 1851 a(Cmop)117 b(Proto)24 b(CopProtoArray)f(1:0)155
b(3\))10 b(is)f(Array)p 1185 1865 V 1801 1865 V 147 1911
V 160 1897 a(AP)161 b(Proto)24 b(Prototype)311 b(4\))10
b(subarray)e(type)p 1185 1911 V 1801 1911 V 147 1973
2 63 v 160 1943 a(Cmt)145 b(Proto)24 b(IMP)p 542 1943
12 2 v 14 w(Real32)67 b(0:)174 b(5\))10 b(IMP)p 1040
1943 V 14 w(Real32)p 1185 1973 2 63 v 1801 1973 V 147
2019 2 46 v 160 2005 a(IMP)p 228 2005 12 2 v 14 w(Uint32)130
b(3)438 b(6\))10 b(1st)f(length)p 1185 2019 2 46 v 79
w(Cop)134 b(Proto)23 b(Array)h(0:3)p 1801 2019 V 147
2064 V 160 2051 a(IMP)p 228 2051 12 2 v 14 w(Real32)127
b(-1.0)398 b(1st)9 b(subarray)p 1185 2064 2 46 v 84 w(MP)p
1254 2051 12 2 v 13 w(Real32)127 b(-1.0)52 b(0:)p 1801
2064 2 46 v 147 2110 V 160 2096 a(IMP)p 228 2096 12 2
v 14 w(Real32)127 b(-2.0)p 1185 2110 2 46 v 665 w(MP)p
1254 2096 12 2 v 13 w(Real32)g(-2.0)52 b(0:)p 1801 2110
2 46 v 147 2173 2 63 v 160 2142 a(IMP)p 228 2142 12 2
v 14 w(Real32)127 b(-3.0)p 1185 2173 2 63 v 665 w(MP)p
1254 2142 12 2 v 13 w(Real32)g(-3.0)52 b(0:)p 1801 2173
2 63 v 147 2218 2 46 v 160 2204 a(IMP)p 228 2204 12 2
v 14 w(Uint32)130 b(2)438 b(7\))10 b(2nd)e(length)p 1185
2218 2 46 v 67 w(Cop)134 b(Proto)23 b(Array)h(0:2)p 1801
2218 V 147 2264 V 160 2250 a(IMP)p 228 2250 12 2 v 14
w(Real32)127 b(-4.0)398 b(2nd)9 b(subarray)p 1185 2264
2 46 v 71 w(MP)p 1254 2250 12 2 v 13 w(Real32)127 b(-4.0)52
b(0:)p 1801 2264 2 46 v 147 2310 V 160 2296 a(IMP)p 228
2296 12 2 v 14 w(Real32)127 b(-5.0)p 1185 2310 2 46 v
665 w(MP)p 1254 2296 12 2 v 13 w(Real32)g(-5.0)52 b(0:)p
1801 2310 2 46 v 148 2311 1654 2 v 122 2436 a Fv(There)16
b(are)g(two)e(ways)h(to)g(get)f(the)h(ef)o(fect)h(of)e(pointers)g
(within)f(prototypes.)28 b(First,)15 b(we)h(can)f(use)h(a)f(meta)h
(operator)75 2486 y(CopProto)p Fw(Pointer)11 b Fv(which)h(at)h
(prototype)d(speci\256cation)j(time)f Fu(always)g Fv(has)h(0)f(in)g
(its)g(number)o(-of-ar)o(gument)g(\256eld)g(and)h(a)75
2535 y(prototype)7 b(annotation)h(attached)i(to)e(the)h(meta)h
(operator)f(specifying)f(the)h(type)g(of)g(the)g(data)g(\252pointed)g
(to\272.)14 b(Alternatively)m(,)75 2585 y(we)j(could)f(use)h(the)g
(CopProto)p Fw(Union)d Fv(operator)i(with)g Fu(one)g
Fv(ar)o(gument)h(\(specifying)f(the)g(type)g(of)h(the)f(data)h
(\252pointed)954 2754 y(52)p eop
%%Page: 53 54
53 53 bop 75 121 a Fv(to\272\).)23 b(In)12 b(both)g(cases,)k(an)d(IMP)p
547 121 13 2 v 15 w(Uint32)e(is)h(transmitted)g(at)h(data)g
(communication)g(time)f(which)h(can)g(have)h(the)e(value)h(0)75
171 y(\(corresponding)7 b(to)i(a)g Fs(NULL)g Fv(pointer\))f(or)g(1)h
(\(the)g(pointer)e(is)i(not)f Fs(NULL)h Fv(\261)g(or)n(,)h(use)f(the)g
(\256rst)f(type)h(speci\256er)h(in)e(the)h(Union\).)122
221 y(Consider)n(,)h(for)g(example,)h(an)g(array)g(of)f(two)f
Fs(struct)p 926 221 V 15 w(A)h Fv(structures)g(as)h(de\256ned)f(below:)
75 295 y Fs(struct)24 b(struct_B)h({)125 345 y(MP_String_t;)125
394 y(MP_Uint32_t;)75 444 y(})75 544 y(struct)f(struct_A)h({)125
594 y(MP_Sint32_t;)125 643 y(MP_Real32_t;)125 693 y(struct)f(struct_B)g
(*;)50 b(//)25 b(a)f(ptr)h(to)g(struct_B)75 743 y(})75
823 y Fv(and)10 b(the)g(following)e(data:)75 873 y Fs([)i
Fv(\(456,)g(90.12,)g(\(\))g(\),)125 b(-)10 b(First)g(structure)106
923 y(\(71,)g(2.1,)h(\(\252Ubnd\272,)g(2\))f Fs(])31
b Fv(-)10 b(Second)g(structure)75 1002 y(where)h(the)f(structure)g
(data)g(is)g(surrounded)f(by)h(parentheses)h(and)f(\(\))h(indicates)e
(a)i(NULL)g(pointer)n(.)339 1126 y(Figure)e(4.9:)15 b(Prototyped)8
b(MP)j(tree)f(for)g(an)h(array)f(of)g(structures)g(containing)f
(pointers)p 118 1176 1714 2 v 117 1222 2 46 v 130 1208
a Fe(T)m(ype)134 b(Dict)41 b(V)l(alue)189 b(#Annot:Ar)o(g)23
b(Remarks)p 1831 1222 V 118 1224 1714 2 v 117 1269 2
46 v 130 1256 a(Cop)146 b(Proto)24 b(CopProtoArray)44
b(1:2)155 b(A)10 b(2)f(element)f(array)p 1831 1269 V
117 1315 V 130 1301 a(AP)161 b(Proto)24 b(Prototype)332
b(1\))10 b(prototype)e(#1)p 1831 1315 V 117 1361 V 130
1347 a(Cop)146 b(Proto)24 b(CopProtoStruct)42 b(0:3)183
b(2\))10 b(each)e(element)g(is)h(a)g(structure)g(\()p
Fk(struct1)q Fe(\))p 1831 1361 V 117 1406 V 130 1393
a(Cmt)145 b(Proto)24 b(IMP)p 512 1393 12 2 v 14 w(Sint32)97
b(0:)p 1831 1406 2 46 v 117 1452 V 130 1438 a(Cmt)145
b(Proto)24 b(IMP)p 512 1438 12 2 v 14 w(Real32)88 b(0:)p
1831 1452 2 46 v 117 1498 V 130 1484 a(Cmop)117 b(Proto)24
b(CopProtoPointer)f(1:0)183 b(3\))10 b(3rd)f(element)g(is)g(a)g
(pointer)p 1831 1498 V 117 1543 V 130 1530 a(AP)161 b(Proto)24
b(Prototype)360 b(4\))10 b(prototype)e(#2)h(describing)f(structure)h
(of)h(thing)f(pointed)f(to)p 1831 1543 V 117 1589 V 130
1575 a(Cop)146 b(Proto)24 b(CopProtoStruct)42 b(2:0)211
b(5\))10 b(it)g(is)f(a)g(structure)g(of)h(2)f(things)f(\()p
Fk(struct2)q Fe(\))p 1831 1589 V 117 1635 V 130 1621
a(Cmt)145 b(Proto)24 b(IMP)p 512 1621 12 2 v 14 w(String)104
b(0:)230 b(6\))p 1831 1635 2 46 v 117 1680 V 130 1667
a(Cmt)145 b(Proto)24 b(IMP)p 512 1667 12 2 v 14 w(Uint32)91
b(0:)230 b(7\))p 1831 1680 2 46 v 117 1726 V 130 1712
a(IMP)p 198 1712 12 2 v 14 w(Sint32)136 b(456)421 b(8\))10
b(1st)f(instance)e(of)j Fk(struct)p 1322 1712 V 16 w(A)g
Fe(-)f(retrieve)h(using)e(prototype)h(#1)p 1831 1726
2 46 v 117 1772 V 130 1758 a(IMP)p 198 1758 12 2 v 14
w(Real32)127 b(90.12)p 1831 1772 2 46 v 117 1817 V 130
1804 a(IMP)p 198 1804 12 2 v 14 w(Uint32)j(0)459 b(9\))10
b(V)l(alue)e(for)i(Pointer)f(is)h(NULL,)f(so)f(end)h(of)g(1st)g
Fk(struct)p 1713 1804 V 16 w(A)p 1831 1817 2 46 v 117
1863 V 130 1849 a Fe(IMP)p 198 1849 12 2 v 14 w(Sint32)136
b(71)440 b(2nd)9 b(instance)e(of)j Fk(struct)p 1294 1849
V 16 w(A)p 1831 1863 2 46 v 117 1909 V 130 1895 a Fe(IMP)p
198 1895 12 2 v 14 w(Real32)127 b(2.1)p 1831 1909 2 46
v 117 1954 V 130 1941 a(IMP)p 198 1941 12 2 v 14 w(Uint32)j(1)459
b(10\))9 b(V)l(alue)g(for)h(Pointer)f(is)g(non-NULL,)g(get)g(the)g
(struct)g(pointed)g(to)p 1831 1954 2 46 v 117 2000 V
130 1986 a(IMP)p 198 1986 12 2 v 14 w(String)143 b(\252Ubnd\272)360
b(11\))9 b(retrieve)h(using)e(prototype)h(#2)p 1831 2000
2 46 v 117 2046 V 130 2032 a(IMP)p 198 2032 12 2 v 14
w(Uint32)130 b(2)459 b(12\))p 1831 2046 2 46 v 118 2047
1714 2 v 122 2133 a Fv(Figure)8 b(4.9)g(shows)f(what)h(this)f(would)g
(look)g(like)g(in)g(MP)-5 b(.)9 b(The)g(\256rst)e(prototype)f(on)i
(line)f(\(1\))h(indicates)f(that)h(each)h(element)75
2183 y(of)i(the)g(array)h(is)f(a)h(3-\256eld)e(structure.)18
b(Line)12 b(\(3\))e(indicates)h(that)g(the)g(third)f(\256eld)h(is)g(a)h
(pointer)e(to)h(an)g(object)g(\(in)g(this)f(case,)75
2233 y(CopProtoPointer)h(was)k(used\).)27 b(Lines)15
b(\(4)e(-)i(7\))e(give)h(the)g(prototype)f(describing)g(the)h(object)g
(pointed)e(to)i(on)g(line)f(\(3\).)75 2283 y(The)h(structuring)e
(prototype)g(on)h(line)h(\(5\))f(says)h(that)f(the)h(object)f(pointed)g
(to)g(on)g(line)g(\(3\))g(is)h(a)g(2-\256eld)f(structure.)25
b(The)75 2333 y(prototyped)8 b(data)i(tree)g(follows)e(the)i(Prototype)
e(tree)i(beginning)e(on)i(line)f(\(8\).)14 b(Notice)c(that)f(lines)g
(\(3\))g(and)h(\(4\))g(could)f(have)75 2382 y(been)i(replaced)g(by)f
(the)g(line)249 2456 y(Cop)49 b(Proto)g(CopProtoUnion)d(0:1)j(\(use)11
b(union)e(operator)g(instead)h(of)g(a)h(meta)g(operator\))75
2530 y(without)e(any)i(changes)h(in)e(the)h(other)f(lines.)17
b(In)10 b(general,)i(for)e(pointers)g(involving)e(Union)i(and)h
(RecUnion,)g(the)g(discrim-)75 2580 y(inator)i(\256eld)h(can)h(perform)
f(double)g(duty:)21 b(a)15 b(discriminator)e(value)h(of)g(0)g
(indicates)g(the)g(NULL)h(pointer)e(and)h(a)h(non-0)75
2630 y(discriminator)9 b(indicates)h(both)f(non-NULL)h(and)g(which)g
(\256eld)g(of)g(the)g(union)f(describes)i(the)f(data)h(to)f(follow)m(.)
954 2754 y(53)p eop
%%Page: 54 55
54 54 bop 122 121 a Fv(The)13 b(third)d(\256eld)i(of)g(the)f(\256rst)h
(element)g(of)g(the)g(array)g(appears)h(on)e(line)h(\(9\).)19
b(This)12 b(is)g(the)g(\256eld)f(corresponding)g(to)g(the)75
171 y(structure)j(pointer)e(from)i(line)g(\(3\).)27 b(The)14
b(value)h(here)f(is)g(0,)i(indicating)c(a)j(NULL)g(pointer)n(,)f(so)h
(the)f(receiver)h(skips)e(the)75 221 y(nested)e(prototype)d(\(lines)i
(4)h(-)f(7\))g(describing)g(the)g(structure)g(pointed)f(to.)16
b(However)n(,)c(the)e(value)g(for)h(the)f(pointer)f(\256eld)i(for)75
271 y(the)g(second)h(array)f(element)h(on)f(line)f(\(10\))h(is)g(1)g
(\(non-NULL\),)g(so)g(the)g(receiver)h(uses)g(the)f(prototype)f(from)h
(lines)f(\(4)h(-)g(7\))75 321 y(to)e(read)i(the)e(object)h(pointed)e
(to:)14 b(Line)c(\(6\))f(tells)g(the)h(receiver)h(to)e(read)h(a)h
(String)d(\(found)h(on)g(line)h(\(11\)\),)f(and)h(line)f(\(7\))h(says)
75 370 y(to)g(read)i(a)f(Uint32)f(\(found)g(on)g(line)h(\(12\)\).)16
b(There)c(were)g(only)e(two)g(elements)i(to)e(the)h(array)m(,)h(so)f
(the)g(end)g(of)g(the)f(MP)h(T)o(ree)75 420 y(has)g(been)f(reached.)122
470 y(Finally)m(,)f(recursive)g(data)g(structures)f(are)h(de\256ned)g
(by)g(matching)f(the)h(common)g(meta)g(types)g Fw(Cmt)p
Fv(ProtoRecUnion)d(and)75 520 y Fw(Cmt)p Fv(ProtoRecStruct)k(with)i
(their)f(common)i(operator)f(counterparts)f Fw(Cop)p
Fv(ProtoRecUnion)g(and)h Fw(Cop)p Fv(ProtoRecStruct.)75
570 y(The)f(simple)f(example)h(below)f(illustrates)f(the)h(concepts)g
(\(also)g(see)i(\256gure)e(4.10\).)75 661 y Fs(struct)24
b(recurse_ex)g({)125 711 y(MP_Sint32_t;)125 761 y(MP_Real32_t;)125
810 y(struct)g(recurse_ex)g(*;)50 b(//)24 b(self-referencing)g(pointer)
75 860 y(})494 1027 y Fv(Figure)10 b(4.10:)k(Prototyped)9
b(MP)h(T)o(ree)h(for)f(a)h(recursive)f(structure)p 145
1077 1661 2 v 144 1123 2 46 v 156 1109 a Fe(T)m(ype)135
b(Dict)40 b(V)l(alue)228 b(#Annot:Ar)o(g)24 b(Remarks)p
1805 1123 V 145 1125 1661 2 v 144 1170 2 46 v 156 1157
a(Cop)147 b(Proto)23 b(CopProtoArray)83 b(1:1)p 1805
1170 V 144 1216 V 156 1202 a(AP)162 b(Proto)23 b(Prototype)372
b(1\))p 1805 1216 V 144 1262 V 156 1248 a(Cop)147 b(Proto)23
b(CopProtoRecStruct)f(0:3)156 b(2\))9 b(de\256ning)f(a)h(recursive)f
(structure)p 1805 1262 V 144 1307 V 156 1294 a(Cmt)146
b(Proto)23 b(IMP)p 538 1294 12 2 v 14 w(Sint32)136 b(0:)203
b(3\))p 1805 1307 2 46 v 144 1353 V 156 1339 a(Cmt)146
b(Proto)23 b(IMP)p 538 1339 12 2 v 14 w(Real32)127 b(0:)203
b(4\))p 1805 1353 2 46 v 144 1399 V 156 1385 a(Cmop)118
b(Proto)23 b(CopProtoPointer)62 b(1:0)184 b(5\))9 b(pointer)p
1805 1399 V 144 1444 V 156 1431 a(AP)162 b(Proto)23 b(Prototype)372
b(6\))p 1805 1444 V 144 1507 2 63 v 156 1476 a(Cmt)146
b(Proto)23 b(CopProtoRecStruct)f(0:)203 b(7\))9 b(points)g(to)h(struct)
f(from)h(line)f(\(2\))p 1805 1507 V 144 1552 2 46 v 156
1539 a(IMP)p 224 1539 12 2 v 14 w(Sint32)136 b(10)480
b(8\))9 b(use)g(prototype)f(from)i(lines)f(\(1)g(-)h(7\))p
1805 1552 2 46 v 144 1598 V 156 1584 a(IMP)p 224 1584
12 2 v 14 w(Real32)127 b(2.3)p 1805 1598 2 46 v 144 1644
V 156 1630 a(IMP)p 224 1630 12 2 v 14 w(Uint32)j(1)499
b(9\))9 b(recursive)g(pointer)o(,)g(1)g(indicates)f(another)g(struct)i
(follows)p 1805 1644 2 46 v 144 1689 V 156 1676 a(IMP)p
224 1676 12 2 v 14 w(Sint32)136 b(20)480 b(10\))9 b(use)f(prototype)h
(from)h(lines)f(\(1)g(-)h(7\))p 1805 1689 2 46 v 144
1735 V 156 1721 a(IMP)p 224 1721 12 2 v 14 w(Real32)127
b(6.5)471 b(11\))p 1805 1735 2 46 v 144 1781 V 156 1767
a(IMP)p 224 1767 12 2 v 14 w(Uint32)130 b(0)499 b(12\))9
b(2nd)f(struct)i(ends)e(here,)h(0)g(indicates)f(no)g(more)i(follow)p
1805 1781 2 46 v 145 1782 1661 2 v 122 1876 a Fv(The)k(prototype)d(on)i
(lines)g(\(1)g(-)g(7\))g(describes)g(a)h(recursive)f(data)h(structure.)
23 b(The)14 b(CopProtoRecStruct)d(operator)h(on)75 1926
y(line)e(\(2\))f(indicates)h(each)i(ar)o(gument)e(of)g(the)g(top-level)
f(CopProtoArray)g(operator)g(is)h(a)h(structure)f(of)g(three)g
(elements)h(and)75 1976 y(indicates)f(that)g(this)g(is)h(a)g(recursive)
g(structure.)16 b(The)11 b(third)e(\256eld)i(of)f(this)g(structure)g
(on)h(line)f(\(5\))g(is)g(a)i(meta)f(operator)f(node)75
2025 y(packet)h(\(used)f(as)i(a)f(pointer\),)e(whose)i(prototype)d(on)i
(lines)g(\(6)h(-)f(7\))g(speci\256es)i(that)d(this)h(is)g(a)h
(recursive)g(pointer)e(\252pointing)75 2075 y(to\272)j(the)f
Fu(most)h(closely)g(nested)g Fv(CopProtoRecStruct)e(occurring)h
(previously)f(within)g(the)i(Prototype)e(T)o(ree,)j(which)f(is)f(on)75
2125 y(line)j(\(2\).)29 b(Note)15 b(that)f(the)h(pointer)r(')n(s)e
(number)o(-of-ar)o(guments)h(\256eld)h(is)g(0.)29 b(The)15
b(Prototyped)e(Data)j(T)o(ree)f(immediately)75 2175 y(follows)8
b(the)g(Prototype)g(T)o(ree)i(\(line)e(\(8\))g(on\).)15
b(The)9 b(\256rst)g(occurrence)h(of)f(the)g(recursive)g(pointer)e
(\256eld)i(appears)h(on)f(line)f(\(9\).)75 2225 y(Here)14
b(the)f(actual)g(number)o(-of-ar)o(guments)g(of)g(the)g
(CopProtoPointer)d(is)j(found.)23 b(Since)14 b(it)e(is)h(1)g
(\(non-NULL\),)h(another)75 2274 y(instance)c(of)g(this)f(structure)g
(\(lines)h(10)f(-)h(12\))g(follows.)k(The)c(recursive)h(pointer)d
(\256eld)i(of)g(this)f(second)h(structure)g(is)g(shown)75
2324 y(on)h(line)f(\(12\).)16 b(Here)c(the)f(value)g(is)f(0)h
(indicating)e(that)h(the)h(pointer)f(is)h(NULL.)h(Since)f(this)f(is)h
(a)g(recursive)g(data)g(structure,)75 2374 y(we)g(have)g(reached)g(the)
f(end)g(of)g(the)g(\252linked)g(list\272)g(and)g(no)g(more)h(data)f
(follows.)122 2424 y(The)j(next)e(example)h(combines)g
(CopProtoRecUnion,)e(CopProtoStruct,)g(and)i(recursive)g(type)f
(speci\256cations.)19 b(The)75 2474 y(data)11 b(structure)e(is)h(a)h
(recursive)g(representation)e(of)h(a)h(sparse)g(polynomial.)i(One)e
(possible)e(declaration)h(looks)g(like:)75 2565 y Fs(union)24
b(SparseRecPoly)49 b({)125 2615 y(MP_Sint32_t;)397 b(//)25
b(coefficient)954 2754 y Fv(54)p eop
%%Page: 55 56
55 55 bop 125 121 a Fs(struct)24 b(inner_poly{)175 171
y(MP_String_t;)347 b(//)25 b(varname)175 221 y(MP_Uint32_t;)347
b(//)25 b(exponent)175 271 y(union)f(SparseRecPoly)g(*;)99
b(//)25 b(multiplic)f(subpoly)175 321 y(union)g(SparseRecPoly)g(*;)99
b(//)25 b(additive)f(subpoly)125 370 y(};)75 420 y(};)75
501 y Fv(The)11 b(sample)g(data)f(is:)75 551 y Fs(3*x\3034\(y+2\))24
b(+)h(x\3032)49 b(=)h(x\3034)99 b(+)h(x\3032)598 601
y(*)598 650 y(\(y)124 b(+)100 b(2\))598 700 y(*)598 750
y(3)122 831 y Fv(Its)9 b(encoding)g(in)g(MP)h(is)f(shown)g(in)g(the)g
(usual)h(table)f(form)g(in)g(\256gure)h(4.11)f(and)h(as)g(a)g
(source-code)g(fragment)g(using)e(the)75 881 y(MP)i(API)h(in)e
(\256gure)i(4.12.)k(Notice)10 b(how)f(the)i(union)d(discriminators)h
(are)i(used)g(as)g(indirect)e(recursive)i(pointers.)421
1005 y(Figure)f(4.11:)k(Protoyped)9 b(MP)i(T)o(ree)f(for)g(a)h(sparse)g
(recursive)g(polynomial)p 300 1055 1350 2 v 299 1101
2 46 v 312 1087 a Fe(T)m(ype)133 b(Dict)40 b(V)l(alue)164
b(#Annot:Ar)o(g)24 b(Remarks)p 1649 1101 V 300 1102 1350
2 v 299 1148 2 46 v 312 1134 a(Cop)145 b(Poly)35 b(SparseRecPoly)21
b(1:1)156 b(top-level)9 b(operator)p 1649 1148 V 299
1217 2 70 v 312 1180 a(AP)160 b(Proto)23 b(Prototype)p
1649 1217 V 299 1263 2 46 v 312 1249 a(Cop)145 b(Proto)23
b(RecUnion)97 b(0:2)156 b(recursive)8 b(union)p 1649
1263 V 299 1308 V 312 1295 a(Cmt)144 b(Proto)23 b(IMP)p
692 1295 12 2 v 14 w(Sint32)72 b(0:)175 b(coe\256cient)7
b(typespec)p 1649 1308 2 46 v 299 1354 V 312 1340 a(Cop)145
b(Proto)23 b(Struct)161 b(0:4)156 b(inner)p 1157 1340
12 2 v 13 w(poly)9 b(struct)g(typespec)p 1649 1354 2
46 v 299 1400 V 312 1386 a(Cmt)144 b(Proto)23 b(IMP)p
692 1386 12 2 v 14 w(String)79 b(0:)175 b(var)9 b(name)f(typespec)p
1649 1400 2 46 v 299 1445 V 312 1432 a(Cmt)144 b(Proto)23
b(IMP)p 692 1432 12 2 v 14 w(Uint32)66 b(0:)175 b(exponent)7
b(typespec)p 1649 1445 2 46 v 299 1491 V 312 1477 a(Cmt)144
b(Proto)23 b(RecUnion)97 b(0:)175 b(mult.)14 b(subpoly)8
b(recursive)g(typespec)p 1649 1491 V 299 1560 2 70 v
312 1523 a(Cmt)144 b(Proto)23 b(RecUnion)97 b(0:)175
b(add.)12 b(subpoly)c(recursive)g(typespec)p 1649 1560
V 299 1606 2 46 v 312 1592 a(IMP)p 380 1592 12 2 v 14
w(Uint32)128 b(2)435 b(use)8 b(proto)h(2)p 1649 1606
2 46 v 299 1652 V 312 1638 a(IMP)p 380 1638 12 2 v 14
w(String)141 b(x)435 b(the)9 b(outermost)f(var)h(is)h(x)p
1649 1652 2 46 v 299 1697 V 312 1684 a(IMP)p 380 1684
12 2 v 14 w(Uint32)128 b(4)435 b(its)9 b(exponent)e(is)j(4)p
1649 1697 2 46 v 299 1743 V 312 1729 a(IMP)p 380 1729
12 2 v 14 w(Uint32)128 b(2)435 b(mult)9 b(subpoly)f(to)h
Fk(x\3034)i Fe(\261)e(use)f(proto)h(2)p 1649 1743 2 46
v 299 1789 V 312 1775 a(IMP)p 380 1775 12 2 v 14 w(String)141
b(y)435 b(the)9 b(current)g(var)g(is)g(y)p 1649 1789
2 46 v 299 1834 V 312 1821 a(IMP)p 380 1821 12 2 v 14
w(Uint32)128 b(1)435 b(its)9 b(exponent)e(is)j(1)p 1649
1834 2 46 v 299 1880 V 312 1866 a(IMP)p 380 1866 12 2
v 14 w(Uint32)128 b(1)435 b(mult)9 b(subpoly)f(to)h(y)g(\261)g(use)g
(proto)g(1)p 1649 1880 2 46 v 299 1926 V 312 1912 a(IMP)p
380 1912 12 2 v 14 w(Sint32)134 b(3)435 b(coef)o(f)p
1649 1926 2 46 v 299 1971 V 312 1958 a(IMP)p 380 1958
12 2 v 14 w(Uint32)128 b(1)435 b(add)8 b(subpoly)f(y)i(\261)h(use)e
(proto)h(1)p 1649 1971 2 46 v 299 2017 V 312 2003 a(IMP)p
380 2003 12 2 v 14 w(Sint32)134 b(2)435 b(coef)o(f)p
1649 2017 2 46 v 299 2063 V 312 2049 a(IMP)p 380 2049
12 2 v 14 w(Uint32)128 b(2)435 b(add)8 b(subpoly)f(to)j
Fk(x\3034)g Fe(\261)f(use)g(proto)g(2)p 1649 2063 2 46
v 299 2108 V 312 2095 a(IMP)p 380 2095 12 2 v 14 w(String)141
b(x)435 b(var)9 b(is)g(again)f(x)p 1649 2108 2 46 v 299
2154 V 312 2140 a(IMP)p 380 2140 12 2 v 14 w(Uint32)128
b(2)435 b(its)9 b(exponent)e(is)j(now)e(2)p 1649 2154
2 46 v 299 2200 V 312 2186 a(IMP)p 380 2186 12 2 v 14
w(Uint32)128 b(1)435 b(mult)9 b(subpoly)f(to)h Fk(x\3032)i
Fe(\261)e(use)f(proto)h(1)p 1649 2200 2 46 v 299 2245
V 312 2232 a(IMP)p 380 2232 12 2 v 14 w(Sint32)134 b(1)435
b(coef)o(f)p 1649 2245 2 46 v 299 2291 V 312 2277 a(IMP)p
380 2277 12 2 v 14 w(Uint32)128 b(0)435 b(no)8 b(add.)13
b(subpoly)8 b(to)h Fk(x\3032)i Fe(\261)e(use)f(proto)h(0)p
1649 2291 2 46 v 300 2293 1350 2 v 300 2295 V 122 2381
a Fv(Based)k(on)e(the)h(recursive)g(polynomial)e(example)i(and)g(the)g
(rules)g(governing)e(meta)j(operator)e(type)g(speci\256cations,)i(it)75
2431 y(is)h(easy)g(to)g(develop)f(the)h(speci\256cations)g(for)f(more)i
(complex)f(polynomial)e(data,)j(such)f(as)h(matrices)g(of)e
(polynomials,)75 2480 y(or)h(the)h(generators)g(of)f(a)i(polynomial)d
(ideal.)28 b(In)15 b(these)g(cases,)j(the)c(top-level)g
(CopPolySparseRecPoly)f(operator)h(of)75 2530 y(the)i(example)h(above)f
(appears)h(as)f(a)h(common)f(meta)h(operator)e(at)i(the)e(root)g(of)h
(the)g(type)f(speci\256er)i(to)f(the)f(top-level)75 2580
y(CopPolyIdeal)9 b(operator)g(\(or)n(,)i(of)e(the)h
(CopMatrixDenseDistMatrix)e(operator\))h(and)h(the)g(rest)h(of)e(the)h
(type)g(speci\256cation)75 2630 y(is)g(exactly)g(as)h(above.)16
b(As)10 b(a)h(last)f(example,)i(we)e(show)g(how)g(this)g(is)g
(accomplished)g(in)g(\256gure)g(4.13.)954 2754 y(55)p
eop
%%Page: 56 57
56 56 bop 75 129 a Fg(')p 75 2513 4 2304 v 75 2598 a(&)1876
129 y($)p 1876 2513 V 1876 2598 a(\045)p 160 2598 1636
4 v 160 129 V 91 191 a Fk(MP_PutCom)q(mon)q(Op)q(era)q(to)q(rP)q(ack)q
(et)q(\(li)q(nk)q(,)227 b(/*)23 b(top-leve)q(l)j(operator)f(*/)696
241 y(MP_PolyDi)q(ct)q(,)696 291 y(MP_CopPol)q(yS)q(par)q(se)q(Rec)q
(Po)q(ly)q(,)696 341 y(1,1\);)91 390 y(MP_PutAnn)q(ota)q(ti)q(onP)q(ac)
q(ke)q(t\(l)q(in)q(k,)317 b(/*)23 b(prototyp)q(e)j(annot)e(*/)606
440 y(MP_Proto)q(Dic)q(t,)606 490 y(MP_Annot)q(Pro)q(to)q(Pr)q(oto)q
(ty)q(pe,)606 540 y(MP_Annot)q(Val)q(ua)q(te)q(dFl)q(ag)i(&)d
(MP_AnnotR)q(equ)q(ir)q(ed)q(Fla)q(g\))q(;)91 590 y(MP_PutCom)q(mon)q
(Op)q(era)q(to)q(rP)q(ack)q(et)q(\(li)q(nk)q(,)227 b(/*)23
b(recursiv)q(e)j(union)e(*/)696 639 y(MP_ProtoD)q(ic)q(t,)696
689 y(MP_CopPro)q(to)q(Rec)q(Un)q(ion)q(,)696 739 y(0,)f(2\);)91
789 y(MP_PutCom)q(mon)q(Me)q(taT)q(yp)q(eP)q(ack)q(et)q(\(li)q(nk)q(,)
227 b(/*)23 b(coeffici)q(en)q(t)i(typespec)h(*/)696 839
y(MP_ProtoD)q(ic)q(t,)696 888 y(MP_CmtPro)q(to)q(IMP)q(_S)q(int)q(32)q
(,)g(0\);)91 938 y(MP_PutCom)q(mon)q(Op)q(era)q(to)q(rP)q(ack)q(et)q
(\(li)q(nk)q(,)182 b(/*)24 b(inner_poly)i(struct)f(typespec)h(*/)696
988 y(MP_ProtoD)q(ic)q(t,)696 1038 y(MP_CopPro)q(to)q(Str)q(uc)q(t,)696
1088 y(0,)d(4\);)91 1138 y(MP_PutCom)q(mon)q(Me)q(taT)q(yp)q(eP)q(ack)q
(et)q(\(li)q(nk)q(,)227 b(/*)23 b(var)h(name)g(typespec)i(*/)696
1187 y(MP_ProtoD)q(ic)q(t,)696 1237 y(MP_CmtPro)q(to)q(IMP)q(_S)q(tri)q
(ng)q(,)g(0\);)91 1287 y(MP_PutCom)q(mon)q(Me)q(taT)q(yp)q(eP)q(ack)q
(et)q(\(li)q(nk)q(,)227 b(/*)23 b(exponent)j(typespec)g(*/)696
1337 y(MP_ProtoD)q(ic)q(t,)696 1387 y(MP_CmtPro)q(to)q(IMP)q(_U)q(int)q
(32)q(,)g(0\);)91 1436 y(MP_PutCom)q(mon)q(Me)q(taT)q(yp)q(eP)q(ack)q
(et)q(\(li)q(nk)q(,)48 b(/*)23 b(mult.)i(subpoly)g(recursive)h
(typespec)g(*/)696 1486 y(MP_ProtoD)q(ic)q(t,)696 1536
y(MP_CmtPro)q(to)q(Rec)q(Un)q(ion)q(,)g(0\);)91 1586
y(MP_PutCom)q(mon)q(Me)q(taT)q(yp)q(eP)q(ack)q(et)q(\(li)q(nk)q(,)f(/*)
f(add)f(subpoly)j(recursive)g(typespec)g(*/)696 1636
y(MP_ProtoD)q(ic)q(t,)696 1685 y(MP_CmtPro)q(to)q(Rec)q(Un)q(ion)g
(0\);)91 1735 y(/*)d(Poly)h(data)g(begins)h(*/)91 1785
y(IMP_PutUi)q(nt3)q(2\()q(lin)q(k,)h(2\);)69 b(/*)23
b(use)g(proto)i(2)e(*/)91 1835 y(IMP_PutSt)q(rin)q(g\()q(lin)q(k,)j
("x"\);)f(/*)e(the)g(outermos)q(t)j(var)d(is)h(x)e(*/)91
1885 y(IMP_PutUi)q(nt3)q(2\()q(lin)q(k,)k(4\);)69 b(/*)23
b(its)g(exponent)j(is)d(4)g(*/)91 1935 y(IMP_PutUi)q(nt3)q(2\()q(lin)q
(k,)j(2\);)69 b(/*)23 b(mult)h(subpoly)h(to)e(x\3034)h(--)f(use)h
(proto)h(2)45 b(*/)91 1984 y(IMP_PutSt)q(rin)q(g\()q(lin)q(k,)26
b("y"\);)f(/*)e(the)g(current)j(var)d(is)h(y)f(*/)91
2034 y(IMP_PutUi)q(nt3)q(2\()q(lin)q(k,)j(1\);)69 b(/*)23
b(its)g(exponent)j(is)d(1)g(*/)91 2084 y(IMP_PutUi)q(nt3)q(2\()q(lin)q
(k,)j(1\);)69 b(/*)23 b(mult)h(subpoly)h(to)e(y)g(--)h(use)f(proto)i(1)
e(*/)91 2134 y(IMP_PutSi)q(nt3)q(2\()q(lin)q(k,)j(3\);)69
b(/*)23 b(coeff)h(*/)91 2184 y(IMP_PutUi)q(nt3)q(2\()q(lin)q(k,)i(1\);)
69 b(/*)23 b(add.)h(subpoly)h(to)e(y)g(--)h(use)f(proto)i(1)e(*/)91
2233 y(IMP_PutSi)q(nt3)q(2\()q(lin)q(k,)j(2\);)69 b(/*)23
b(coeff)h(*/)91 2283 y(IMP_PutUi)q(nt3)q(2\()q(lin)q(k,)i(2\);)69
b(/*)23 b(add)g(subpoly)j(to)d(x\3034)h(--)f(use)h(proto)g(2)f(*/)91
2333 y(IMP_PutSt)q(rin)q(g\()q(lin)q(k,)j("x"\))47 b(/*)23
b(var)g(is)h(again)g(x)f(*/)91 2383 y(IMP_PutUi)q(nt3)q(2\()q(lin)q(k,)
j(2\);)69 b(/*)23 b(its)g(exponent)j(is)d(now)h(2)f(*/)91
2433 y(IMP_PutUi)q(nt3)q(2\()q(lin)q(k,)j(1\);)69 b(/*)23
b(mult)h(subpoly)h(to)e(x\3032)h(--)f(use)h(proto)h(1)45
b(*/)91 2482 y(IMP_PutSi)q(nt3)q(2\()q(lin)q(k,)26 b(1\);)69
b(/*)23 b(coeff)h(is)g(1)e(*/)91 2532 y(IMP_PutUi)q(nt3)q(2\()q(lin)q
(k,)k(0\);)69 b(/*)23 b(no)g(add.)h(subpoly)h(to)f(x\3032--)g(use)g
(proto)g(0)f(*/)421 2678 y Fv(Figure)10 b(4.12:)k(Sending)9
b(the)h(polynomial)f(3)p Fq(x)1091 2663 y Fp(4)1107 2678
y Fq(y)i Fo(+)f Fq(x)1204 2663 y Fp(2)1230 2678 y Fv(using)g(the)g(MP)g
(API)954 2754 y(56)p eop
%%Page: 57 58
57 57 bop 598 149 a Fv(Figure)9 b(4.13:)14 b(Prototyped)9
b(MP)h(T)o(ree)h(for)f(an)h(ideal)p 245 200 1460 2 v
244 245 2 46 v 257 232 a Fe(T)m(ype)40 b(Dict)h(V)l(alue)294
b(#Annot:Ar)o(g)24 b(Remarks)p 1704 245 V 245 247 1460
2 v 244 293 2 46 v 257 279 a(Cop)52 b(Poly)36 b(CopPolyIdeal)173
b(1:10)137 b(an)8 b(ideal)h(consisting)f(of)i(10)e(polys)p
1704 293 V 244 338 V 257 325 a(AP)67 b(Proto)24 b(Prototype)438
b(each)8 b(poly)g(is)i(a)p 1704 338 V 244 384 V 257 370
a(Cmop)23 b(Poly)36 b(CopPolySparseRec)o(Poly)20 b(1:1)156
b(sparse-rec)8 b(poly)g(\261)h(notice)g(use)f(of)i(Cmop)e(here)p
1704 384 V 244 453 2 70 v 257 416 a(AP)67 b(Proto)24
b(Prototype)p 1704 453 V 244 499 2 46 v 257 485 a(Cop)52
b(Proto)24 b(CopProtoRecUnion)83 b(0:2)156 b(recursive)8
b(union)p 1704 499 V 244 544 V 257 531 a(Cmt)51 b(Proto)24
b(IMP)p 545 531 12 2 v 14 w(Sint32)202 b(0:)175 b(coef)o(\256cient)8
b(typespec)p 1704 544 2 46 v 244 590 V 257 576 a(Cop)52
b(Proto)24 b(CopProtoStruct)147 b(0:4)156 b(inner)p 1140
576 12 2 v 13 w(poly)9 b(struct)g(typespec)p 1704 590
2 46 v 244 636 V 257 622 a(Cmt)51 b(Proto)24 b(IMP)p
545 622 12 2 v 14 w(String)209 b(0:)175 b(var)9 b(name)f(typespec)p
1704 636 2 46 v 244 681 V 257 668 a(Cmt)51 b(Proto)24
b(IMP)p 545 668 12 2 v 14 w(Uint32)196 b(0:)175 b(exponent)7
b(typespec)p 1704 681 2 46 v 244 727 V 257 713 a(Cmt)51
b(Proto)24 b(CmtProtoRecUnion)82 b(0:)175 b(mult.)14
b(subpoly)8 b(recursive)g(typespec)p 1704 727 V 244 796
2 70 v 257 759 a(Cmt)51 b(Proto)24 b(CmtProtoRecUnion)82
b(0:)175 b(add.)13 b(subpoly)7 b(recursive)h(typespec)p
1704 796 V 244 842 2 46 v 257 828 a(data)h(of)g(the)g(10)g(polynomials)
f(goes)g(here,)h(starting)g(with)h(the)f(prototype)f(to)i(be)e(used)g
(for)i(the)f(\256rst)h(poly)n(,)e(etc)p 1704 842 V 245
844 1460 2 v 75 968 a Fm(4.4)58 b(Buffer)15 b(Level)f(Routines)75
1061 y Fv(It)f(is)h(not)f(expected)h(that)f(the)h(programmer)g(will)f
(access)i(a)g(link')n(s)d(buf)o(fers)i(directly)e(using)h(these)h
(routines.)25 b(They)14 b(are)75 1111 y(described)c(for)g(completeness)
h(and)g(to)e(allow)h(developers)g(to)g(build)e(their)i(own)g(higher)f
(level)h(routines.)p 75 1183 1793 2 v 75 1459 2 277 v
102 1251 a Fk(MP_Status_)q(t)26 b(IMP_GetLon)q(g\()q(MP_)q(Li)q(nk_)q
(pt)g(link,)f(long)f(*lp\))102 1306 y(MP_Status_)q(t)i(IMP_PutLon)q
(g\()q(MP_)q(Li)q(nk_)q(pt)g(link,)f(long)f(*lp\))102
1361 y(MP_Status_)q(t)i(IMP_GetByt)q(es)q(\(MP)q(_L)q(ink)q(_p)q(t)g
(link,)e(caddr_t)h(addr,)g(unsigned)h(long)e(len\))102
1417 y(MP_Status_)q(t)i(IMP_PutByt)q(es)q(\(MP)q(_L)q(ink)q(_p)q(t)g
(link,)e(caddr_t)h(addr,)g(unsigned)h(long)e(len\))p
1866 1459 V 75 1461 1793 2 v 713 1544 a Fv(T)m(able)11
b(4.9:)k(Buf)o(fer)10 b(level)g(routines)122 1636 y Fs(IMP_PutLong\(\))
j Fv(puts)g(a)h(four)f(byte)h(quantity)m(,)f(treated)h(as)g(a)h(long)d
(integer)n(,)j(to)e(the)h(link)e(pointed)g(to)i(by)f
Fs(link)p Fv(.)75 1686 y Fs(MP)p 127 1686 13 2 v 15 w(Failure)6
b Fv(is)g(returned)g(only)g(if)g(the)g(buf)o(fer)g(is)g(full)g(and)g
(the)g(write)g(operation)f(fails.)11 b(Conversely)m(,)c
Fs(IMP_GetLong\(\))75 1735 y Fv(gets)k(a)h(four)f(byte)g(quantity)m(,)f
(treated)i(as)g(a)f(long)g(integer)n(,)g(from)g(the)h(link.)17
b Fs(MP)p 1223 1735 V 15 w(Failure)10 b Fv(is)h(returned)g(if)g(all)g
(data)h(in)e(the)75 1785 y(current)e(message)i(has)f(been)g(exhausted)g
(or)f(if)g(there)g(is)g(a)h(problem)f(with)g(the)g(link.)13
b(These)d(routines)d(handle)h(byte)g(ordering)75 1835
y(according)i(to)g(link-speci\256c)f(attributes.)122
1885 y Fs(IMP_GetBytes\(\))e Fv(and)h Fs(IMP_PutBytes\(\))f
Fv(get/put)g Fs(len)h Fv(bytes)g(starting)f(at)h(address)h
Fs(addr)f Fv(from/to)e(the)i(link)75 1935 y(pointed)j(to)h(by)h
Fs(link)p Fv(.)22 b Fs(MP)p 496 1935 V 15 w(Failure)12
b Fv(is)g(returned)g(from)h(the)f(put)g(routine)g(only)f(if)i(the)f
(buf)o(fer)g(is)h(full)e(and)i(the)g(write)75 1985 y(operation)e
(fails.)19 b Fs(MP)p 397 1985 V 15 w(Failure)11 b Fv(is)h(returned)f
(from)h(the)g(get)f(routine)g(if)g(all)h(data)g(in)f(the)h(current)f
(logical)g(message)j(has)75 2034 y(been)9 b(exhausted)g(or)g(if)f
(there)h(is)f(a)h(problem)g(with)e(the)i(link.)k Fs(len)c
Fv(may)g(be)g(greater)h(than)e(the)g(buf)o(fer)h(size.)15
b(The)10 b(get)e(routine)75 2084 y(assumes)k(that)d(there)i(is)f(suf)o
(\256cient)g(room)g(at)g Fs(addr)g Fv(to)g(store)g(the)g(given)g
(number)g(of)g(bytes.)75 2224 y Fm(4.5)58 b(Memory)14
b(Management)122 2317 y Fv(The)g(memory)g(functions)e(shown)h(in)g
(table)h(4.10)f(are)h(reassignable.)25 b(By)13 b(default)g(they)g(use)h
(the)f(standard)h(memory)75 2366 y(functions)9 b Fs(malloc\(\))p
Fv(,)h Fs(realloc\(\))p Fv(,)g(and)g Fs(free\(\))p Fv(.)122
2416 y Fu(Important:)33 b Fv(Changing)8 b(the)i(memory)g(management)h
(routines)d(should)h(be)h(done)g(at)f(the)h(beginning)e(of)h(the)h
(program,)75 2466 y(before)g(any)h(memory)f(allocation)g(has)g(been)h
(done)f(and)g(certainly)g(before)g(a)h(call)g(to)e Fu(any)i
Fv(other)e(MP)i(routines.)122 2516 y(MP)j(allocates/frees)g(memory)g
(using)f(the)h Fs(IMP_Mem*)f Fv(functions)f(for)h(all)h(data)f(types)h
(except)g(for)f(strings)g(\(arrays)75 2566 y(of)18 b(characters\))h
(and)f(raw)g(data)g(\(data)g(received)g(by)g(the)g Fs(GetRaw)f
Fv(routines\).)37 b(Memory)18 b(for)f(these)i(data)f(types)f(is)75
2615 y(allocated/freed)10 b(using)f(the)h Fs(IMP_RawMem*)g
Fv(functions.)954 2754 y(57)p eop
%%Page: 58 59
58 58 bop 75 52 1793 2 v 75 494 2 442 v 102 120 a Fk(void*)24
b(\(*IMP_Mem)q(Al)q(loc)q(Fn)q(c\))q(\(si)q(ze)q(_t\))102
175 y(void*)g(\(*IMP_Mem)q(Re)q(all)q(oc)q(Fn)q(c\)\()q(vo)q(id)i(*,)d
(size_t,)i(size_t\))102 230 y(void)46 b(\(*IMP_Mem)q(Fr)q(eeF)q(nc)q
(\)\()q(voi)q(d)26 b(*,)d(size_t\))102 341 y(void*)h(\(*IMP_Raw)q(Me)q
(mAl)q(lo)q(cF)q(nc\))i(\(size_t\))102 396 y(void*)e(\(*IMP_Raw)q(Me)q
(mRe)q(al)q(lo)q(cFn)q(c\))i(\(void)f(*,)e(size_t\))102
451 y(void)46 b(\(*IMP_Raw)q(Me)q(mFr)q(ee)q(Fn)q(c\))26
b(\(void)e(*\))p 1866 494 V 75 496 1793 2 v 731 579 a
Fv(T)m(able)11 b(4.10:)j(Memory)c(routines)75 712 y Fm(4.6)58
b(Err)o(or)13 b(Handling)p 75 789 V 75 1065 2 277 v 102
857 a Fk(void)24 b(MP_PrintEr)q(ro)q(r\(M)q(P_)q(Li)q(nk_)q(pt)i
(link\))102 912 y(char*)e(MP_ErrorS)q(tr)q(\(MP)q(_L)q(in)q(k_p)q(t)i
(link\))102 968 y(MP_Status_)q(t)g(MP_ClearEr)q(ro)q(r\(M)q(P_)q(Lin)q
(k_)q(pt)g(link\))102 1023 y(MP_Status_)q(t)g(MP_SetErro)q(r\()q(MP_)q
(Li)q(nk_)q(pt)g(link,)f(MP_Status_)q(t)h(the_err\))p
1866 1065 V 75 1067 1793 2 v 681 1150 a Fv(T)m(able)11
b(4.11:)j(Error)c(handling)f(routines)122 1247 y(Where)15
b(it)f(makes)h(sense)h(to)d(do)h(so,)i(MP)f(routines)e(return)g(a)i
(status)f(value:)23 b Fs(MP)p 1330 1247 13 2 v 14 w(Success)p
Fv(,)16 b Fs(MP)p 1595 1247 V 14 w(Failure)p Fv(,)g(or)e(a)75
1297 y(speci\256c)e(error)f(value.)19 b(T)m(able)12 b(4.12)f(lists)g
(the)g(MP)g(error)g(codes.)19 b(Each)13 b(link)d(maintains)h(a)h(local)
f Fs(errno)g Fv(which)g(records)75 1346 y(the)16 b(error)g(status)h(of)
f(the)g(last)g(event)g(involving)e(the)i(link.)33 b(An)16
b(error)g(message)i(can)g(be)e(printed)f(to)h Fs(stderr)g
Fv(with)75 1396 y Fs(MP)p 127 1396 V 15 w(PrintError\(\))p
Fv(.)e(This)c(does)g(not)f(reset)i(the)f(link')n(s)e(error)i(value.)15
b(If)10 b(logging)e(has)i(not)f(been)i(disabled,)f(a)g(message)75
1446 y(describing)i(the)h(error)f(will)g(automatically)g(be)h(entered)g
(in)g(the)g(log)f(\256le.)23 b Fs(MP_ErrorStr\(\))12
b Fv(returns)g(a)i(pointer)d(to)i(a)75 1496 y(string)c(describing)g
(the)h(error)g(associated)h(with)f(the)g(link')n(s)e
Fs(errno)i Fv(\256eld.)122 1546 y(The)17 b(values)g(for)e
Fs(MP_Success)h Fv(and)g Fs(MP_Failure)g Fv(are)h(consistent)e(with)h
(C')n(s)f(encoding)h(of)g(true)g(and)g(false,)75 1595
y(allowing)9 b(the)h(programmer)g(to)g(test)g(for)g(success/failure)h
(in)e(the)h(usual)g(manner)n(.)16 b(For)10 b(example,)75
1663 y Fs(if)25 b(\(!MP_PutSint32Packet\(link,)d(n,)j(0\)\))125
1713 y(MP_PrintError\(link\);)122 1777 y(MP)p 174 1777
V 15 w(ClearError\(\))9 b Fv(sets)i(the)f(link')n(s)f(error)h(variable)
g Fs(errno)g Fv(to)f Fs(MP)p 1197 1777 V 15 w(Success)h
Fv(and)g(returns)g Fs(MP)p 1643 1777 V 15 w(Success)p
Fv(.)122 1827 y Fs(MP)p 174 1827 V 15 w(SetError\(\))f
Fv(sets)i(the)f(link')n(s)f(error)h(variable)g(to)g Fs(the)p
1038 1827 V 14 w(err)g Fv(and)h(returns)e Fs(MP)p 1383
1827 V 15 w(Failure)p Fv(.)75 1967 y Fm(Acknowledgements)75
2059 y Fv(The)f(author)f(wishes)g(to)g(thank)g(Ch'ng)f(Shi)h(Baw)h(for)
f(his)g(work)g(implementing)f(the)h(new)h(buf)o(fering)e(layer)i(and)f
(in)g(preparing)75 2109 y(the)i(initial)f(interface)i(to)e(PVM3.)15
b(Olaf)10 b(Bachmann)g(contributed)d(the)j(MPT)g(\(MP)f(T)o(ree\))h
(library)e(which)h(is)h(included)e(with)75 2159 y(and)13
b(builds)e(upon)g(the)i(MP)f(library)m(,)h(numerous)f(\256xes)h(and)f
(enhancements)i(to)e(the)g(code,)i(and)f(an)g(improved)e(con\256gure)75
2209 y(script.)j(Thanks)c(also)f(go)g(to)g(Paul)g(W)m(ang,)g(Norbert)g
(Kajler)n(,)h(and)f(Olaf)g(Bachmann)h(for)f(their)f(comments)i(on)f
(earlier)g(drafts)75 2258 y(of)h(this)f(Guide.)954 2754
y(58)p eop
%%Page: 59 60
59 59 bop 223 637 1504 2 v 222 687 2 50 v 504 672 a Fv(Error)10
b(Code)585 b(Meaning)p 1726 687 V 223 689 1504 2 v 222
738 2 50 v 248 724 a Fs(MP_Failure)497 b Fv(Failure)p
1726 738 V 222 788 V 248 773 a Fs(MP_Success)g Fv(Success)p
1726 788 V 222 838 V 248 823 a Fs(MP_UnknownType)397
b Fv(Unknown)9 b(type)p 1726 838 V 222 888 V 248 873
a Fs(MP_UnknownAnnotation)247 b Fv(Unknown)9 b(annotation)p
1726 888 V 222 938 V 248 923 a Fs(MP_UnknownRequiredAnnotation)47
b Fv(Unknown)9 b(required)h(annotation)p 1726 938 V 222
988 V 248 973 a Fs(MP_NullLink)472 b Fv(Null)9 b(link)p
1726 988 V 222 1037 V 248 1022 a Fs(MP_NullTransport)347
b Fv(Null)9 b(transport)g(device)p 1726 1037 V 222 1087
V 248 1072 a Fs(MP_CantOpenFile)372 b Fv(Can')o(t)10
b(open)g(\256le)h(link)p 1726 1087 V 222 1137 V 248 1122
a Fs(MP_CantConnect)397 b Fv(Can')o(t)10 b(make)h(connection)p
1726 1137 V 222 1187 V 248 1172 a Fs(MP_MemAlloc)472
b Fv(Can')o(t)10 b(allocate)h(memory)p 1726 1187 V 222
1237 V 248 1222 a Fs(MP_CantConvert)397 b Fv(Can')o(t)10
b(convert)p 1726 1237 V 222 1286 V 248 1271 a Fs(MP_ValueOutOfRange)297
b Fv(V)-5 b(alue)11 b(is)f(out)g(of)g(the)g(legal)g(range)g(for)g(this)
f(type)p 1726 1286 V 222 1336 V 248 1321 a Fs(MP_CantPutNodeHeader)247
b Fv(Can')o(t)10 b(put)g(node)g(header)p 1726 1336 V
222 1386 V 248 1371 a Fs(MP_CantPutNodePacket)247 b Fv(Can')o(t)10
b(put)g(node)g(packet)p 1726 1386 V 222 1436 V 248 1421
a Fs(MP_CantPutDataLimb)297 b Fv(Can')o(t)10 b(put)g(data)g(limb)p
1726 1436 V 222 1486 V 248 1471 a Fs(MP_CantPutAnnotationPacket)97
b Fv(Can')o(t)10 b(put)g(annotation)e(packet)p 1726 1486
V 222 1535 V 248 1521 a Fs(MP_CantGetNodeHeader)247 b
Fv(Can')o(t)10 b(get)g(node)g(header)p 1726 1535 V 222
1585 V 248 1570 a Fs(MP_CantGetNodePacket)247 b Fv(Can')o(t)10
b(get)g(node)g(packet)p 1726 1585 V 222 1635 V 248 1620
a Fs(MP_CantGetDataLimb)297 b Fv(Can')o(t)10 b(get)g(data)h(limb)p
1726 1635 V 222 1685 V 248 1670 a Fs(MP_CantGetAnnotationPacket)97
b Fv(Can')o(t)10 b(get)g(annotation)f(packet)p 1726 1685
V 222 1735 V 248 1720 a Fs(MP_NotRequestedPacketType)122
b Fv(Incoming)10 b(packet)g(not)g(type)g(requested)p
1726 1735 V 222 1785 V 248 1770 a Fs(MP_CantConvertBadString)172
b Fv(Can')o(t)10 b(convert,)g(bad)h(string)p 1726 1785
V 222 1834 V 248 1819 a Fs(MP_CantWriteLink)347 b Fv(Can')o(t)10
b(write)g(link)p 1726 1834 V 222 1884 V 248 1869 a Fs(MP_CantReadLink)
372 b Fv(Can')o(t)10 b(read)h(link)p 1726 1884 V 222
1934 V 248 1919 a Fs(MP_NotCommonIdentifier)197 b Fv(Identi\256er)10
b(longer)f(than)h(one)g(character)p 1726 1934 V 222 1984
V 248 1969 a Fs(MP_WrongBasicVectorType)172 b Fv(Illegal)10
b(element)g(type)g(for)g(a)h(Basic)g(V)-5 b(ector)p 1726
1984 V 222 2034 V 248 2019 a Fs(MP_DummyBigNum)397 b
Fv(Can')o(t)10 b(put/get)f(dummy)h(bignum)p 1726 2034
V 223 2035 1504 2 v 746 2115 a(T)m(able)h(4.12:)k(MP)10
b(error)g(codes)954 2754 y(59)p eop
%%Page: 60 61
60 60 bop 75 453 a Fr(Bibliography)96 674 y Fv([1])20
b(O.)11 b(Bachmann,)h(S.)f(Gray)m(,)g(and)g(H.)g(Sch)747
675 y(\310)744 674 y(onemann.)17 b(A)11 b(Framework)g(for)f
(Distributed)e(Polynomial)h(Systems)j(Based)165 723 y(on)e(MP.)16
b(In)11 b Fu(Pr)n(oc.)h(of)e(the)g(International)e(Symposium)i(on)g
(Symbolic)g(and)g(Algebraic)h(Computation)c(\(ISSAC'96\))p
Fv(,)165 773 y(Zurich,)j(Switzerland,)g(July)g(1996.)g(ACM)g(Press.)96
856 y([2])20 b(O.)8 b(Bachmann,)h(S.)f(Gray)m(,)h(and)f(H.)g(Sch)730
857 y(\310)727 856 y(onemann.)j(A)c(proposal)g(for)g(syntactic)g(data)h
(integration)d(for)i(math)h(protocols.)165 906 y(In)15
b Fu(to)f(appear)h(in)g(the)g(Pr)n(oceedings)h(of)f(the)g
(International)d(Symposium)j(on)f(Parallel)h(Symbolic)f(Computation)165
956 y(\(P)-5 b(ASCO'97\))p Fv(,)9 b(Hawaii,)i(USA,)g(July)e(1997.)h(.)
96 1039 y([3])20 b(Bachmann,)11 b(O.)f(and)f(Gray)m(,)i(S.)f(and)f(Sch)
760 1040 y(\310)757 1039 y(onemann,)i(H.)j(MP)c(Prototype)e
(Speci\256cation.)14 b(In)9 b Fu(Reports)h(On)f(Computer)165
1089 y(Algebra)p Fv(,)h(number)h(12.)f(Centre)g(for)g(Computer)f
(Algebra,)i(University)d(of)i(Kaiserslautern,)h(January)f(1997.)96
1172 y([4])20 b(J.A.)9 b(Ber)o(gstra)e(and)h(P)-5 b(.)9
b(Klint.)g(The)g(Discrete)f(T)o(ime)g(T)m(oolBus.)i(T)m(echnical)f
(Report)e(P9502,)h(Programming)f(Research)165 1221 y(Group,)j
(University)e(of)i(Amsterdam,)i(1995.)96 1305 y([5])20
b(N.)13 b(Borenstein)f(and)h(N.)h(Freed.)23 b(MIME)13
b(\(Multipurpose)d(Internet)j(Mail)f(Extensions\))g(Part)h(One:)20
b(Mechanisms)165 1354 y(for)10 b(Specifying)f(and)h(Describing)g(the)g
(Format)g(of)g(Internet)g(Message)h(Bodies.)k(RFC)10
b(1521,)g(September)g(1993.)96 1437 y([6])20 b(S.)9 b(Gray)m(,)g(N.)f
(Kajler)n(,)h(and)f(P)-5 b(.)9 b(S.)g(W)m(ang.)i(MP:)d(A)g(Protocol)f
(for)h(Ef)o(\256cient)g(Exchange)h(of)f(Mathematical)g(Expressions.)165
1487 y(In)g(M.)h(Giesbrecht,)h(editor)n(,)e Fu(Pr)n(oc.)j(of)d(the)g
(International)e(Symposium)i(on)h(Symbolic)f(and)g(Algebraic)g
(Computation)165 1537 y(\(ISSAC'94\))p Fv(,)h(pages)i(330\261335,)e
(Oxford,)h(GB,)g(July)g(1994.)f(ACM)h(Press.)96 1620
y([7])20 b(S.)10 b(Gray)m(,)h(N.)f(Kajler)n(,)g(and)g(P)-5
b(.)11 b(S.)f(W)m(ang.)k(Speci\256cation)c(of)f(Expression)g(Encoding)g
(in)g(the)h(Multi)e(Protocol,)h(version)165 1670 y(0.5.)20
b(T)m(echnical)13 b(Report)e(ICM-9404-64,)g(Institute)f(for)i
(Computational)d(Mathematics,)14 b(Kent)e(State)g(University)m(,)165
1720 y(1994.)96 1803 y([8])20 b(S.)9 b(Gray)m(,)h(N.)f(Kajler)n(,)g
(and)g(P)-5 b(.)9 b(S.)g(W)m(ang.)j(Design)c(and)h(Implementation)f(of)
g(MP)-5 b(,)9 b(a)g(Protocol)e(for)h(Ef)o(\256cient)h(Exchange)165
1852 y(of)h(Mathematical)h(Expressions.)j Fu(Journal)c(of)g(Symbolic)f
(Computing)p Fv(,)f(1997.)15 b(Forthcoming.)96 1935 y([9])20
b(Institute)9 b(of)i(Electrical)g(and)g(Electronics)g(Engineers.)17
b(IEEE)12 b(Standard)f(for)g(Binary)f(Floating-Point)e(Arithmetic.)165
1985 y(ANSI/IEEE)j(Standard)f(754-1985,)e(August)i(1985.)75
2068 y([10])20 b(N.)11 b(Kajler)n(.)17 b(Building)9 b(a)j(Computer)e
(Algebra)h(Environment)f(by)h(Composition)d(of)j(Collaborative)e(T)m
(ools.)18 b(In)10 b(J.)i(P)-5 b(.)165 2118 y(Fitch,)10
b(editor)n(,)g Fu(Pr)n(oc.)h(of)f(DISCO'92,)f(Bath,)h(GB)p
Fv(,)h(volume)f(721)f(of)h Fu(LNCS)p Fv(,)f(pages)i(85\26194.)e
(Springer)o(-V)-5 b(erlag,)10 b(April)165 2168 y(1992.)75
2251 y([11])20 b(D.)11 b(Schefstr)355 2252 y(\310)352
2251 y(om)f(and)g(G.)h(van)f(den)h(Broek,)f(editors.)k
Fu(T)l(ool)c(Integration)p Fv(.)j(W)n(iley)d(Press,)i(1993.)75
2334 y([12])20 b(V)-5 b(.)18 b(Sunderam.)38 b(PVM:)18
b(A)g(framework)h(for)f(parallel)g(distributed)e(computing.)36
b Fu(Concurr)n(ency)8 b(\261)f(Practice)19 b(&)165 2384
y(Experience)p Fv(,)12 b(2:315\261339,)d(1990.)954 2754
y(60)p eop
%%Page: 61 62
61 61 bop 75 357 a Fr(Index)75 566 y Fk(IMP_GetAp)q(In)q(t\(\))q
Fe(,)13 b(28)75 612 y Fk(IMP_GetAp)q(Re)q(al\()q(\))p
Fe(,)g(28)75 657 y Fk(IMP_GetBo)q(ol)q(ean)q(\(\))q Fe(,)f(28)75
703 y Fk(IMP_GetBy)q(te)q(s\(\))q Fe(,)h(57)75 749 y
Fk(IMP_GetId)q(en)q(tif)q(ie)q(r\(\))q Fe(,)g(30)75 794
y Fk(IMP_GetLo)q(ng)q(\(\))p Fe(,)g(57)75 840 y Fk(IMP_GetMe)q(ta)q
(Typ)q(e\()q(\))p Fe(,)g(30)75 886 y Fk(IMP_GetNo)q(de)q(Hea)q(de)q
(r\(\))q Fe(,)g(31)75 931 y Fk(IMP_GetOp)q(er)q(ato)q(r\()q(\))p
Fe(,)g(30)75 977 y Fk(IMP_GetRa)q(w\()q(\))p Fe(,)g(29)75
1023 y Fk(IMP_GetRe)q(al)q(32\()q(\))p Fe(,)g(28)75 1068
y Fk(IMP_GetRe)q(al)q(64\()q(\))p Fe(,)g(28)75 1114 y
Fk(IMP_GetSi)q(nt)q(32\()q(\))p Fe(,)g(28)75 1160 y Fk(IMP_GetSi)q(nt)q
(8\(\))q Fe(,)g(28)75 1205 y Fk(IMP_GetSt)q(ri)q(ng\()q(\))p
Fe(,)g(29)75 1251 y Fk(IMP_GetTr)q(an)q(spB)q(yN)q(ame)q(\(\))q
Fe(,)f(41)75 1297 y Fk(IMP_GetUi)q(nt)q(32\()q(\))p Fe(,)h(28)75
1342 y Fk(IMP_GetUi)q(nt)q(8\(\))q Fe(,)g(28)75 1388
y Fk(IMP_MemAl)q(lo)q(cFn)q(c\()q(\))p Fe(,)g(57)75 1434
y Fk(IMP_MemFr)q(ee)q(Fnc)q(\(\))q Fe(,)f(57)75 1479
y Fk(IMP_MemRe)q(al)q(loc)q(Fn)q(c\(\))q Fe(,)h(57)75
1525 y Fk(IMP_PutAp)q(In)q(t\(\))q Fe(,)g(24)75 1571
y Fk(IMP_PutBy)q(te)q(s\(\))q Fe(,)g(57)75 1616 y Fk(IMP_PutId)q(en)q
(tif)q(ie)q(r\(\))q Fe(,)g(25)75 1662 y Fk(IMP_PutLo)q(ng)q(\(\))p
Fe(,)g(57)75 1708 y Fk(IMP_PutMe)q(ta)q(Ope)q(ra)q(tor)q(\(\))q
Fe(,)f(24)75 1753 y Fk(IMP_PutMe)q(ta)q(Typ)q(e\()q(\))p
Fe(,)h(24)75 1799 y Fk(IMP_PutNo)q(de)q(Hea)q(de)q(r\(\))q
Fe(,)g(27)75 1845 y Fk(IMP_PutRa)q(w\()q(\))p Fe(,)g(24)75
1890 y Fk(IMP_PutRe)q(al)q(32\()q(\))p Fe(,)g(24)75 1936
y Fk(IMP_PutRe)q(al)q(64\()q(\))p Fe(,)g(24)75 1982 y
Fk(IMP_PutSi)q(nt)q(32\()q(\))p Fe(,)g(24)75 2027 y Fk(IMP_PutSt)q(ri)q
(ng\()q(\))p Fe(,)g(24)75 2073 y Fk(IMP_PutUi)q(nt)q(32\()q(\))p
Fe(,)g(24)75 2119 y Fk(IMP_RawMe)q(mA)q(llo)q(cF)q(nc\()q(\))p
Fe(,)g(57)75 2164 y Fk(IMP_RawMe)q(mF)q(ree)q(Fn)q(c\(\))q
Fe(,)g(57)75 2210 y Fk(IMP_RawMe)q(mR)q(eal)q(lo)q(cFn)q(c\()q(\))p
Fe(,)g(57)75 2256 y Fk(MP_AddEnv)q(Tr)q(ans)q(pD)q(evi)q(ce)q(\(\))q
Fe(,)f(41)75 2301 y Fk(MP_Alloca)q(te)q(Env)q(\(\))q
Fe(,)g(12,)d(41)75 2347 y Fk(MP_AnnotR)q(eq)q(uir)q(ed)q
Fe(,)j(20)75 2392 y Fk(MP_AnnotT)q(re)q(eSc)q(op)q(e)p
Fe(,)h(20)75 2438 y Fk(MP_AnnotV)q(al)q(uat)q(ed)q Fe(,)f(20)75
2484 y Fk(MP_ClearE)q(rr)q(or\()q(\))p Fe(,)h(58)75 2529
y Fk(MP_CloseL)q(in)q(k\(\))q Fe(,)g(13,)c(15)75 2575
y Fk(MP_EndMsg)q(\(\))q Fe(,)j(22)75 2621 y Fk(MP_EndMsg)q(Re)q(set)q
(\(\))q Fe(,)g(22,)d(23)1048 566 y Fk(MP_ErrorSt)q(r\()q(\))p
Fe(,)k(58)1048 612 y Fk(MP_GetApIn)q(tP)q(ack)q(et)q(\(\))q
Fe(,)f(28)1048 657 y Fk(MP_GetApRe)q(al)q(Pac)q(ke)q(t\()q(\))p
Fe(,)h(28)1048 703 y Fk(MP_GetBool)q(ea)q(nPa)q(ck)q(et)q(\(\))p
Fe(,)g(28)1048 749 y Fk(MP_GetComm)q(on)q(Con)q(st)q(an)q(tPa)q(ck)q
(et\()q(\))p Fe(,)g(30)1048 794 y Fk(MP_GetComm)q(on)q(Gre)q(ek)q(Id)q
(ent)q(if)q(ier)q(Pa)q(ck)q(et\()q(\))p Fe(,)d(30)1048
840 y Fk(MP_GetComm)q(on)q(Lat)q(in)q(Id)q(ent)q(if)q(ier)q(Pa)q(ck)q
(et\()q(\))p Fe(,)g(30)1048 886 y Fk(MP_GetComm)q(on)q(Met)q(aT)q(yp)q
(ePa)q(ck)q(et\()q(\))p Fe(,)j(30)1048 931 y Fk(MP_GetComm)q(on)q(Ope)q
(ra)q(to)q(rPa)q(ck)q(et\()q(\))p Fe(,)g(30)1048 977
y Fk(MP_GetCons)q(ta)q(ntP)q(ac)q(ke)q(t\(\))q Fe(,)f(30)1048
1023 y Fk(MP_GetEnvO)q(pt)q(ion)q(\(\))q Fe(,)g(40)1048
1068 y Fk(MP_GetIden)q(ti)q(fie)q(rP)q(ac)q(ket)q(\(\))q
Fe(,)g(30)1048 1114 y Fk(MP_GetLink)q(Op)q(tio)q(n\()q(\))p
Fe(,)h(43)1048 1160 y Fk(MP_GetLink)q(St)q(atu)q(s\()q(\))p
Fe(,)g(23)1048 1205 y Fk(MP_GetMeta)q(Ty)q(peP)q(ac)q(ke)q(t\(\))q
Fe(,)f(30)1048 1251 y Fk(MP_GetOper)q(at)q(orP)q(ac)q(ke)q(t\(\))q
Fe(,)g(30)1048 1297 y Fk(MP_GetRawP)q(ac)q(ket)q(\(\))q
Fe(,)g(29)1048 1342 y Fk(MP_GetReal)q(32)q(Pac)q(ke)q(t\()q(\))p
Fe(,)h(28)1048 1388 y Fk(MP_GetReal)q(64)q(Pac)q(ke)q(t\()q(\))p
Fe(,)g(28)1048 1434 y Fk(MP_GetSint)q(32)q(Pac)q(ke)q(t\()q(\))p
Fe(,)g(28)1048 1479 y Fk(MP_GetSint)q(8P)q(ack)q(et)q(\(\))q
Fe(,)f(28)1048 1525 y Fk(MP_GetStri)q(ng)q(Pac)q(ke)q(t\()q(\))p
Fe(,)h(29)1048 1571 y Fk(MP_GetUint)q(32)q(Pac)q(ke)q(t\()q(\))p
Fe(,)g(28)1048 1616 y Fk(MP_GetUint)q(8P)q(ack)q(et)q(\(\))q
Fe(,)f(28)1048 1662 y Fk(MP_InitMsg)q(\(\))q Fe(,)g(23)1048
1708 y Fk(MP_Initial)q(iz)q(eEn)q(v\()q(\))p Fe(,)h(12,)c(40)1048
1753 y Fk(MP_LogEven)q(t\()q(\))p Fe(,)k(45)1048 1799
y Fk(MP_OpenLin)q(k\()q(\))p Fe(,)g(13,)c(14)1131 1845
y(example,)f(15)1131 1890 y(table)h(of)g(ar)o(guments)f(for)o(,)i(14)
1048 1936 y Fk(MP_PeekHea)q(de)q(r\(\))q Fe(,)j(31,)c(32)1048
1982 y Fk(MP_PrintEr)q(ro)q(r\(\))q Fe(,)k(24,)c(58)1048
2027 y Fk(MP_PutAnno)q(ta)q(tio)q(nP)q(ac)q(ket)q(\(\))q
Fe(,)j(33)1048 2073 y Fk(MP_PutApIn)q(tP)q(ack)q(et)q(\(\))q
Fe(,)g(24)1048 2119 y Fk(MP_PutBool)q(ea)q(nPa)q(ck)q(et)q(\(\))p
Fe(,)h(24)1048 2164 y Fk(MP_PutComm)q(on)q(Con)q(st)q(an)q(tPa)q(ck)q
(et\()q(\))p Fe(,)g(25)1048 2210 y Fk(MP_PutComm)q(on)q(Gre)q(ek)q(Id)q
(ent)q(if)q(ier)q(Pa)q(ck)q(et\()q(\))p Fe(,)d(25)1048
2256 y Fk(MP_PutComm)q(on)q(Lat)q(in)q(Id)q(ent)q(if)q(ier)q(Pa)q(ck)q
(et\()q(\))p Fe(,)g(25)1048 2301 y Fk(MP_PutComm)q(on)q(Met)q(aO)q(pe)q
(rat)q(or)q(Pac)q(ke)q(t\()q(\))p Fe(,)j(24)1048 2347
y Fk(MP_PutComm)q(on)q(Met)q(aT)q(yp)q(ePa)q(ck)q(et\()q(\))p
Fe(,)g(24)1048 2392 y Fk(MP_PutComm)q(on)q(Ope)q(ra)q(to)q(rPa)q(ck)q
(et\()q(\))p Fe(,)g(25)1048 2438 y Fk(MP_PutCons)q(ta)q(ntP)q(ac)q(ke)q
(t\(\))q Fe(,)f(25)1048 2484 y Fk(MP_PutIden)q(ti)q(fie)q(rP)q(ac)q
(ket)q(\(\))q Fe(,)g(25)1048 2529 y Fk(MP_PutMeta)q(Op)q(era)q(to)q(rP)
q(ack)q(et)q(\(\))p Fe(,)h(24)1048 2575 y Fk(MP_PutMeta)q(Ty)q(peP)q
(ac)q(ke)q(t\(\))q Fe(,)f(24)1048 2621 y Fk(MP_PutOper)q(at)q(orP)q(ac)
q(ke)q(t\(\))q Fe(,)g(25)954 2754 y Fv(61)p eop
%%Page: 62 63
62 62 bop 75 121 a Fk(MP_PutRaw)q(Pa)q(cke)q(t\()q(\))p
Fe(,)13 b(24)75 167 y Fk(MP_PutRea)q(l3)q(2Pa)q(ck)q(et\()q(\))p
Fe(,)g(24)75 213 y Fk(MP_PutRea)q(l6)q(4Pa)q(ck)q(et\()q(\))p
Fe(,)g(24)75 258 y Fk(MP_PutSin)q(t3)q(2Pa)q(ck)q(et\()q(\))p
Fe(,)g(24)75 304 y Fk(MP_PutSin)q(t8)q(Pac)q(ke)q(t\(\))q
Fe(,)g(24)75 350 y Fk(MP_PutStr)q(in)q(gPa)q(ck)q(et\()q(\))p
Fe(,)g(24)75 395 y Fk(MP_PutUin)q(t3)q(2Pa)q(ck)q(et\()q(\))p
Fe(,)g(24)75 441 y Fk(MP_PutUin)q(t8)q(Pac)q(ke)q(t\(\))q
Fe(,)g(24)75 487 y Fk(MP_Releas)q(eE)q(nv\()q(\))p Fe(,)g(12)75
532 y Fk(MP_ResetL)q(in)q(k\(\))q Fe(,)g(22)75 578 y
Fk(MP_SetEnv)q(Op)q(tio)q(n\()q(\))p Fe(,)g(40)75 624
y Fk(MP_SetErr)q(or)q(\(\))p Fe(,)g(58)75 669 y Fk(MP_SetLin)q(kO)q
(pti)q(on)q(\(\))p Fe(,)g(43)75 715 y Fk(MP_SkipMs)q(g\()q(\))p
Fe(,)g(23)75 761 y Fk(MP_TestEo)q(fM)q(sg\()q(\))p Fe(,)g(23)75
806 y Fk(SetEnvBig)q(In)q(tFo)q(rm)q(at\()q(\))p Fe(,)g(42)75
852 y Fk(SetEnvBig)q(Re)q(alF)q(or)q(mat)q(\(\))q Fe(,)f(42)75
939 y(annotation)c(packet,)g(20,)h(33)158 985 y(\257ags,)f(20)158
1030 y(logging,)h(45)158 1076 y(macros)200 1122 y(\256eld)f(tests,)h
(34)200 1167 y(set/clear)f(\257ag)h(\256elds,)f(33)200
1213 y(set/get)g(packet)g(header)g(\256elds,)h(35)75
1259 y(arbitrary)h(precision)158 1304 y(changing)d(packages)g(for)o(,)i
(42)158 1350 y(integer)o(,)g(24,)g(28)158 1396 y(real,)h(24,)f(28)75
1483 y(boolean)f(type)158 1529 y(C)h(de\256nition,)g(18)158
1574 y(get)g(routines,)g(28)158 1620 y(put)g(routine,)h(24)75
1707 y(common)e(types,)h(19)75 1753 y(constant)f(types)158
1798 y(C)h(de\256nition,)g(18)158 1844 y(get)g(routines,)g(30)158
1890 y(put)g(routines,)g(26)75 1977 y(data)g(communication)e(time,)j
(49)75 2023 y(data)f(limb,)h(20)158 2068 y(use)e(in)i(prototypes,)e(47)
75 2114 y(dictionary)158 2160 y(de\256ned,)g(21)158 2205
y(no)h(semantics,)f(26,)h(31)158 2251 y(receiver)q(')n(s)g(semantics,)f
(26,)h(31)158 2297 y(table)g(of)g(dictionary)g(tags,)g(21)75
2384 y(environment)158 2429 y(allocating,)g(12)158 2475
y(de\256ned,)f(12)158 2521 y(getting)h(options,)g(40)158
2566 y(initializing,)i(12)158 2612 y(releasing,)e(12)1131
121 y(setting)g(options,)f(40)1131 167 y(table)h(of)g(settable)g
(options,)f(41)1131 213 y(transport)h(devices,)f(41)1048
258 y(error)i(handling)1131 304 y(routines,)f(58)1131
350 y(table)g(of)g(errors,)h(58)1048 437 y(GNU)f(Multiple)h(Precision)e
(Package,)g(28)1048 524 y(identi\256er)h(types)1131 570
y(C)g(de\256nition,)g(18)1131 615 y(get)g(routines,)g(30)1131
661 y(put)g(routines,)g(25)1048 707 y(integer)g(types)1131
752 y(arbitrary)h(precision,)e(24,)h(28)1172 798 y(changing)e(packages)
g(for)o(,)i(42)1131 844 y(C)g(de\256nition,)g(18)1131
889 y(get)g(routines,)g(28)1131 935 y(machine)f(precision,)g(18,)h(28)
1131 981 y(put)g(routines,)g(24)1048 1068 y(link)1131
1113 y(buf)o(fer)h(options,)e(43)1131 1159 y(buf)o(fer)i(routines,)f
(57)1131 1205 y(buf)o(fering)g(layer)o(,)g(13)1131 1250
y(closing,)f(15)1131 1296 y(de\256ned,)f(13)1131 1342
y Fk(errno)p Fe(,)k(58)1131 1387 y(getting)e(options,)f(43)1131
1433 y(logging)g(options,)h(44)1131 1479 y(opening,)f(13)1131
1524 y(or)o(ganization,)g(13)1131 1570 y(send/receive)f(modes,)h(43)
1131 1616 y(setting)h(options,)f(43)1131 1661 y(status,)g(23)1131
1707 y(steps)g(for)i(making)e(a)h(connection,)f(12)1131
1753 y(table)h(of)g(settable)g(options,)f(44)1048 1798
y(logging)1131 1844 y(enabling/disabling,)f(44)1131 1890
y(events,)h(44)1131 1935 y(log)h(\256le,)g(44)1131 1981
y(opening)e(a)i(link,)h(15)1131 2027 y(sample)e(output,)h(45)1048
2114 y(memory)g(management)1131 2160 y(receiving)f(data,)h(28)1131
2205 y(routines,)g(57)1048 2251 y(messages,)d(13)1131
2297 y(fragments,)j(13)1131 2342 y(receiving)f(side,)h(23)1131
2388 y(sending)e(side,)i(22)1131 2433 y(synchronization,)e(23)1048
2479 y(meta)i(operator)f(type)1131 2525 y(C)h(de\256nition,)g(18)1131
2570 y(CopProtoArray)f(operator)o(,)h(51)1131 2616 y(CopProtoPointer)f
(operator)o(,)h(52)954 2754 y Fv(62)p eop
%%Page: 63 64
63 63 bop 158 121 a Fe(description,)9 b(51)158 167 y(dif)o(ferences)g
(with)g(operators,)g(51)158 213 y(get)g(routines,)g(30)158
258 y(put)g(routines,)g(24)158 304 y(use)f(in)i(recursion,)e(54)75
350 y(meta)h(type)158 395 y(C)g(de\256nition,)g(18)158
441 y(CmtRecStruct)g(type)g(for)h(recursion,)e(54)158
487 y(CmtRecUnion)g(type)h(for)h(recursion,)e(54)158
532 y(get)h(routines,)g(30)158 578 y(put)g(routines,)g(24)158
624 y(table)g(of)g(MP-de\256ned)f(meta)h(types,)g(47)158
669 y(use)f(in)i(prototypes,)e(47)75 715 y(MP)h(data)g(types,)f(18)75
761 y(MP)h(environment,)g Fa(see)f Fe(environment12)75
806 y(MP)h(link,)h Fa(see)e Fe(link13)75 852 y(MP)h(T)o(ree,)g(22)75
939 y(naming)f(conventions,)g(10)75 985 y(node)g(packet)158
1030 y(\256elds,)h(18)158 1076 y(logging,)g(44)158 1122
y(macros)200 1167 y(get)g(packet)e(header)h(\256elds,)h(33)200
1213 y(set)f(packet)g(header)g(\256elds,)h(27)75 1300
y(operator)g(type)158 1346 y(prototypes)200 1392 y(CopProtoRecStruct)e
(operator)o(,)i(54)200 1437 y(CopProtoRecUnion)e(operator)o(,)h(54)200
1483 y(CopProtoStruct)g(operator)o(,)h(49)200 1529 y(CopProtoUnion)f
(operator)o(,)g(49)75 1574 y(operator)h(types)158 1620
y(C)g(de\256nition,)g(18)158 1666 y(get)g(routines,)g(30)158
1711 y(put)g(routines,)g(25)75 1798 y(packets,)f(18,)h
Fa(see)f Fe(data)g(limb18)158 1844 y(annotation,)g(33)158
1890 y(node,)g(18)75 1935 y(prototype)158 1981 y(common)g(operators,)h
(47)158 2027 y(CopProtoArray)g(operator)o(,)f(51)158
2072 y(CopProtoPointer)h(operator)o(,)f(52)158 2118 y(CopProtoRecUnion)
f(operator)o(,)i(54)158 2164 y(CopProtoStruct)g(operator)o(,)g(49,)g
(54)158 2209 y(CopProtoUnion)f(operator)o(,)h(49)158
2255 y(de\256ned,)f(45)158 2301 y(meta)h(operators,)g(51)158
2346 y(pointers)g(in,)g(52)158 2392 y(recursive)f(de\256nitions,)h(54)
75 2438 y(Prototype)g(Data)g(T)o(ree,)f(47,)h Fa(see)f
Fe(prototypes47)75 2483 y(prototype)h(speci\256cation)e(time,)j(51)75
2529 y(Prototype)f(T)o(ree,)f(47,)h Fa(see)g Fe(prototypes47)75
2616 y(raw)g(type)1131 121 y(C)g(de\256nition,)g(18)1131
167 y(get)g(routines,)g(29)1131 213 y(put)g(routines,)g(24)1048
258 y(real)g(types)1131 304 y(arbitrary)h(precision,)e(24,)h(28)1172
350 y(changing)e(packages)g(for)o(,)i(42)1131 395 y(C)g(de\256nition,)g
(18)1131 441 y(get)g(routines,)g(28)1131 487 y(machine)f(precision,)g
(18,)h(28)1131 532 y(put)g(routines,)g(24)1048 578 y(receiving)1131
624 y(annotations,)f(34)1131 669 y(booleans,)f(28)1131
715 y(constants,)g(31)1131 761 y(expressions,)g(31)1131
806 y(identi\256ers,)i(31)1131 852 y(meta)g(operators,)f(30)1131
898 y(meta)h(type,)g(30)1131 943 y(numbers,)f(28)1131
989 y(operators,)g(31)1131 1035 y(raw)h(data,)g(29)1131
1080 y(strings,)g(29)1131 1126 y(vectors,)f(38)1048 1213
y(sending)1131 1259 y(annotations,)g(33)1131 1304 y(booleans,)f(24)1131
1350 y(constants,)g(26)1131 1396 y(expressions,)g(26)1131
1441 y(identi\256ers,)i(25)1131 1487 y(meta)g(operators,)f(24)1131
1533 y(meta)h(type,)g(24)1131 1578 y(numbers,)f(24)1131
1624 y(operators,)g(25)1131 1670 y(prototype)g(example,)g(56)1131
1715 y(raw)h(data,)g(24)1131 1761 y(strings,)g(24)1131
1807 y(vectors,)f(38)1048 1852 y(string)h(type)1131 1898
y(C)g(de\256nition,)g(18)1131 1944 y(get)g(routines,)g(29)1131
1989 y(put)g(routines,)g(24)1048 2035 y(symbolic)f(constant,)g
Fa(see)g Fe(constant)g(types18)1048 2122 y(transport)h(devices,)f(41)
1131 2168 y(adding)g(to)h(environment,)g(41)1131 2213
y(FILE,)g(13,)g(14)1131 2259 y(independenc)o(e)d(from)k(MP)l(,)g(13)
1131 2305 y(PVM,)f(41)1131 2350 y(TCP)l(,)g(13,)g(14,)g(17)1131
2396 y(T)m(oolBus,)f(41)1048 2483 y(vectors)1131 2529
y(supported)f(types,)i(39)954 2754 y Fv(63)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
