## Makefile for integer programming

##
## various paths
##
bindir          = @bindir@
prefix          = @prefix@
slibdir         = ${prefix}/LIB

##
## various programs
##
@SET_MAKE@
CXX             = @CXX@
INSTALL         = ../install-sh -c
INSTALL_PROGRAM = ../install-sh -c
MKINSTALLDIRS   = ../mkinstalldirs

##
## compiler and linker options
##
CXXFLAGS        = @CXXFLAGS@
LDFLAGS         = @LDFLAGS@ -lgmp


MAIN1	:= solve_IP
OBJECTS1:= $(MAIN1).o

MAIN2	:= change_cost
OBJECTS2:= $(MAIN2).o

MAIN3	:= toric_ideal
OBJECTS3:= $(MAIN3).o

MAIN4   := gen_test
OBJECTS4:= $(MAIN4).o

%.o: %.cc
	$(CXX) $(CXXFLAGS) -c $< -o $@

all: $(MAIN1) $(MAIN2) $(MAIN3) $(MAIN4)

install: $(MAIN1) $(MAIN2) $(MAIN3) $(MAIN4)
	${INSTALL_PROGRAM} $(MAIN1) ${bindir}
	${INSTALL_PROGRAM} $(MAIN2) ${bindir}
	${INSTALL_PROGRAM} $(MAIN3) ${bindir}
	${INSTALL_PROGRAM} $(MAIN4) ${bindir}

clean: 
	rm -f *.o *~ 

distclean: clean
	rm -f $(MAIN1) $(MAIN2) $(MAIN3) $(MAIN4)
	-rm -f ${bindir}/$(MAIN1)
	-rm -f ${bindir}/$(MAIN2)
	-rm -f ${bindir}/$(MAIN3)
	-rm -f ${bindir}/$(MAIN4)

$(MAIN1): term_ordering.o binomial.o list.o BigInt.o LLL.o matrix.o \
	ideal.o \
	Buchberger.o ideal_stuff.o IP_algorithms.o testdata.o \
	$(OBJECTS1)
	$(CXX) $^ -o $@ $(LDFLAGS)

$(MAIN2): term_ordering.o binomial.o list.o BigInt.o LLL.o matrix.o \
	ideal.o \
	Buchberger.o ideal_stuff.o IP_algorithms.o testdata.o  \
	$(OBJECTS2)
	$(CXX)  $^ -o $@ $(LDFLAGS)

$(MAIN3): term_ordering.o binomial.o list.o BigInt.o LLL.o matrix.o \
	ideal.o \
	Buchberger.o ideal_stuff.o IP_algorithms.o testdata.o \
	$(OBJECTS3)
	$(CXX)  $^ -o $@ $(LDFLAGS)

$(MAIN4): term_ordering.o binomial.o list.o BigInt.o LLL.o matrix.o \
	ideal.o \
	Buchberger.o ideal_stuff.o IP_algorithms.o testdata.o \
	$(OBJECTS4)
	$(CXX)  $^ -o $@ $(LDFLAGS)
